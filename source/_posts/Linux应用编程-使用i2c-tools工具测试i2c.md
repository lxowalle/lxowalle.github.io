---
title: Linux应用编程-使用i2c-tools工具测试i2c
date: 2021-11-05 19:23:57
tags: Linux
---

# Linux应用编程-使用i2c-tools工具测试i2c

i2c-tools命令是一套简单的i2c工具，可以在编写i2c应用或者驱动时用来测试i2c，也可以直接用来操作i2c设备。

## i2cdetect命令

```shell
i2cdetect -l 	# 获取系统支持的i2c总线
i2cdetect -y 1	# 检测i2c-1的挂载情况
i2cdetect -y 0	# 检测i2c-0的挂载情况
例如：
root@sipeed:~# i2cdetect -y 4
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- 2c -- -- --
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
50: -- UU -- -- -- -- -- -- -- -- -- -- -- -- -- --
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
70: -- -- -- -- -- -- 76 --
# 上面表示i2c-4的0x2c、0x51和0x76地址挂载了一个设备，显示UU表示该地址被驱动占用了但并没有设备存在。
```

## i2cdump命令

```shell
i2cdump -y -f 4 0x2c	# 获取i2c-4 地址0x2c设备的寄存器数据
```

## i2cget命令

```shell
i2cget -y -f 4 0x2c 0x02	# 获取i2c-4 地址0x02c设备的寄存器0x02的数据
```

## i2cset命令

```shell
i2cset -y -f 4 0x2c 0x02 0x05 # 设置i2c-4 地址0x2c设备的寄存器0x02的值为0x05
```

参考文章：
[Android 平台下使用 i2c-tools](https://my.oschina.net/luoly/blog/368881)