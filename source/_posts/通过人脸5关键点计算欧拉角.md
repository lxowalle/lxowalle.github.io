---
title: 通过人脸5关键点计算欧拉角
date: 2021-10-26 20:02:59
---
# 通过人脸5关键点计算欧拉角

注：
pitch 俯仰角 绕x轴旋转
yaw 偏航角 绕y轴旋转
roll 摆动角 绕z轴旋转

```c
static float get_roll(int l_eye_x, int l_eye_y, int r_eye_x, int r_eye_y) {
    float a = r_eye_x - l_eye_x;
    float b = r_eye_y - l_eye_y;

    if (fabs(a) < 0.0000001f)   return 0.f;
    else {
        float res = atanf(1 - a / b) * 180.0f / 3.1415926;
        return res >= 0 ? res - 90 : res + 90;        
    }
}

static float get_yaw(int nose_x, int face_x, int face_w) {
    float a = nose_x - face_x;
    float b = a / (face_w >> 1) - 1;
    return asinf(b) * 180 / 3.1415926;
}

static float get_pitch(int nose_y, int face_y, int face_h)
{
	float a = nose_y - face_y;
	float b = a / (face_h * 0.6f) - 1;
	return asinf(b) * 180 / 3.1415926;
}
```