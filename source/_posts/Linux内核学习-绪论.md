---
title: Linux内核学习-绪论
date: 2021-10-26 22:02:26
tag: Linux
categories: Linux内核学习
---

# Linux内核学习-绪论

​	虽然只是绪论，但是涉及到内容可太多了，本想着只是流水账的概述，但是就算是流水账也是很硬核，差点看不下去。

## 一、Linux版本

​	在Linux 2.5之前（包括2.5），Linux的版本号命名规则和现在的版本不同，当时是用3个数字表示版本，其中前两个数字表示版本号，最后一个数字表示发布号。版本号的第二个数字如果是奇数则表示发布版，如果是偶数则表示稳定版。而现在Linux的版本号用4个数字表示，前2个数字表示版本号，第3个数字表示发布号，第4个数字表示补丁号。

## 二、 操作系统基本概念

​	关于操作系统，就是一系列基本程序的集合，这个集合中最重要的部分叫内核，包含了系统运行的核心过程。

​	操作系统的目的被归纳为两点：

- 与硬件交互，对硬件平台的可编程部件提供服务。
- 为运行在计算机系统上的用户程序提供执行环境。

### 2.1 多用户系统

​	多用户系统是指能并发的、独立的执行分别属于两个或多个用户的若干个应用程序的计算机系统。这里包括了多个用户同时执行同一个可执行程序，通过共享内存来共用该可执行程序的操作接口。每个用户都拥有私有的操作空间，又会在执行程序时不断地竞争各种资源（CPU、内存和硬盘等）

### 2.2 用户和组

​	对于多用户系统，用户拥有唯一标识UID来标识用户，若干个用户可以归类为一组，并用一个唯一标识GID来标识这个组。

### 2.3 进程

​	进程是一个程序执行的实例，它拥有独立的运行环境，不同的进程都分配了相同内存地址区间（虚拟地址），它们都通过虚拟地址来访问内存，但是如果不同的进程访问相同地址的虚拟地址，实际上会被映射到不同的物理地址上，对于进程自认为是系统中的唯一进程。

### 2.4 内核体系结构

​	Linux提供模块来实现模块化编程的目的，模块是一个目标文件，其代码可以在运行时链接到内核，或者被内核解除链接。

​	使用模块的优点：

1. 任何模块都可以随时链接和解除链接，为了实现这一点系统程序员必须提供明确的软件接口来访问模块处理的数据，这让开发模块更加方便。
2. 模块不依赖硬件平台，例如不依赖于arm架构，x86架构。
3. 可以在被需要时链接到内核，不需要时解除链接，因此能节省很多内存。
4. 模块的目标代码被链接后，等同于静态链接内核的目标代码，因此无性能损失。

## 三、文件系统概述

​	文件系统是一大核心。

### 3.1 文件

​	文件在内核里被高度抽象了，但在用户来看，可以认为是一个树结构组成的命名空间。树结构中的所有叶子称为文件，所有非叶子节点被称为目录。

​	每个进程都拥有一个当前工作目录，一般用"."表示当前工作目录，用".."表示父目录

### 3.2 硬链接和软链接

​	文件的硬链接可以认为是等价于自身的分身。软链接则是不等价于自身的分身。硬链接的分身就是本体，软链接的分身只能索引到本体，但是无法代替本体。

### 3.3 文件类型

​	常用文件类型（ 最常用的是前3个）：

- 普通文件
- 目录
- 符号链接
- 块设备文件
- 字符设备文件
- 管道和命名管道
- 套接字

### 3.4 文件描述符和索引节点

​	除了设备文件和特殊文件系统外，其余文件都由字符序列组成，文件内容不包括任何控制信息，例如文件长度和文件结束符。文件系统处理文件的信息都包含在索引节点inode数据结构中，文件系统通过inode来标识文件。

​	受到POSIX标准的规定，文件系统必须指定以下的属性：

- 文件类型
- 文件硬链接数量
- 文件长度（byte）
- 设备标识符
- 文件系统中标识文件的索引节点号
- 文件拥有者UID
- 文件所属组的GID
- 几个时间戳（索引节点状态改变的时间，最后访问时间和最后修改时间）
- 访问权限和文件模式

### 3.5 文件访问权限和文件模式

文件有3类用户可以指定权限和模式：文件拥有者、同组的用户、其他用户

文件有3种访问权限：读、写、执行

文件有3种模式：suid、sgid、sticky

suid：当设置了suid标志位时，进程在执行该文件时会获得该文件的拥有者uid

sgid：当设置了sgid标志位时，进程在执行该文件时会获得该文件的所属组gid

sticky：当设置了 stcky标志位时，执行该文件后该文件仍然会保留在内存。

### 3.6 文件操作的调用

​	Linux内核提供通过操作文件的方式来访问底层硬件，例如open、read、close

## 四、内核概述
