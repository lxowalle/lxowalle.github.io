<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="啊？">
<meta name="description" content="温故而知新">
<meta name="theme-color" content="#212529">
<title>常见的二维码登录过程 | lxowalle</title>
<link rel="shortcut icon" href="/favicon.ico?v=1698732295181">
<link rel="stylesheet" href="/media/css/gemini.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/vs2015.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/media/js/jquery.js"></script>
<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>






  <meta name="description" content="常见的二维码登录过程" />
  <meta name="keywords" content="日常" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>lxowalle</span>
            </a>  
          
        </div>
        
          <p class="subtitle">啊？干嘛</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-globe"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives" target="_self">
                  <i class="fa fa-globe"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags" target="_self">
                  <i class="fa fa-globe"></i> 标签
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友情链接
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">搜索</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout gemini ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">文章目录</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">站点概览</span>
          </div>
        </div>
      
      <div class="sidebar-body gemini" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">lxowalle</p>
    
    <div class="site-description right-motion">
      
      
      
        <p>你别着急啊</p>
      
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">47</span>
        <span class="site-item-stat-name language" data-lan="article">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">4</span>
        <span class="site-item-stat-name language" data-lan="tag">标签</span>
      </a>
    </div>
  </div>
  
    
  
  



</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%99%BB%E5%BD%95%E8%BF%87%E7%A8%8B">一、二维码登录过程</a>
<ul>
<li><a href="#11-%E5%89%8D%E6%9C%9F%E8%AE%A4%E8%AF%81">1.1 前期认证</a></li>
<li><a href="#12-%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%E8%BF%87%E7%A8%8B">1.2 二维码扫码登录过程</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // 保存li元素
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // 处理不是从#一级标题开始目录
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    jQuery.Velocity(hideElement, 'stop');
    jQuery.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        jQuery.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://lxowalle.github.io/chang-jian-de-er-wei-ma-deng-lu-guo-cheng/"> 常见的二维码登录过程 </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">发布于</span>
      <span class="publish-time" data-t="2023-10-07 17:34:11">2023-10-07</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show language" data-lan="category-in">标签:</span>
       
      <a href="https://lxowalle.github.io/k-D6nteW9/">
        <span>日常</span>
      </a>
       
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span
        >2<span class="language" data-lan="minute"
          >分钟</span
        ></span
      >
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span
        >556<span class="pc-show language" data-lan="words"
          >字数</span
        ></span
      >
    </span>
    
  </div>
</section>

            <div class="post-body next-md-body" id="post_body">
              <p>日常使用的二维码生成工具</p>
<p><a href="https://cli.im/">草料二维码生成器</a></p>
<h2 id="一-二维码登录过程">一、二维码登录过程</h2>
<h3 id="11-前期认证">1.1 前期认证</h3>
<p>也许平日里没注意到，如果想要通过二维码扫码通过某个软件的认证，前提必须本地客户端先通过认证，例如通过账号密码来认证。下面是一个基于token的认证过程:</p>
<figure data-type="image" tabindex="1"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcxLnN5Y2RuLmltb29jLmNvbS81ZTgzMGNlMzAwMDFkNTk1MDY0MzA0NjcucG5n?x-oss-process=image/format,png" alt="基于token的认证过程" loading="lazy"></figure>
<p><strong>解释：</strong></p>
<ol>
<li>认证由手机端开始，手机首先发送账号、密码和设备信息</li>
<li>服务端接收并验证用户名和密码后，会将账户与设备绑定并生成token，这个token会类似键值对的方式与账号和设备关联。</li>
<li>服务器返回上面生成的token和设备信息。</li>
<li>手机端收到token后就可以通过token和设备信息访问服务器的接口了，这个token将会在二维码扫码登录时使用到。</li>
</ol>
<blockquote>
<p>注意上面的设备信息其中一个作用是为了防止数据包在传输过程被劫持。</p>
</blockquote>
<h3 id="12-二维码扫码登录过程">1.2 二维码扫码登录过程</h3>
<p>下面描述了二维码扫码登录的过程：</p>
<blockquote>
<p>注意下面过程中手机端和服务端通信使用的token就是上面手机端认证时的token。</p>
</blockquote>
<figure data-type="image" tabindex="2"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcxLnN5Y2RuLmltb29jLmNvbS81ZTgyZmFmMDAwMDE2NWI1MDk1NjA5MzYucG5n?x-oss-process=image/format,png" alt="二维码扫码登录过程" loading="lazy"></figure>
<p><strong>解释：</strong><br>
二维码扫码登录由3个部分组成，1.已经认证通过的手机端。2.需要认证的PC端。3.负责认证的服务端。</p>
<p>手机端：</p>
<ol>
<li>扫描在PC端生成的二维码后，向服务器发送自身的token来证明自己有权限让二维码的PC端通过</li>
<li>向服务器发送自身是否允许该PC端通过。</li>
</ol>
<p>PC端</p>
<ol>
<li>获取服务器给的二维码ID，然后向手机端展示该ID生成的二维码</li>
<li>不断地轮询这个二维码是否也被确认，直到超时。</li>
<li>获取服务端下发的token，并通过这个token与服务器通信</li>
</ol>
<p>服务端</p>
<ol>
<li>为PC端生成二维码</li>
<li>生成临时token来等待手机端的确认信息</li>
<li>更改二维码为确认状态，生成PC端的token并发送给PC端</li>
</ol>
<p>参考文章：<br>
<a href="https://www.cnblogs.com/jamaler/p/12610349.html">聊一聊二维码扫描登录原理</a></p>

            </div>
            
            
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong class="language" data-lan="author">本文作者：</strong>
      lxowalle
    </li>
    <li class="post-copyright-link">
      <strong class="language" data-lan="link">本文链接：</strong>
      <a href="https://lxowalle.github.io/chang-jian-de-er-wei-ma-deng-lu-guo-cheng/" title="常见的二维码登录过程">https://lxowalle.github.io/chang-jian-de-er-wei-ma-deng-lu-guo-cheng/</a>
    </li>
    <li class="post-copyright-license">
      <strong class="language" data-lan="copyright">版权声明： </strong>
      本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://lxowalle.github.io/k-D6nteW9/"># 日常</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="创建hexo博客" href="https://lxowalle.github.io/chuang-jian-hexo-bo-ke/">创建hexo博客</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="创建hexo博客" href="https://lxowalle.github.io/chuang-jian-hexo-bo-ke/">上一篇</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="全志v853s常规-添加自定义驱动" href="https://lxowalle.github.io/quan-zhi-v853s-chang-gui-tian-jia-zi-ding-yi-qu-dong/">全志v853s常规-添加自定义驱动</a>
        <a class="nav-mobile-next" title="全志v853s常规-添加自定义驱动" href="https://lxowalle.github.io/quan-zhi-v853s-chang-gui-tian-jia-zi-ding-yi-qu-dong/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
            
  

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <center id="runTimeBox">
      已运行:<span id="run_time"></span>
    </center>
    <span id="busuanzi_container_site_pv">浏览数:<span id="busuanzi_value_site_pv"></span> 次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">访客数:<span id="busuanzi_value_site_uv"></span> 人</span>

    <script>
      BirthDay = new Date('');
      if (BirthDay.getTime()) {
        function runTime() {
          str = "";
          today = new Date();
          timeold = today.getTime() - BirthDay.getTime();
          msPerDay = 24 * 60 * 60 * 1000;
          e_daysold = timeold / msPerDay;
          daysold = Math.floor(e_daysold);
          str += daysold + "天";
          return str;
        }
        setInterval(function () {
          $("#run_time").html(runTime());
        }, 1000);
      } else {
        document.querySelector('.footer').removeChild(document.querySelector('#runTimeBox'));
      }
    </script>
    <div class="poweredby">
      Powered by lxowalle
    </div>
  </footer>
  
    
        <div class="gemini back-to-top" id="back_to_top">
          <i class="fa fa-arrow-up"></i>
          
            <span class="scrollpercent"> <span id="back_to_top_text">0</span>% </span>
            
        </div>
        
                  
                        
</div>
<script>
  let sideBarOpen = "sidebar-open";
  let body = document.body;
  let back2Top = document.querySelector("#back_to_top"),
    back2TopText = document.querySelector("#back_to_top_text"),
    drawerBox = document.querySelector("#drawer_box"),
    rightSideBar = document.querySelector(".sidebar"),
    viewport = document.querySelector("body");

  function scrollAnimation(currentY, targetY) {
    let needScrollTop = targetY - currentY;
    let _currentY = currentY;
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10);
      _currentY += dist;
      window.scrollTo(_currentY, currentY);
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY);
      } else {
        window.scrollTo(_currentY, targetY);
      }
    }, 1);
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener("scroll", function (e) {
    let percent =
      (document.scrollingElement.scrollTop /
        (document.scrollingElement.scrollHeight -
          document.scrollingElement.clientHeight)) *
      100;
    if (percent > 1 && !back2Top.classList.contains("back-top-active")) {
      back2Top.classList.add("back-top-active");
    }
    if (percent == 0) {
      back2Top.classList.remove("back-top-active");
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  let hasCacu = false;
  window.addEventListener("resize", function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // 动态调整站点概览高度
    if (
      (!hasCacu && back2Top.classList.contains("pisces")) ||
      back2Top.classList.contains("gemini")
    ) {
      let sideBar = document.querySelector(".sidebar");
      let navUl = document.querySelector("#site_nav");
      sideBar.style =
        "margin-top:" + (navUl.offsetHeight + navUl.offsetTop + 15) + "px;";
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false,
    MOTION_TIME = 300,
    RIGHT_MOVE_DIS = "320px";

  if (drawerBox) {
    let rightMotions = document.querySelectorAll(".right-motion");
    let right = drawerBox.classList.contains("right");

    let transitionDir = right
      ? "transition.slideRightIn"
      : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingRight: "0px",
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingLeft: "0px",
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, "stop");
      jQuery.Velocity(viewport, "stop");
      jQuery.Velocity(rightMotions, "stop");
      if (open) {
        jQuery.Velocity(
          rightSideBar,
          {
            width: RIGHT_MOVE_DIS,
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, transitionDir, {});
            },
          }
        );
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME,
        });
      } else {
        jQuery.Velocity(
          rightSideBar,
          {
            width: "0px",
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, {
                opacity: 0,
              });
            },
          }
        );
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME,
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle("muse-line");
      }
      drawerBox.classList.toggle(sideBarOpen);
    };
  }

  // 链接跳转
  let newWindow = "false";
  if (newWindow === "true") {
    let links = document.querySelectorAll(".post-body a");
    links.forEach((item) => {
      if (!item.classList.contains("btn")) {
        item.setAttribute("target", "_blank");
      }
    });
  }

  let faSearch = document.querySelector("#fa_search");
  faSearch &&
    faSearch.addEventListener("click", function () {
      document.querySelector("#search_mask").style = "";
    });

  // 代码高亮
  hljs.initHighlightingOnLoad();

  // 离开当前页title变化
  var leaveTitle = "";
  var normal_title = document.title;
  if (leaveTitle) {
    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState == "hidden") {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }
</script>

<link rel="stylesheet" href="/media/css/jquery.fancybox.css" />
<script src="/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll(".section img");
  images.forEach((image) => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement("a");
    aelem.href = image.src;
    aelem.dataset["fancybox"] = "images";
    aelem.dataset["rel"] = "fancybox-button";
    aelem.classList.add("fancybox");
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  });
</script>
    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>感谢您的支持，我会继续努力的!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">扫码打赏，你说多少就多少</p>
      <p class="reward-tip"> </p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        jQuery.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        jQuery.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        jQuery.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        jQuery.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      jQuery.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      jQuery.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

  <div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="搜索">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">条相关条目，使用了</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">毫秒</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/8QXF7qTHf/"" data-c="
          &lt;h2 id=&#34;一-文档目的&#34;&gt;一、文档目的&lt;/h2&gt;
&lt;p&gt;本文档用来介绍使用v4l2相关api来控制video设备的方法。&lt;/p&gt;
&lt;h2 id=&#34;二-简介&#34;&gt;二、简介&lt;/h2&gt;
&lt;p&gt;Video4Linux2（V4L2）是一个用于Linux系统的框架，用于处理视频设备和视频流的捕获、处理和显示。它允许开发者访问和控制摄像头、摄像头捕获设备、视频采集卡和其他视频设备。&lt;/p&gt;
&lt;h2 id=&#34;三-捕获摄像头图像示例&#34;&gt;三、捕获摄像头图像示例&lt;/h2&gt;
&lt;p&gt;下面记录了一次使用v4l2捕获摄像头图像的demo，由于包含了获取和检图像参数的代码，可以根据实际情况删减。&lt;/p&gt;
&lt;h3 id=&#34;31-初始准备&#34;&gt;3.1 初始准备&lt;/h3&gt;
&lt;p&gt;先准备头文件、宏定义和相关结构体。&lt;br&gt;
宏&lt;code&gt;FMT_MAX_NUM&lt;/code&gt;配置图像格式的最大数量，宏&lt;code&gt;WIN_MAX_NUM&lt;/code&gt;配置每个图像格式下支持的最大分辨率&lt;br&gt;
结构体&lt;code&gt;camera_handle&lt;/code&gt;是我们应用层自己定义的，用来同步和保存摄像头的参数，缓存信息参数；&lt;br&gt;
参数&lt;code&gt;support_fmt&lt;/code&gt;用来保存遍历video存在的所有图像格式，&lt;code&gt;sensor_fmt&lt;/code&gt;用来保存遍历sensor存在的所有图像格式，同时是摄像头实际支持的图像格式。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;stdio.h&amp;quot;
#include &amp;quot;stdlib.h&amp;quot;
#include &amp;quot;string.h&amp;quot;
#include &amp;quot;assert.h&amp;quot;
#include &amp;quot;getopt.h&amp;quot;
#include &amp;quot;fcntl.h&amp;quot;
#include &amp;quot;unistd.h&amp;quot;
#include &amp;quot;errno.h&amp;quot;
#include &amp;quot;malloc.h&amp;quot;
#include &amp;quot;sys/stat.h&amp;quot;
#include &amp;quot;sys/types.h&amp;quot;
#include &amp;quot;sys/time.h&amp;quot;
#include &amp;quot;sys/mman.h&amp;quot;
#include &amp;quot;sys/ioctl.h&amp;quot;

#include &amp;quot;asm/types.h&amp;quot;
#include &amp;quot;linux/videodev2.h&amp;quot;

#define FMT_MAX_NUM 			64
#define WIN_MAX_NUM 			20
#define ALIGN_16B(x) 			(((x) + (15)) &amp;amp; ~(15))
#define SET_V4L2_BUF_TYPE(x) 	((x) == V4L2_CAP_VIDEO_CAPTURE_MPLANE ? V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE : V4L2_BUF_TYPE_VIDEO_CAPTURE)

struct buffer {
	void *start[3];
	size_t length[3];
	int fd[3];
};

typedef struct camera_hal {
	int camera_index;
	int videofd;
	int driver_type;
	struct buffer *buffers;
	int buf_count;
	int nplanes;
	unsigned int win_width;
	unsigned int win_height;
	unsigned int fps;
	unsigned int pixelformat;
	int photo_num;
	enum v4l2_memory memory;
} camera_handle;

typedef struct {
    char description[32];
    int pixelformat;
	struct {
		unsigned int width;
		unsigned int height;
	} size[WIN_MAX_NUM];
} support_format_t;

static support_format_t support_fmt[FMT_MAX_NUM];
static support_format_t sensor_fmt[FMT_MAX_NUM];
static int support_fmt_cnt = 0, sensor_fmt_cnt = 0;

static char *get_format_name(unsigned int format)
{
	if (format == V4L2_PIX_FMT_YUV422P)
		return &amp;quot;YUV422P&amp;quot;;
	else if (format == V4L2_PIX_FMT_YUV420)
		return &amp;quot;YUV420&amp;quot;;
	else if (format == V4L2_PIX_FMT_YVU420)
		return &amp;quot;YVU420&amp;quot;;
	else if (format == V4L2_PIX_FMT_NV16)
		return &amp;quot;NV16&amp;quot;;
	else if (format == V4L2_PIX_FMT_NV12)
		return &amp;quot;NV12&amp;quot;;
	else if (format == V4L2_PIX_FMT_NV61)
		return &amp;quot;NV61&amp;quot;;
	else if (format == V4L2_PIX_FMT_NV21)
		return &amp;quot;NV21&amp;quot;;
	else if (format == V4L2_PIX_FMT_HM12)
		return &amp;quot;MB YUV420&amp;quot;;
	else if (format == V4L2_PIX_FMT_YUYV)
		return &amp;quot;YUYV&amp;quot;;
	else if (format == V4L2_PIX_FMT_YVYU)
		return &amp;quot;YVYU&amp;quot;;
	else if (format == V4L2_PIX_FMT_UYVY)
		return &amp;quot;UYVY&amp;quot;;
	else if (format == V4L2_PIX_FMT_VYUY)
		return &amp;quot;VYUY&amp;quot;;
	else if (format == V4L2_PIX_FMT_MJPEG)
		return &amp;quot;jpg&amp;quot;;
	else if (format == V4L2_PIX_FMT_H264)
		return &amp;quot;H264&amp;quot;;
	else if (format == V4L2_PIX_FMT_SBGGR8)
		return &amp;quot;BGGR8&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGBRG8)
		return &amp;quot;GBRG8&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGRBG8)
		return &amp;quot;GRBG8&amp;quot;;
	else if (format == V4L2_PIX_FMT_SRGGB8)
		return &amp;quot;RGGB8&amp;quot;;
	else if (format == V4L2_PIX_FMT_SBGGR10)
		return &amp;quot;BGGR10&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGBRG10)
		return &amp;quot;GBRG10&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGRBG10)
		return &amp;quot;GRBG10&amp;quot;;
	else if (format == V4L2_PIX_FMT_SRGGB10)
		return &amp;quot;RGGB10&amp;quot;;
	else if (format == V4L2_PIX_FMT_SBGGR12)
		return &amp;quot;BGGR12&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGBRG12)
		return &amp;quot;GBRG12&amp;quot;;
	else if (format == V4L2_PIX_FMT_SGRBG12)
		return &amp;quot;GRBG12&amp;quot;;
	else if (format == V4L2_PIX_FMT_SRGGB12)
		return &amp;quot;RGGB12&amp;quot;;
	else
		return NULL;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-初始化自定义的参数&#34;&gt;3.2 初始化自定义的参数&lt;/h3&gt;
&lt;p&gt;初始化用户定义的摄像头参数&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int camera_param_init(camera_handle *camera)
{
	memset(camera, 0, sizeof(camera_handle));
	camera-&amp;gt;camera_index = 0;
	camera-&amp;gt;win_width = 640;
	camera-&amp;gt;win_height = 480;
	camera-&amp;gt;fps = 30;
	camera-&amp;gt;photo_num = 3;
	camera-&amp;gt;pixelformat = V4L2_PIX_FMT_NV21;
	camera-&amp;gt;memory = V4L2_MEMORY_MMAP;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-查询video设备的能力&#34;&gt;3.3 查询video设备的能力&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_query_device_cap(camera_handle *camera, struct v4l2_capability *cap)
{
	memset(cap, 0, sizeof(cap));
	if (ioctl(camera-&amp;gt;videofd, VIDIOC_QUERYCAP, cap) &amp;lt; 0) {
		printf(&amp;quot; Query device capabilities fail!!!\n&amp;quot;);
	} else {
		printf(&amp;quot; Querey device capabilities succeed\n&amp;quot;);
		printf(&amp;quot; cap.driver=%s\n&amp;quot;, cap-&amp;gt;driver);
		printf(&amp;quot; cap.card=%s\n&amp;quot;, cap-&amp;gt;card);
		printf(&amp;quot; cap.bus_info=%s\n&amp;quot;, cap-&amp;gt;bus_info);
		printf(&amp;quot; cap.version=0x%08x\n&amp;quot;, cap-&amp;gt;version);
		printf(&amp;quot; cap.capabilities=0x%08x\n&amp;quot;, cap-&amp;gt;capabilities);
	}

	if ((cap-&amp;gt;capabilities &amp;amp; (V4L2_CAP_VIDEO_CAPTURE | V4L2_CAP_VIDEO_CAPTURE_MPLANE)) &amp;lt;= 0) {
		printf(&amp;quot; The device is not supports the Video Capture interface!!!\n&amp;quot;);
		close(camera-&amp;gt;videofd);
		return -1;
	}

	if (cap-&amp;gt;capabilities &amp;amp; V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
		camera-&amp;gt;driver_type = V4L2_CAP_VIDEO_CAPTURE_MPLANE;
        printf(&amp;quot; Support V4L2_CAP_VIDEO_CAPTURE_MPLANE\n&amp;quot;);
	} else if (cap-&amp;gt;capabilities &amp;amp; V4L2_CAP_VIDEO_CAPTURE) {
		camera-&amp;gt;driver_type = V4L2_CAP_VIDEO_CAPTURE;
        printf(&amp;quot; Support V4L2_CAP_VIDEO_CAPTURE\n&amp;quot;);
	} else {
		printf(&amp;quot; Find not capture device.\n&amp;quot;);
		close(camera-&amp;gt;videofd);
		return -1;
	}

	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;34-设置输入的设备号&#34;&gt;3.4 设置输入的设备号&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_select_curr_video_input(camera_handle *camera, struct v4l2_input *inp)
{
	memset(inp, 0, sizeof(inp));
	inp-&amp;gt;index = 0;
	inp-&amp;gt;type = V4L2_INPUT_TYPE_CAMERA;
	if (ioctl(camera-&amp;gt;videofd, VIDIOC_S_INPUT, inp) &amp;lt; 0) {
		printf(&amp;quot; VIDIOC_S_INPUT failed! s_input: %d\n&amp;quot;, inp-&amp;gt;index);
		close(camera-&amp;gt;videofd);
		return -1;
	}

	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;35-遍历video设备的图像格式&#34;&gt;3.5 遍历video设备的图像格式&lt;/h3&gt;
&lt;p&gt;将遍历的结果保存到全局变量&lt;code&gt;support_fmt&lt;/code&gt;中，以便后面查询&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_enum_video_format(camera_handle *camera, v4l2_fmtdesc *fmtdesc)
{
	printf(&amp;quot; enumerate image formats\n&amp;quot;);
	memset(support_fmt, 0, sizeof(support_fmt));
	fmtdesc-&amp;gt;index = 0;
	fmtdesc-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
	support_fmt_cnt = 0;
	while (ioctl(camera-&amp;gt;videofd, VIDIOC_ENUM_FMT, fmtdesc) == 0) {
		printf(&amp;quot; code %d, desc: %s\n&amp;quot;, fmtdesc-&amp;gt;pixelformat, fmtdesc-&amp;gt;description);
		memcpy(support_fmt[support_fmt_cnt].description, fmtdesc-&amp;gt;description, sizeof(support_fmt[support_fmt_cnt].description));
		support_fmt[support_fmt_cnt].pixelformat = fmtdesc-&amp;gt;pixelformat;
		fmtdesc-&amp;gt;index ++;
		support_fmt_cnt ++;
	}
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;36-测试video设备的图像格式&#34;&gt;3.6 测试video设备的图像格式&lt;/h3&gt;
&lt;p&gt;遍历并测试可以使用的图像格式，并将遍历结果保存到全局变量&lt;code&gt;sensor_fmt&lt;/code&gt;中，以便后面查询&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_try_all_format(camera_handle *camera, v4l2_format *fmt)
{
	fmt-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
	fmt-&amp;gt;fmt.pix_mp.width = camera-&amp;gt;win_width;
	fmt-&amp;gt;fmt.pix_mp.height = camera-&amp;gt;win_height;
	fmt-&amp;gt;fmt.pix_mp.field = V4L2_FIELD_NONE;
	sensor_fmt_cnt = 0;
	for (int i = 0; i &amp;lt; support_fmt[i].pixelformat != 0; i++) {
		if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
			fmt-&amp;gt;fmt.pix_mp.pixelformat = support_fmt[i].pixelformat;
		else
			fmt-&amp;gt;fmt.pix.pixelformat = support_fmt[i].pixelformat;
		
		if (ioctl(camera-&amp;gt;videofd, VIDIOC_TRY_FMT, fmt) == 0) {
			if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
				sensor_fmt[sensor_fmt_cnt].pixelformat = fmt-&amp;gt;fmt.pix_mp.pixelformat;
			else
				sensor_fmt[sensor_fmt_cnt].pixelformat = fmt-&amp;gt;fmt.pix.pixelformat;
			memcpy(sensor_fmt[sensor_fmt_cnt].description, support_fmt[i].description, sizeof(sensor_fmt[sensor_fmt_cnt].description));
			printf(&amp;quot; code %d, desc: %s(%s).\n&amp;quot;, sensor_fmt_cnt, sensor_fmt[sensor_fmt_cnt].description, 
											get_format_name(sensor_fmt[sensor_fmt_cnt].pixelformat));
			sensor_fmt_cnt ++;
		}
	}
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;37-遍历图像格式支持的分辨率以及帧率&#34;&gt;3.7 遍历图像格式支持的分辨率，以及帧率&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_enum_frame_size_and_fps(camera_handle *camera, struct v4l2_frmsizeenum *frmsize, struct v4l2_frmivalenum *ival)
{
	for (int i = 0; i &amp;lt; sensor_fmt[i].pixelformat != 0; i++) {
		memset(frmsize, 0, sizeof(frmsize));
		frmsize-&amp;gt;index = 0;
		frmsize-&amp;gt;pixel_format = sensor_fmt[i].pixelformat;
		// printf(&amp;quot; The %s supports the following resolutions:\n&amp;quot;, sensor_fmt[i].description);
		while (ioctl(camera-&amp;gt;videofd, VIDIOC_ENUM_FRAMESIZES, frmsize) == 0) {
			unsigned int width = 0, height = 0;				
			if (frmsize-&amp;gt;type == V4L2_FRMSIZE_TYPE_CONTINUOUS) {
				width = frmsize-&amp;gt;stepwise.max_width;
				height = frmsize-&amp;gt;stepwise.max_height;
			} else {
				width = frmsize-&amp;gt;discrete.width;
				height = frmsize-&amp;gt;discrete.height;
			}
			sensor_fmt[i].size[frmsize-&amp;gt;index].width = width;
			sensor_fmt[i].size[frmsize-&amp;gt;index].height = height;
			// printf(&amp;quot; Index %d : %u * %u\n&amp;quot;, frmsize-&amp;gt;index, width, height);

			memset(ival, 0, sizeof(struct v4l2_frmivalenum));
			ival-&amp;gt;index = 0;
			ival-&amp;gt;pixel_format = frmsize-&amp;gt;pixel_format;
			ival-&amp;gt;width = width;
			ival-&amp;gt;height = height;

			if (ioctl(camera-&amp;gt;videofd, VIDIOC_ENUM_FRAMEINTERVALS, ival) &amp;lt; 0)
				goto enum_frameintervals_failed;
			if (ival-&amp;gt;type == V4L2_FRMIVAL_TYPE_DISCRETE) {
				do {
					printf(&amp;quot;	adding discrete framerate:: %d/%d\n&amp;quot;,
						ival-&amp;gt;discrete.denominator, ival-&amp;gt;discrete.numerator);
					ival-&amp;gt;index++;
				} while (ioctl(camera-&amp;gt;videofd, VIDIOC_ENUM_FRAMEINTERVALS, ival) &amp;gt;= 0);
			} else if (ival-&amp;gt;type == V4L2_FRMIVAL_TYPE_CONTINUOUS) {
				printf(&amp;quot;	continuous frame interval %d/%d to %d/%d\n&amp;quot;,
					ival-&amp;gt;stepwise.max.denominator, ival-&amp;gt;stepwise.max.numerator,
					ival-&amp;gt;stepwise.min.denominator, ival-&amp;gt;stepwise.min.numerator);
			}

enum_frameintervals_failed:
			frmsize-&amp;gt;index++;
			if (frmsize-&amp;gt;index &amp;gt; WIN_MAX_NUM - 1) {
				printf(&amp;quot; Beyond the maximum queryable range, please modify WIN_MAX_NUM.\n&amp;quot;);
				break;
			}
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;38-设置图像格式&#34;&gt;3.8 设置图像格式&lt;/h3&gt;
&lt;p&gt;这个不是v4l2的操作，这里是根据上面得到的摄像头实际支持的图像格式来正确配置图像格式&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int camera_set_format(camera_handle *camera)
{
   printf(&amp;quot; Using format %s (%d).\n&amp;quot;, get_format_name(camera-&amp;gt;pixelformat), camera-&amp;gt;pixelformat);
   int sensor_pixelformat = 0;
   for (int i = 0; sensor_fmt[i].pixelformat != 0; i++)
   	if (camera-&amp;gt;pixelformat == sensor_fmt[i].pixelformat) {
   		sensor_pixelformat = sensor_fmt[i].pixelformat;
   		break;
   	}

   if (sensor_pixelformat == 0) {
   	printf(&amp;quot; sensor not support %s\n&amp;quot;, get_format_name(camera-&amp;gt;pixelformat));
   	printf(&amp;quot; Use support for the first format and resolution\n&amp;quot;);
   	camera-&amp;gt;pixelformat = sensor_fmt[0].pixelformat;
   	camera-&amp;gt;win_width = sensor_fmt[0].size[0].width;
   	camera-&amp;gt;win_height = sensor_fmt[0].size[0].height;
   } else {
   	int j, sizeindex;

   	for (j = 0; sensor_fmt[j].pixelformat != 0; j++)
   		if (camera-&amp;gt;pixelformat == sensor_fmt[j].pixelformat)
   			break;

   	for (sizeindex = 0; sensor_fmt[j].size[sizeindex].width != 0; sizeindex++)
   		if (camera-&amp;gt;win_width == sensor_fmt[j].size[sizeindex].width &amp;amp;&amp;amp; camera-&amp;gt;win_height == sensor_fmt[j].size[sizeindex].height)
   			break;

   	if (sensor_fmt[j].size[sizeindex].width == 0) {
   		printf(&amp;quot; sensor not support %u * %u\n&amp;quot;, camera-&amp;gt;win_width, camera-&amp;gt;win_height);
   		printf(&amp;quot; use support for the first resolution\n&amp;quot;);
   		if (sensor_fmt[j].size[0].width != 0 &amp;amp;&amp;amp; sensor_fmt[j].size[0].height != 0) {
   			camera-&amp;gt;win_width = sensor_fmt[j].size[0].width;
   			camera-&amp;gt;win_height = sensor_fmt[j].size[0].height;
   		} else {
   			/* mandatory settings */
   			camera-&amp;gt;win_width = 640;
   			camera-&amp;gt;win_height = 480;
   		}
   	}
   }
   printf(&amp;quot; Actual using format %s (%d) width:%d height:%d.\n&amp;quot;, get_format_name(camera-&amp;gt;pixelformat), camera-&amp;gt;pixelformat, camera-&amp;gt;win_width, camera-&amp;gt;win_height);
   return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;39-设置图像流参数&#34;&gt;3.9 设置图像流参数&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_set_stream_param(camera_handle *camera, struct v4l2_streamparm *parms)
{
   memset(parms, 0, sizeof(struct v4l2_streamparm));
   parms-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   parms-&amp;gt;parm.capture.timeperframe.numerator = 1;
   parms-&amp;gt;parm.capture.timeperframe.denominator = camera-&amp;gt;fps;
   if (ioctl(camera-&amp;gt;videofd, VIDIOC_S_PARM, parms) &amp;lt; 0) {
   	printf(&amp;quot; Setting streaming parameters failed, numerator:%d denominator:%d\n&amp;quot;,
   		   parms-&amp;gt;parm.capture.timeperframe.numerator,
   		   parms-&amp;gt;parm.capture.timeperframe.denominator);
   	close(camera-&amp;gt;videofd);
   	return -1;
   }

   memset(parms, 0, sizeof(struct v4l2_streamparm));
   parms-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   if (ioctl(camera-&amp;gt;videofd, VIDIOC_G_PARM, parms) &amp;lt; 0) {
   	printf(&amp;quot; Get streaming parameters failed!\n&amp;quot;);
   	return -1;
   } else {
   	printf(&amp;quot; Camera capture framerate is %u/%u\n&amp;quot;,
   		     parms-&amp;gt;parm.capture.timeperframe.denominator, \
   		     parms-&amp;gt;parm.capture.timeperframe.numerator);
   }
   return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;310-设置图像流的数据格式&#34;&gt;3.10 设置图像流的数据格式&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_set_data_format(camera_handle *camera, struct v4l2_format *fmt)
{
   memset(fmt, 0, sizeof(struct v4l2_format));
   if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   	fmt-&amp;gt;type = V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE;
   	fmt-&amp;gt;fmt.pix_mp.width = camera-&amp;gt;win_width;
   	fmt-&amp;gt;fmt.pix_mp.height = camera-&amp;gt;win_height;
   	fmt-&amp;gt;fmt.pix_mp.pixelformat = camera-&amp;gt;pixelformat;
   	fmt-&amp;gt;fmt.pix_mp.field = V4L2_FIELD_NONE;
   } else {
   	fmt-&amp;gt;type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
   	fmt-&amp;gt;fmt.pix.width = camera-&amp;gt;win_width;
   	fmt-&amp;gt;fmt.pix.height = camera-&amp;gt;win_height;
   	fmt-&amp;gt;fmt.pix.pixelformat = camera-&amp;gt;pixelformat;
   	fmt-&amp;gt;fmt.pix.field = V4L2_FIELD_NONE;
   }

   if (ioctl(camera-&amp;gt;videofd, VIDIOC_S_FMT, fmt) &amp;lt; 0) {
   	printf(&amp;quot; setting the data format failed!\n&amp;quot;);
   	close(camera-&amp;gt;videofd);
   	return -1;
   }

   if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   	if (camera-&amp;gt;win_width != fmt-&amp;gt;fmt.pix_mp.width || camera-&amp;gt;win_height != fmt-&amp;gt;fmt.pix_mp.height)
   		printf(&amp;quot; does not support %u * %u\n&amp;quot;, camera-&amp;gt;win_width, camera-&amp;gt;win_height);

   	camera-&amp;gt;win_width = fmt-&amp;gt;fmt.pix_mp.width;
   	camera-&amp;gt;win_height = fmt-&amp;gt;fmt.pix_mp.height;
   	printf(&amp;quot; VIDIOC_S_FMT succeed\n&amp;quot;);
   	printf(&amp;quot; fmt.type = %d\n&amp;quot;, fmt-&amp;gt;type);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix_mp.width = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix_mp.width);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix_mp.height = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix_mp.height);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix_mp.pixelformat = %s\n&amp;quot;, get_format_name(fmt-&amp;gt;fmt.pix_mp.pixelformat));
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix_mp.field = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix_mp.field);

   	if (ioctl(camera-&amp;gt;videofd, VIDIOC_G_FMT, fmt) &amp;lt; 0)
   		printf(&amp;quot; get the data format failed!\n&amp;quot;);

   	camera-&amp;gt;nplanes = fmt-&amp;gt;fmt.pix_mp.num_planes;
   } else {
   	if (camera-&amp;gt;win_width != fmt-&amp;gt;fmt.pix.width || camera-&amp;gt;win_height != fmt-&amp;gt;fmt.pix.height)
   		printf(&amp;quot; does not support %u * %u\n&amp;quot;, camera-&amp;gt;win_width, camera-&amp;gt;win_height);

   	camera-&amp;gt;win_width = fmt-&amp;gt;fmt.pix.width;
   	camera-&amp;gt;win_height = fmt-&amp;gt;fmt.pix.height;
   	printf(&amp;quot; VIDIOC_S_FMT succeed\n&amp;quot;);
   	printf(&amp;quot; fmt.type = %d\n&amp;quot;, fmt-&amp;gt;type);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix.width = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix.width);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix.height = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix.height);
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix.pixelformat = %s\n&amp;quot;, get_format_name(fmt-&amp;gt;fmt.pix.pixelformat));
   	printf(&amp;quot; fmt-&amp;gt;fmt.pix.field = %d\n&amp;quot;, fmt-&amp;gt;fmt.pix.field);
   }

   return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;311-初始化接收缓存区&#34;&gt;3.11 初始化接收缓存区&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_init_buffer(camera_handle *camera, struct v4l2_requestbuffers *req, struct v4l2_buffer *buf)
{
   memset(req, 0, sizeof(struct v4l2_requestbuffers));
   req-&amp;gt;count = 3;
   req-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   req-&amp;gt;memory = camera-&amp;gt;memory;
   if (ioctl(camera-&amp;gt;videofd, VIDIOC_REQBUFS, req) &amp;lt; 0) {
   	printf(&amp;quot; VIDIOC_REQBUFS failed\n&amp;quot;);
   	close(camera-&amp;gt;videofd);
   	return -1;
   }

   /* Query the status of a buffers */
   camera-&amp;gt;buf_count = req-&amp;gt;count;
   printf(&amp;quot; reqbuf number is %d\n&amp;quot;, camera-&amp;gt;buf_count);
   camera-&amp;gt;buffers = (struct buffer *)calloc(req-&amp;gt;count, sizeof(struct buffer));
   for (int n_buffers = 0; n_buffers &amp;lt; req-&amp;gt;count; ++n_buffers) {
   	memset(buf, 0, sizeof(struct v4l2_buffer));
   	buf-&amp;gt;type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   	buf-&amp;gt;memory = camera-&amp;gt;memory;
   	buf-&amp;gt;index = n_buffers;
   	if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   		buf-&amp;gt;length = camera-&amp;gt;nplanes;
   		buf-&amp;gt;m.planes = (struct v4l2_plane *)calloc(buf-&amp;gt;length, sizeof(struct v4l2_plane));
   	}

   	if (ioctl(camera-&amp;gt;videofd, VIDIOC_QUERYBUF, buf) == -1) {
   		printf(&amp;quot; VIDIOC_QUERYBUF error\n&amp;quot;);

   		if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
   			free(buf-&amp;gt;m.planes);
   		free(camera-&amp;gt;buffers);

   		close(camera-&amp;gt;videofd);

   		return -1;
   	}
   	switch(camera-&amp;gt;memory){
   	case V4L2_MEMORY_MMAP:
   		if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   			for (int i = 0; i &amp;lt; camera-&amp;gt;nplanes; i++) {
   				camera-&amp;gt;buffers[n_buffers].length[i] = buf-&amp;gt;m.planes[i].length;
   				camera-&amp;gt;buffers[n_buffers].start[i] = mmap(NULL , buf-&amp;gt;m.planes[i].length,
   							     PROT_READ | PROT_WRITE, \
   							     MAP_SHARED , camera-&amp;gt;videofd, \
   							     buf-&amp;gt;m.planes[i].m.mem_offset);

   				printf(&amp;quot; map buffer index: %d, mem: %p, len: %x, offset: %x\n&amp;quot;,
   					n_buffers, camera-&amp;gt;buffers[n_buffers].start[i], buf-&amp;gt;m.planes[i].length,
   						buf-&amp;gt;m.planes[i].m.mem_offset);
   			}
   			free(buf-&amp;gt;m.planes);
   		}else {
   				camera-&amp;gt;buffers[n_buffers].length[0] = buf-&amp;gt;length;
   				camera-&amp;gt;buffers[n_buffers].start[0] = mmap(NULL , buf-&amp;gt;length,
   						     PROT_READ | PROT_WRITE, \
   						     MAP_SHARED , camera-&amp;gt;videofd, \
   						     buf-&amp;gt;m.offset);
   				printf(&amp;quot; map buffer index: %d, mem: %p, len: %x, offset: %x\n&amp;quot;, \
   				n_buffers, camera-&amp;gt;buffers[n_buffers].start[0], buf-&amp;gt;length, buf-&amp;gt;m.offset);
   		}
   		break;
   	default:
   		break;
   	}
   }

   /* exchange a buffer with the driver */
   for (int n_buffers = 0; n_buffers &amp;lt; req-&amp;gt;count; n_buffers++) {
   	memset(buf, 0, sizeof(struct v4l2_buffer));
   	if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
   		buf-&amp;gt;type = V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE;
   	else
   		buf-&amp;gt;type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
   	buf-&amp;gt;memory = camera-&amp;gt;memory;
   	buf-&amp;gt;index = n_buffers;
   	if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   		buf-&amp;gt;length = camera-&amp;gt;nplanes;
   		buf-&amp;gt;m.planes = (struct v4l2_plane *)calloc(buf-&amp;gt;length, sizeof(struct v4l2_plane));
   	}
   	switch(camera-&amp;gt;memory){
   		case V4L2_MEMORY_MMAP:
   			break;
   	}
   	if (ioctl(camera-&amp;gt;videofd, VIDIOC_QBUF, buf) == -1) {
   		printf(&amp;quot; VIDIOC_QBUF error\n&amp;quot;);

   		if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
   			free(buf-&amp;gt;m.planes);
   		free(camera-&amp;gt;buffers);

   		close(camera-&amp;gt;videofd);
   		return -1;
   	}
   	if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
   		free(buf-&amp;gt;m.planes);
   }

   return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;312-捕获数据流&#34;&gt;3.12 捕获数据流&lt;/h3&gt;
&lt;p&gt;这个函数就是正式开始捕获数据流了，见注释&lt;code&gt;process camera raw data here&lt;/code&gt;处可以添加对摄像头图像的处理程序&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int v4l2_capture_video(camera_handle *camera)
{
   enum v4l2_buf_type type;
   fd_set fds;
   struct v4l2_buffer buf;
   int ret = 0;
   int np = 0;
   char source_data_path[64];
   char bmp_data_path[64];
   int i;
   int width, height;
   FILE *fp = NULL;

   /* streamon */
   type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   if (ioctl(camera-&amp;gt;videofd, VIDIOC_STREAMON, &amp;amp;type) == -1) {
   	printf(&amp;quot; VIDIOC_STREAMON error! %s\n&amp;quot;, strerror(errno));
   	ret = -1;
   	goto EXIT;
   } else
   	printf(&amp;quot; stream on succeed\n&amp;quot;);

   memset(&amp;amp;buf, 0, sizeof(struct v4l2_buffer));
   buf.type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   buf.memory = camera-&amp;gt;memory;
   if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE) {
   	buf.length = camera-&amp;gt;nplanes;
   	buf.m.planes = (struct v4l2_plane *)calloc(camera-&amp;gt;nplanes, sizeof(struct v4l2_plane));
   }
   for (int np = 0; np &amp;lt; camera-&amp;gt;photo_num; np ++) {
   	printf(&amp;quot; camera%d capture num is [%d]\n&amp;quot;, camera-&amp;gt;camera_index, np);
   	/* wait for sensor capture data */
   	struct timeval tv;
   	tv.tv_sec = 2;
   	tv.tv_usec = 0;

   	FD_ZERO(&amp;amp;fds);
   	FD_SET(camera-&amp;gt;videofd, &amp;amp;fds);
   	ret = select(camera-&amp;gt;videofd + 1, &amp;amp;fds, NULL, NULL, &amp;amp;tv);
   	if (ret == -1) {
   		printf(&amp;quot; select error\n&amp;quot;);
   		continue;
   	} else if (ret == 0) {
   		printf(&amp;quot; camera%d select timeout,end capture thread!\n&amp;quot;, camera-&amp;gt;camera_index);
   		ret = -1;
   		break;
   	}

   	/* dqbuf */
   	ret = ioctl(camera-&amp;gt;videofd, VIDIOC_DQBUF, &amp;amp;buf);
   	if (ret == 0)
   		printf(&amp;quot;*****DQBUF[%d] FINISH*****\n&amp;quot;, buf.index);
   	else
   		printf(&amp;quot;****DQBUF FAIL*****\n&amp;quot;);

   	/* check the data buf for byte alignment */
   	if (camera-&amp;gt;pixelformat == V4L2_PIX_FMT_YUV422P || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_YUYV
   	    || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_YVYU || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_UYVY
   	    || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_VYUY) {
   		if (camera-&amp;gt;win_width * camera-&amp;gt;win_height * 2 &amp;lt; buf.bytesused) {
   			width = ALIGN_16B(camera-&amp;gt;win_width);
   			height = ALIGN_16B(camera-&amp;gt;win_height);
   		} else {
   			width = camera-&amp;gt;win_width;
   			height = camera-&amp;gt;win_height;
   		}
   	} else if (camera-&amp;gt;pixelformat == V4L2_PIX_FMT_YUV420 || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_YVU420
   		   || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_NV16 || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_NV61
   		   || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_NV12 || camera-&amp;gt;pixelformat == V4L2_PIX_FMT_NV21) {
   		if (camera-&amp;gt;win_width * camera-&amp;gt;win_height * 1.5 &amp;lt; buf.bytesused) {
   			width = ALIGN_16B(camera-&amp;gt;win_width);
   			height = ALIGN_16B(camera-&amp;gt;win_height);
   		} else {
   			width = camera-&amp;gt;win_width;
   			height = camera-&amp;gt;win_height;
   		}
   	} else {
   		width = camera-&amp;gt;win_width;
   		height = camera-&amp;gt;win_height;
   	}

   	/* process camera raw data here */
   	printf(&amp;quot;camera buff:%p size:%d width:%d height:%d format:%d\r\n&amp;quot;, camera-&amp;gt;buffers[buf.index].start[0], camera-&amp;gt;buffers[buf.index].length[0], width, height, camera-&amp;gt;pixelformat);

   	/* qbuf */
   	if (ioctl(camera-&amp;gt;videofd, VIDIOC_QBUF, &amp;amp;buf) == 0)
   		printf(&amp;quot;************QBUF[%d] FINISH**************\n&amp;quot;, buf.index);
   	else
   		printf(&amp;quot;*****QBUF FAIL*****\n&amp;quot;);

   }

   printf(&amp;quot; Capture thread finish\n&amp;quot;);

   /* streamoff */
   type = SET_V4L2_BUF_TYPE(camera-&amp;gt;driver_type);
   if (ioctl(camera-&amp;gt;videofd, VIDIOC_STREAMOFF, &amp;amp;type) == -1)
   	printf(&amp;quot; VIDIOC_STREAMOFF error! %s\n&amp;quot;, strerror(errno));

EXIT:
   /* munmap camera-&amp;gt;buffers */
   switch (camera-&amp;gt;memory){
   case V4L2_MEMORY_MMAP:
   	if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE){
   		for (int i = 0; i &amp;lt; camera-&amp;gt;buf_count; ++i) {
   			for (int j = 0; j &amp;lt; camera-&amp;gt;nplanes; j++)
   				if (munmap(camera-&amp;gt;buffers[i].start[j], camera-&amp;gt;buffers[i].length[j])) {
   					printf(&amp;quot;munmap error&amp;quot;);
   					return -1;
   				}
   			}
   	}else{
   		for (int i = 0; i &amp;lt; camera-&amp;gt;buf_count; ++i) {
   			if (munmap(camera-&amp;gt;buffers[i].start[0], camera-&amp;gt;buffers[i].length[0])) {
   				printf(&amp;quot;munmap error&amp;quot;);
   				return -1;
   			}
   		}
   	}
   	break;
   default:break;
   }
   /* free camera-&amp;gt;buffers and close camera-&amp;gt;videofd */
   printf(&amp;quot; close /dev/video%d\n&amp;quot;, camera-&amp;gt;camera_index);

   if (camera-&amp;gt;driver_type == V4L2_CAP_VIDEO_CAPTURE_MPLANE)
   	free(buf.m.planes);
   free(camera-&amp;gt;buffers);
   close(camera-&amp;gt;videofd);

   return ret;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;313-调用的代码&#34;&gt;3.13 调用的代码&lt;/h3&gt;
&lt;p&gt;调用代码和上面的函数就是所有代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;int main(int argc, char *argv[])
{
   camera_handle camera;
   char camera_path[16];
   struct v4l2_capability cap = {0};      /* Query device capabilities */
   struct v4l2_fmtdesc fmtdesc = {0};     /* Enumerate image formats */
   struct v4l2_frmsizeenum frmsize = {0}; /* Enumerate frame sizes */
   struct v4l2_frmivalenum ival = {0};	/* Enumerate fps */
   struct v4l2_format fmt = {0};          /* try a format */
   struct v4l2_input inp = {0};           /* select the current video input */
   struct v4l2_streamparm parms = {0};    /* set streaming parameters */
   struct v4l2_requestbuffers req = {0};  /* Initiate Memory Mapping or User Pointer I/O */
   struct v4l2_buffer buf = {0};          /* Query the status of a buffer */

   /* 0. init camera param */
   camera_param_init(&amp;amp;camera);

   /* 1.open /dev/videoX node */
   memset(camera_path, 0, sizeof(camera_path));
   sprintf(camera_path, &amp;quot;%s%d&amp;quot;, &amp;quot;/dev/video&amp;quot;, camera.camera_index);
   camera.videofd = open(camera_path, O_RDWR, 0);
   if (camera.videofd &amp;lt; 0) {
   	printf(&amp;quot; open %s fail!!!\n&amp;quot;, camera_path);
   	return -1;
   }

   /* 2.query device capabilities */
   if (v4l2_query_device_cap(&amp;amp;camera, &amp;amp;cap) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 3.select the current video input */
   if (v4l2_select_curr_video_input(&amp;amp;camera, &amp;amp;inp) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 4.enumerate image formats*/
   if (v4l2_enum_video_format(&amp;amp;camera, &amp;amp;fmtdesc) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 5.try all format,here resolution is not important */
   if (v4l2_try_all_format(&amp;amp;camera, &amp;amp;fmt) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 6.enumerate frame sizes */
   if (v4l2_enum_frame_size_and_fps(&amp;amp;camera, &amp;amp;frmsize, &amp;amp;ival) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 7.set format */
   if (camera_set_format(&amp;amp;camera) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 8.set streaming parameters */
   if (v4l2_set_stream_param(&amp;amp;camera, &amp;amp;parms) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 9.set the data format */
   if (v4l2_set_data_format(&amp;amp;camera, &amp;amp;fmt) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 10.Initiate Memory Mapping or User Pointer I/O */
   if (v4l2_init_buffer(&amp;amp;camera, &amp;amp;req, &amp;amp;buf) &amp;lt; 0) {
   	close(camera.videofd);
   	return -1;
   }

   /* 11.Capture photo */
   if (v4l2_capture_video(&amp;amp;camera) &amp;lt; 0) {
   	printf(&amp;quot; capture_photo return error\n&amp;quot;);
   	return -1;
   }

   /* end */
   close(camera.videofd);
   return 0;
}
&lt;/code&gt;&lt;/pre&gt;
">Linux使用v4l2框架捕获摄像头</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/8kswvF7mS/"" data-c="
          &lt;p&gt;参考资料：&lt;br&gt;
&lt;a href=&#34;&#34;&gt;《Tina Linux Wi-Fi 开发指南》&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;&#34;&gt;《Tina Linux 网络性能 参考指南》&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;&#34;&gt;《V853&amp;amp;V853S Datasheet》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-文档目的&#34;&gt;一、文档目的&lt;/h2&gt;
&lt;p&gt;本文档用来介绍基于全志Tina Linux SDK开发WiFi的方法，用来记录、复盘、积累WiFi的开发和调试流程。&lt;br&gt;
本文档基于v853s的开发环境编写&lt;/p&gt;
&lt;h2 id=&#34;二-简述&#34;&gt;二、简述&lt;/h2&gt;
&lt;h3 id=&#34;21-wifi模式&#34;&gt;2.1 wifi模式&lt;/h3&gt;
&lt;p&gt;wifi在不同工作场景下有不同的工作模式。全志的WIFI支持3种模式：STA、AP、MONITOR。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;STA模式可以理解是连接热点的客户端，是最常用的模式；&lt;/li&gt;
&lt;li&gt;AP模式是无线接入点，也就是常说的热点；&lt;/li&gt;
&lt;li&gt;MONITOR模式是混杂监听模式，会监听所有的已连接或未连接的WIFI包&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;22-相关软件包&#34;&gt;2.2 相关软件包&lt;/h3&gt;
&lt;p&gt;wifi在不同模式下的工作依赖一系列软件包来方便用户使用和管理。包括有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;wifimanager-v2.0：包括了wifimanager-v1.0的功能（用于STA模式，用于wifi扫描和连接等），此外提供启动AP的softap功能和多种配网模式的smartlink功能。&lt;/li&gt;
&lt;li&gt;wpa_supplicant：这是常用的开源无线网络配置工具，主要支持WEP、WPA/WPA2和WAPI无线协议的加密认证。&lt;/li&gt;
&lt;li&gt;hostapd：用于AP和认证服务器的守护进程&lt;/li&gt;
&lt;li&gt;monitor：MONITOR模式下监听和处理的应用&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;23-简单命令&#34;&gt;2.3 简单命令&lt;/h3&gt;
&lt;p&gt;当启用了wifimanager2.0并正确启动wifi_deamon后，可以使用&lt;code&gt;wifi&lt;/code&gt;命令来控制wifi基本功能。下面只介绍一部分，更多通过&lt;code&gt;-h&lt;/code&gt;参数查阅&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;sta模式&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wifi -o sta             # 切换到sta模式
wifi -c &amp;lt;ssid&amp;gt; [passwd] # 连接指定热点
wifi -d                 # 断开连接
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ap模式&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wifi -o ap &amp;lt;ssid&amp;gt; &amp;lt;passwd&amp;gt;  # 切换到ap模式并配置热点ssid和password
wifi -l                     # 列出连接的sta
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;monitor模式&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wifi -o monitor     # 切换到monitor模式
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-编写驱动&#34;&gt;三、编写驱动&lt;/h2&gt;
&lt;h3 id=&#34;31-添加wifi模组厂提供的驱动&#34;&gt;3.1 添加wifi模组厂提供的驱动&lt;/h3&gt;
&lt;p&gt;模组厂一般会提供驱动文件，所以主要修改的是tina linux提供的上下电函数、扫描函数、wifi固件的下载途径，以及配置menuconfig等。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;int sunxi_wlan_get_bus_index(void);     // 获取sdio卡号
void sunxi_mmc_rescan_card(unsigned ids);   // 扫描卡
void sunxi_wlan_set_power(bool on);     // 上电/掉电
int sunxi_wlan_get_oob_irq(void);       // 获取中断号
int sunxi_wlan_get_oob_irq_flags(void); // 获取中断标志
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;先参考&lt;code&gt;《Tina Linux Wi-Fi 开发指南》&lt;/code&gt;，原手册写的与v853s有些不清楚，等实际编写驱动后再来补充..&lt;/p&gt;
&lt;h2 id=&#34;四-wifi配网&#34;&gt;四、wifi配网&lt;/h2&gt;
&lt;p&gt;全志提供的wifimanager-v2.0支持多种配网方式，包括有softap配网（通过WMG_PROTOCOL_SOFTAP打开）、ble配网（通过WMG_PROTOCOL_BLE打开）、xconfig配网（通过WMG_PROTOCOL_XCONFIG打开）、soundwave配网（通过WMG_PROTOCOL_SOUNDWAVE打开）。每种配网方式都需要通过menuconfig打开对应的宏才能使用。&lt;/p&gt;
&lt;h3 id=&#34;41-蓝牙配网&#34;&gt;4.1 蓝牙配网&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;确保启动wifimanager2.0并启动守护进程wifi_deamon后&lt;/li&gt;
&lt;li&gt;在命令行输入&lt;code&gt;wifi -p ble&lt;/code&gt;启动蓝牙配网模式&lt;/li&gt;
&lt;li&gt;在路径&lt;code&gt;package/allwinner/wireless/wifimanager2.0/app/&lt;/code&gt;下载配网app&lt;/li&gt;
&lt;li&gt;启动蓝牙配网app Blink并扫描蓝牙热点aw_bt_blink&lt;/li&gt;
&lt;li&gt;发送想要连接的ssid和passwd即可&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试未通过，官方提供的BLink版本过老，我手机用不起来&lt;/p&gt;
&lt;h3 id=&#34;42-softap配网&#34;&gt;4.2 SoftAP配网&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;确保启动wifimanager2.0并启动守护进程wifi_deamon后&lt;/li&gt;
&lt;li&gt;在命令行输入&lt;code&gt;wifi -p softap&lt;/code&gt;启动softap模式配网&lt;/li&gt;
&lt;li&gt;在路径&lt;code&gt;package/allwinner/wireless/wifimanager2.0/app/&lt;/code&gt;下载配网app&lt;/li&gt;
&lt;li&gt;手机启动ckySoftAPDemo并扫描wifi热点Aw-config-net-Test(密码aw123456)&lt;/li&gt;
&lt;li&gt;发送想要连接的ssid和passwd即可&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试未通过，无法连接Aw-config-net-Test&lt;/p&gt;
&lt;h3 id=&#34;43-xconfig配网&#34;&gt;4.3 XConfig配网&lt;/h3&gt;
&lt;p&gt;XConfig配网就是smartconfig配网，&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;确保启动wifimanager2.0并启动守护进程wifi_deamon后&lt;/li&gt;
&lt;li&gt;在命令行输入&lt;code&gt;wifi -p xconfig&lt;/code&gt;启动xconfig模式配网&lt;/li&gt;
&lt;li&gt;在路径&lt;code&gt;package/allwinner/wireless/wifimanager2.0/app/&lt;/code&gt;下载配网app&lt;/li&gt;
&lt;li&gt;手机启动XConfig并输入想要连接的热点ssid和密码&lt;/li&gt;
&lt;li&gt;点击start&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试未通过，v853s好像不支持？&lt;/p&gt;
&lt;h3 id=&#34;44-soundwave配网&#34;&gt;4.4 soundwave配网&lt;/h3&gt;
&lt;p&gt;测试未通过，v853s好像不支持？&lt;/p&gt;
&lt;h2 id=&#34;五-wifi性能测试&#34;&gt;五、wifi性能测试&lt;/h2&gt;
&lt;h3 id=&#34;51-编译测试工具&#34;&gt;5.1 编译测试工具&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;RF测试工具&lt;br&gt;
全志提供了各个模组的测试工具，通过&lt;code&gt;make menuconfig&lt;/code&gt;在&lt;code&gt;Utilites-&amp;gt;rf test tool&lt;/code&gt;下找到并勾选对应模组的测试工具。也可以直接搜索选项，例如对于&lt;code&gt;xr829&lt;/code&gt;可以直接搜索&lt;code&gt;xr829-rftest&lt;/code&gt;找到并勾选测试工具的选项。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;tina linux的iperf测试工具&lt;br&gt;
通过&lt;code&gt;make menuconfig&lt;/code&gt;直接搜索&lt;code&gt;iperf&lt;/code&gt;找到并勾选选项即可打开，有&lt;code&gt;iperf&lt;/code&gt;和&lt;code&gt;iperf3&lt;/code&gt;两个都可以勾选。&lt;br&gt;
如果配置成功，则在tina linux系统中能找到可执行的&lt;code&gt;iperf&lt;/code&gt;或&lt;code&gt;iperf3&lt;/code&gt;命令&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PC端的iperf测试工具&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt install iperf3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;61-tcp和udp吞吐测试&#34;&gt;6.1 TCP和UDP吞吐测试&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;测试TCP TX&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pc
iperf3 -s -i 1 -p 5006
# device
iperf3 -c &amp;lt;ip_for_pc&amp;gt; -i 1 -t 20 -p 5006
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;测试TCP RX&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pc
iperf3 -c &amp;lt;ip_for_pc&amp;gt; -i 1 -t 20 -p 5006
# device
iperf3 -s -i 1 -p 5006
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;测试UDP TX&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pc
iperf3 -s -i 1 -p 5006
# device
iperf3 -u -c &amp;lt;ip_for_pc&amp;gt; -b 50M -i 1 -t 20 -p 5006
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;测试UDP RX&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pc
iperf3 -u -c &amp;lt;ip_for_pc&amp;gt; -b 50M -i 1 -t 20 -p 5006
# device
iperf3 -s -i 1 -p 5006
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;六-rf测试&#34;&gt;六、RF测试&lt;/h2&gt;
&lt;p&gt;参考《Tina Linux Wi-Fi RF 测试 使用指南》&lt;/p&gt;
&lt;p&gt;根据文档，在使用ETF时报错:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[   93.797800] [ETF_ERR] xradio_etf_connect:xradio_core_init failed(-110).
[   93.806847] [ETF_ERR] xradio_adapter_send:netlink_unicast failed(-111), pid=1656!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以后再尝试&lt;/p&gt;
">全志v853s常规-调试wifi驱动</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/5xIOiDM1K/"" data-c="
          &lt;p&gt;参考资料：&lt;br&gt;
&lt;a href=&#34;&#34;&gt;《Tina Linux Camera 开发指南》&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;&#34;&gt;《V853&amp;amp;V853S Datasheet》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-文档目的&#34;&gt;一、文档目的&lt;/h2&gt;
&lt;p&gt;本文档用来介绍基于全志Tina Linux SDK开发Camera的方法，用来记录、复盘、积累Camera的开发和调试流程。&lt;br&gt;
本文档基于v853s的开发环境编写&lt;/p&gt;
&lt;h2 id=&#34;二-简述&#34;&gt;二、简述&lt;/h2&gt;
&lt;p&gt;全志提供VFE和VIN两种Camera框架，暂时只介绍VIN框架。&lt;/p&gt;
&lt;h3 id=&#34;21-vin框架&#34;&gt;2.1 VIN框架&lt;/h3&gt;
&lt;p&gt;VIN框架代码在目录&lt;code&gt;lichee/linux-4.9/drivers/media/platform/sunxi-vin&lt;/code&gt;下，包括有vin模块、device模块、af模块、flash模块，介绍一下各模块的功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;vin模块：注册/注销驱动、参数读取、适配v4l2的下层接口、适配驱动的上层接口、中断处理、buffer&lt;/li&gt;
&lt;li&gt;申请切换、ISP操作、video设备文件操作、mipi/csi协议控制等。见&lt;code&gt;vin*.c&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;device模块：驱动源码，见&lt;code&gt;modules/sensor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;af模块：自动对焦模块，见&lt;code&gt;modules/actuator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;flash模块：闪光灯控制模块，见&lt;code&gt;modules/flash&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;22-camera通路&#34;&gt;2.2 Camera通路&lt;/h3&gt;
&lt;p&gt;全志资料介绍有点没头没尾，以后再补充&lt;/p&gt;
&lt;h2 id=&#34;三-驱动模块实现&#34;&gt;三、驱动模块实现&lt;/h2&gt;
&lt;h3 id=&#34;31-确认硬件&#34;&gt;3.1 确认硬件&lt;/h3&gt;
&lt;h4 id=&#34;311-对于mipi-csi接口&#34;&gt;3.1.1 对于MIPI-CSI接口&lt;/h4&gt;
&lt;p&gt;参考下面的引脚，检查引脚有没有接错、接漏：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;两线MIPI-CSI（v853s支持两路）：MCLK、CSI_CK0N、CSI_CK0P、CSI_D0N、CSI_CK1P、CSI_D1N、POWER_EN（可选）、CSI_VS（可选）、CSI_HS（可选）&lt;/li&gt;
&lt;li&gt;四线MIPI-CSI（v853s支持一路）：MCLK、CSI_CK0N、CSI_CK0P、CSI_D0N、CSI_CK1P、CSI_D1N、CSI_CK2P、CSI_D2N、CSI_CK3P、CSI_D3N、POWER_EN（可选）、CSI_VS（可选）、CSI_HS（可选）&lt;/li&gt;
&lt;li&gt;I2C信号：SDA、SCL&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;32-修改设备树&#34;&gt;3.2 修改设备树&lt;/h3&gt;
&lt;p&gt;结合引脚定义和下面的注释来添加设备树，主要分两部分：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;配置iic，一般摄像头模组都需要一路IIC来控制&lt;/li&gt;
&lt;li&gt;配置sensor&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 配置iic，一般摄像头模组都需要一路IIC来控制
twi1_pins_a: twi1@0 {
    allwinner,pins = &amp;quot;PA14&amp;quot;, &amp;quot;PA15&amp;quot;;
    allwinner,pname = &amp;quot;twi1_scl&amp;quot;, &amp;quot;twi1_sda&amp;quot;;
    allwinner,function = &amp;quot;twi1&amp;quot;;
    allwinner,muxsel = &amp;lt;4&amp;gt;;         # 选择功能4，对应的就是IIC功能（参考数据手册GPIO功能复用部分）
    allwinner,drive = &amp;lt;0&amp;gt;;          # 驱动能力
    allwinner,pull = &amp;lt;1&amp;gt;;           # 上下拉
};

twi1_pins_b: twi1@1 {
    allwinner,pins = &amp;quot;PA14&amp;quot;, &amp;quot;PA15&amp;quot;;
    allwinner,function = &amp;quot;io_disabled&amp;quot;;
    allwinner,muxsel = &amp;lt;0xf&amp;gt;;
    allwinner,drive = &amp;lt;0&amp;gt;;
    allwinner,pull = &amp;lt;0&amp;gt;;
};

# 2. 配置sensor为mipi-csi模式，参考注释并修改配置项
vind0:vind@0 {
			vind0_clk = &amp;lt;336000000&amp;gt;;    # vin模块的时钟
			vind0_isp = &amp;lt;327000000&amp;gt;;    # isp模块的时钟
			status = &amp;quot;okay&amp;quot;;

			tdm0:tdm@0 {                        # ISP分时复用配置
				work_mode = &amp;lt;0&amp;gt;;            # 0,online mode;1,offline mode
			};

			isp00:isp@0 {
				work_mode = &amp;lt;0&amp;gt;;            # 同上
			};

			scaler00:scaler@0 {
				work_mode = &amp;lt;0&amp;gt;;            # 同上
			};

			sensor0:sensor@0 {
				device_type = &amp;quot;sensor0&amp;quot;;        # 设备类型，用来选择sensor的id
				sensor0_mname = &amp;quot;gc4663_mipi&amp;quot;;  # 用来加载对应sensor名称的驱动
				sensor0_twi_cci_id = &amp;lt;1&amp;gt;;       # sensor使用iic的id
				sensor0_twi_addr = &amp;lt;0x52&amp;gt;;      # 目标sensor的iic从机地址
				sensor0_mclk_id = &amp;lt;0&amp;gt;;          # sensor使用mclk的id
				sensor0_pos = &amp;quot;rear&amp;quot;;           # sensor的位置，front：前置；rear：后置
				sensor0_isp_used = &amp;lt;1&amp;gt;;         # 0，不使用isp；1，使用isp
				sensor0_fmt = &amp;lt;1&amp;gt;;              # 图像格式。0，yuv；1，bayer raw rgb
				sensor0_stby_mode = &amp;lt;0&amp;gt;;        # 待机时是否关闭电源。0，不关；1，关闭
				sensor0_vflip = &amp;lt;0&amp;gt;;                # 列翻转
				sensor0_hflip = &amp;lt;0&amp;gt;;                # 行翻转
				sensor0_iovdd-supply = &amp;lt;&amp;amp;reg_aldo2&amp;gt;;    # camera io电源
				sensor0_iovdd_vol = &amp;lt;1800000&amp;gt;;          # camera的io电压值
				sensor0_avdd-supply = &amp;lt;&amp;amp;reg_bldo2&amp;gt;;     # camera 模拟电源
				sensor0_avdd_vol = &amp;lt;2800000&amp;gt;;           # camera的模拟电压值
				sensor0_dvdd-supply = &amp;lt;&amp;amp;reg_dldo2&amp;gt;;     # camera core的电源
				sensor0_dvdd_vol = &amp;lt;1200000&amp;gt;;           # camera core的电压值
				sensor0_power_en = &amp;lt;&amp;gt;;                  # camera使能引脚
				sensor0_reset = &amp;lt;&amp;amp;pio PA 18 1 0 1 0&amp;gt;;   # camera复位引脚。含义：哪个bank(PA)；bank的哪个脚（18脚）；功能类型（1，输出）；上下拉（0，下拉）；驱动能力（1），初始电平（0，低电平）
				sensor0_pwdn = &amp;lt;&amp;amp;pio PA 19 1 0 1 0&amp;gt;;    # camera pwdn脚
				sensor0_sm_hs = &amp;lt;&amp;gt;;                     # hsync脚
				sensor0_sm_vs = &amp;lt;&amp;gt;;                     # vsync脚
				/* flash_handle = &amp;lt;&amp;amp;flash0&amp;gt;; */         # 启用闪光灯功能
				/* act_handle = &amp;lt;&amp;amp;actuator0&amp;gt;; */        # 启动自动对焦功能
				status	= &amp;quot;okay&amp;quot;;
			};
        
			vinc00:vinc@0 {
				vinc0_csi_sel = &amp;lt;0&amp;gt;;            # csi的id
				vinc0_mipi_sel = &amp;lt;0&amp;gt;;           # mipi的id
				vinc0_isp_sel = &amp;lt;0&amp;gt;;            # isp的id，为空时isp只做路由不做效果处理
				vinc0_isp_tx_ch = &amp;lt;0&amp;gt;;          # isp的ch。可选0~3
				vinc0_tdm_rx_sel = &amp;lt;0&amp;gt;;         # isp tdm 接收的ch
				vinc0_rear_sensor_sel = &amp;lt;0&amp;gt;;    # 选择后置sensor id
				vinc0_front_sensor_sel = &amp;lt;0&amp;gt;;   # 选择前置sensor id
				vinc0_sensor_list = &amp;lt;0&amp;gt;;        # 是否适配不同模组。0，否；1，是
				work_mode = &amp;lt;0x0&amp;gt;;              # 0，online mode;1,offline mode；只有vinc0/4/8/12可以配置
				status = &amp;quot;okay&amp;quot;;
			};
		};
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-添加sensor驱动文件&#34;&gt;3.2 添加sensor驱动文件&lt;/h3&gt;
&lt;p&gt;一般选择从相似的驱动作为基础来修改，这里假设要修改gc4663驱动(路径：&lt;code&gt;sunxi-vin/modules/sensor/gc4663_mipi.c&lt;/code&gt;)&lt;/p&gt;
&lt;h4 id=&#34;321-修改makefile和kconfig文件&#34;&gt;3.2.1 修改Makefile和Kconfig文件&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Kconfig&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/Kconfig
# 添加以下代码
config SENSOR_GC4663_MIPI
	tristate &amp;quot;use gc4663_mipi driver&amp;quot;
	default n
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Makefile&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/Makefile
# 添加以下代码
obj-$(CONFIG_SENSOR_GC4663_MIPI)			+= gc4663_mipi.o
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;使能编译&lt;br&gt;
通过make kernel_menuconfig选择编译配置，按下&#39;/&#39;搜索CONFIG_SENSOR_GC4663_MIPI找到配置项并使能&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;321-修改sensor驱动源码&#34;&gt;3.2.1 修改sensor驱动源码&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;确认sensor名称&lt;br&gt;
必须保证SENSOR_NAME的名称与sys_config.fex的csi0_dev0_mname或者board.dts的sensor0_mname保持一致&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
#define SENSOR_NAME &amp;quot;gc2053_mipi&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;确认iic地址&lt;br&gt;
必须保证I2C_ADDR与模组datasheet,sys_config.fex的csi0_dev0_twi_addr，board.dts的sensor0_twi_addr保持一致&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
#define I2C_ADDR 0x52
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;确认MCLK时钟&lt;br&gt;
查阅摄像头模组手册，关于MCLK或者input clock feequency的时钟范围。MCLK与寄存器配置强相关，如果模组厂提供了寄存器配置，可直接询问当前配置使用的MCLK是多少。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
#define MCLK              (24*1000*1000)
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;确认VSYNC,HSYNC,PCLK有效电平（一般并口协议需要，MIPI不需要）&lt;br&gt;
查阅摄像头模组手册，确认并配置VSYNC,HSYNC,PCLK有效电平。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
#define VREF_POL          V4L2_MBUS_VSYNC_ACTIVE_HIGH
#define HREF_POL          V4L2_MBUS_HSYNC_ACTIVE_HIGH
#define CLK_POL           V4L2_MBUS_PCLK_SAMPLE_FALLING
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;确认sensor id&lt;br&gt;
查阅摄像头模组手册，通过ID_REG_HIGH和ID_REG_LOW两个地址来查找chip id，一般用来检查sensor id与V4L2_IDENT_SENSOR是否匹配&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
#define V4L2_IDENT_SENSOR  0x4653   // sensor id
#define ID_REG_HIGH		0x03f0      // sensor id addr_h
#define ID_REG_LOW		0x03f1      // snedor id addr_l
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;确认摄像头寄存器配置&lt;br&gt;
一般向摄像头模组通过IIC接口发送一串的初始化命名来配置和启动摄像头，相应配置可以让模组厂提供。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static struct regval_list sensor_default_regs[] = {};   // 寄存器公共配置
static struct regval_list sensor_2560x1440p15_regs[] = {}; // 分辨率2560x1440 帧率15的配置
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;适配曝光/增益接口函数&lt;br&gt;
在调试摄像头画面时需要根据不同环境配置不同的曝光和增益，这个接口提供给上层应用修改曝光和增益。需要参考摄像头模组手册来找到曝光和增益对应的寄存器，以及寄存器设置范围。注意如果摄像头开启了AE功能，则下列函数可能会失效&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static int sensor_s_exp(struct v4l2_subdev *sd, unsigned int exp_val){} // 设置曝光
static int sensor_g_exp(struct v4l2_subdev *sd, __s32 *value){}         // 获取曝光
static int sensor_s_gain(struct v4l2_subdev *sd, int gain_val){}        // 设置增益
static int sensor_g_gain(struct v4l2_subdev *sd, __s32 *value){}        // 获取增益
static int sensor_s_exp_gain(struct v4l2_subdev *sd,struct sensor_exp_gain *exp_gain){} // 设置增益和曝光
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;适配电源开关接口函数&lt;br&gt;
上下电时序需要参考摄像头手册严格处理，包括有打开电源、关闭电源、进入待机、退出待机。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static int sensor_power(struct v4l2_subdev *sd, int on) {
	switch (on) {
	case STBY_ON:break;
	case STBY_OFF:break;
	case PWR_ON:break;
	case PWR_OFF:break;
	default:return -EINVAL;
	}
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;适配复位函数&lt;br&gt;
用来复位摄像头模组&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static int sensor_reset(struct v4l2_subdev *sd, u32 val){}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;适配检测函数&lt;br&gt;
通过iic访问ID_REG_HIGH和ID_VAL_LOW找到sensor id，再对比V4L2_IDENT_SENSOR的值来确认sensor是否正确&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static int sensor_detect(struct v4l2_subdev *sd){}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;适配应用层控制函数&lt;br&gt;
提供给应用层来控制sensor相关模块，例如设置/获取曝光参数等。详情参考相似驱动源码&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static long sensor_ioctl(struct v4l2_subdev *sd, unsigned int cmd, void *arg){}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;添加CSI接口配置&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
static struct sensor_format_struct sensor_formats[] = {
	{
		.desc      = &amp;quot;Raw RGB Bayer&amp;quot;,
         /*
         输出格式可选BGGR/GBRG/RGGB/GRBG，选错了则可能导致色彩偏色
         可选:
         MEDIA_BUS_FMT_SBGGR10_1X10       BGGR格式，10bit输出
         MEDIA_BUS_FMT_SGBRG12_1X12       GBRG格式，12bit输出
         */
		.mbus_code = MEDIA_BUS_FMT_SGRBG10_1X10,
		.regs      = sensor_fmt_raw,
		.regs_size = ARRAY_SIZE(sensor_fmt_raw),
		.bpp       = 1
	},
	{
		.desc      = &amp;quot;YUV 4:2:2&amp;quot;,
         /*
         输出格式可选yuyv/vyuy/uyvy/yvyu
         可选:
         MEDIA_BUS_FMT_YUYV8_2X8       YUYV格式，8bit输出
         MEDIA_BUS_FMT_YVYU8_2X8       YUYV格式，8bit输出
         */
		.mbus_code = MEDIA_BUS_FMT_YUYV8_2X8,
		.regs      = sensor_fmt_yuyv422_yuyv,
		.regs_size = ARRAY_SIZE(sensor_fmt_yuyv422_yuyv),
		.bpp       = 2
	}
};
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;12&#34;&gt;
&lt;li&gt;添加分辨率配置&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// lichee/linux-4.9/drivers/media/platform/sunxi-vin/modules/sensor/ov2685_mipi.c
根据实际应用需求，为每种分辨率和帧率组合配置为一个数组成员，注意不要混淆
static struct sensor_win_size sensor_win_sizes[] = {
	{
        /* 定义图像输出大小 */
		.width	    = 2560,
		.height     = 1440,

        /* 定义输入ISP的偏移量。用来截取图片，丢掉不需要的部分 */
		.hoffset    = 0,
		.voffset    = 0,

        /* 定义行同步长度（以pclk为单位），帧同步长度（以hts为单位） */
		.hts	    = 4800,
		.vts	    = 3000,
		.pclk	    = 216 * 1000 * 1000,

        /* 定义mipi数据速率，只有mipi sensor需要填写 */
		.mipi_bps   = 648 * 1000 * 1000,

        /* 定义帧率(fps = pclk / (hts * vts)) = 216000000 / (4800 * 3000) = 15 */
		.fps_fixed  = 15,

        /* 定义数据抽样方式。1，用原分辨率；2，每2x2个像素合成一个像素；3，每4x4个像素合成一个像素 */
		.bin_factor = 1,

        /* 定义曝光行数最大最小值，以16为1倍。曝光行数不能超过vts，否则可能出现降帧、图像异常的情况 */
		.intg_min   = 1 &amp;lt;&amp;lt; 4,
		.intg_max   = 3000 &amp;lt;&amp;lt; 4,

        /* 定义增益最大最小值，以16位1倍 */
		.gain_min   = 1 &amp;lt;&amp;lt; 4,
		.gain_max   = 110 &amp;lt;&amp;lt; 4,

        /* 必填，本部分配置对应的寄存器初始化列表 */
		.regs	    = sensor_2560x1440p15_regs,
		.regs_size  = ARRAY_SIZE(sensor_2560x1440p15_regs),
		.set_size   = NULL,

        /* sensor时钟 */
		.top_clk    = 300*1000*1000,

        /* isp时钟 */
		.isp_clk    = 297*1000*1000,
	},
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;至此编译并烧录固件后，理论可以找到/dev/video0设备，并使用&lt;code&gt;camerademo&lt;/code&gt;命令可以抓取图片并默认保存到/temp目录下&lt;/p&gt;
&lt;h2 id=&#34;四-使用rtsp获取摄像头图像&#34;&gt;四、使用rtsp获取摄像头图像&lt;/h2&gt;
&lt;p&gt;rtsp需要依赖网络环境，需要自行解决网络问题。下列步骤是在摄像头能通过&lt;code&gt;camerademo&lt;/code&gt;成功出图的基础下测试，可以用&lt;code&gt;camerademo&lt;/code&gt;命令测试一遍，保证摄像头已经配置成功。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;编译rtsp服务&lt;br&gt;
全志已经提供了rtsp的示例代码，位于路径&lt;code&gt;external/eyesee-mpp/middleware/sun8iw21/sample/sample_rtsp&lt;/code&gt;，通过配置menuconfig即可编译。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;打开mpp_sample_rtsp编译选项&lt;br&gt;
执行&lt;code&gt;make menuconfig&lt;/code&gt;并输入&lt;code&gt;/&lt;/code&gt;后搜索&lt;code&gt;mpp_sample_rtsp&lt;/code&gt;并点击回车，再打开编译选项即配置完成。注意如果缺少依赖则可能看不到选项，依次打开相关依赖即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编译&lt;br&gt;
执行&lt;code&gt;make&lt;/code&gt;进行编译，编译完成后可执行文件保存在&lt;code&gt;external/eyesee-mpp/middleware/sun8iw21/sample/bin&lt;/code&gt;下。&lt;br&gt;
如果编译成功缺找不到可执行文件，则尝试&lt;code&gt;make clean&lt;/code&gt;或&lt;code&gt;lunch&lt;/code&gt;后重新编译，这可能是编译架构的bug。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改配置文件&lt;code&gt;sample_rtsp.conf&lt;/code&gt;&lt;br&gt;
主要修改源图片大小（main_src_width、main_src_height）、源图片格式（main_pixel_format）、和网络类型（rtsp_net_type），参考下面示例来修改。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;########### paramter (ref to tulip_cedarx.conf)############
[parameter]

main_isp = 0
main_vipp = 0
main_src_width = 2560
main_src_height = 1440
main_pixel_format = &amp;quot;nv21&amp;quot;      #nv21,nv12,yu12,yv12;aw_lbc_2_5x,aw_lbc_2_0x,aw_lbc_1_5x,aw_lbc_1_0x
main_wdr_enable = 0
main_vi_buf_num = 3
main_src_frame_rate = 20               #fps
main_viChn = 0                         #-1:disale main stream
main_venc_chn = 0                      #-1:disale main stream
main_encode_type = &amp;quot;H.265&amp;quot;
main_encode_width = 2304               #1280x720-&amp;gt;720p, 1920x1080-&amp;gt;1080p, 2304x1296-&amp;gt;3M, 2560×1440-&amp;gt;2k, 3840x2160-&amp;gt;4k, 7680x4320-&amp;gt;8k
main_encode_height = 1296
main_encode_frame_rate = 20            #fps
main_encode_bitrate = 1572864          #5M:5242880, 2M:2097152, 1.5M:1572864, 1M:1048576
main_file_path =                       #&amp;quot;/mnt/extsd/mainStream.raw&amp;quot;    #if no path is specified, it will not be saved.
main_online_en = 1
main_online_share_buf_num = 2
main_encpp_enable = 1

sub_isp = 0
sub_vipp = 4
sub_src_width = 640
sub_src_height = 360
sub_pixel_format = &amp;quot;nv21&amp;quot;       #nv21,nv12,yu12,yv12;aw_lbc_2_5x,aw_lbc_2_0x,aw_lbc_1_5x,aw_lbc_1_0x
sub_wdr_enable = 0
sub_vi_buf_num = 3
sub_src_frame_rate = 20                #fps

sub_vipp_crop_en = 1
sub_vipp_crop_rect_x = 0
sub_vipp_crop_rect_y = 0
sub_vipp_crop_rect_w = 1888
sub_vipp_crop_rect_h = 1072

sub_viChn = 0                          #-1:disale sub stream
sub_venc_chn = 1                       #-1:disale sub stream
sub_encode_type = &amp;quot;H.264&amp;quot;
sub_encode_width = 640                 #1280x720-&amp;gt;720p, 1920x1080-&amp;gt;1080p, 2560×1440-&amp;gt;2k, 3840x2160-&amp;gt;4k, 7680x4320-&amp;gt;8k
sub_encode_height = 360
sub_encode_frame_rate = 20             #fps
sub_encode_bitrate = 256000            #5M:5242880‬, 2M:2097152, 1M:1048576‬, 0.5M:512000
sub_file_path =                        #&amp;quot;/mnt/extsd/subStream.raw&amp;quot;      #if no path is specified, it will not be saved.
sub_encpp_enable = 1

sub_lapse_viChn = 1                    #-1:disale sub lapse stream
sub_lapse_venc_chn = 2                 #-1:disale sub lapse stream
sub_lapse_encode_type = &amp;quot;H.264&amp;quot;
sub_lapse_encode_width = 640           #1280x720-&amp;gt;720p, 1920x1080-&amp;gt;1080p, 2560×1440-&amp;gt;2k, 3840x2160-&amp;gt;4k, 7680x4320-&amp;gt;8k
sub_lapse_encode_height = 360
sub_lapse_encode_frame_rate = 20       #fps
sub_lapse_encode_bitrate = 256000      #5M:5242880‬, 2M:2097152, 1M:1048576‬, 0.5M:512000
sub_lapse_file_path =                  #&amp;quot;/mnt/extsd/subLapseStream.raw&amp;quot;  #if no path is specified, it will not be saved.
sub_lapse_time = 1000000               #unit:us
sub_lapse_encpp_enable = 1

isp_ve_linkage_enable = 1
isp_ve_linkage_stream_channel = 0      #0:main stream, 1:sub stream, 2:sub lapse stream

wb_yuv_enable = 0
wb_yuv_buf_num = 20
wb_yuv_start_index = 0
wb_yuv_total_cnt = 100
wb_yuv_stream_channel = 0              #0:main stream, 1:sub stream, 2:sub lapse stream
wb_yuv_file_path = &amp;quot;/mnt/extsd/wb_yuv.yuv&amp;quot;

rtsp_net_type = 3                      #RTSP Network type, 0: &amp;quot;lo&amp;quot;, 1: &amp;quot;eth0&amp;quot;, 2: &amp;quot;br0&amp;quot;, 3: &amp;quot;wlan0&amp;quot;

test_duration = 0                      #unit:s, 0:Infinite duration.
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;上传和执行&lt;br&gt;
上传到tiny linux并执行，确认sample_rtsp执行过程没有异常代码即可&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pc
adb push sample_rtsp sample_rtsp.conf /root
# tiny linux
./sample_rtsp -path sample_rtsp.conf    # 注意是-path不是--path
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;下载vlc软件&lt;br&gt;
linux环境下可以直接用snap命令下载&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载安装
sudo snap install vlc
# 运行
vlc
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;从上面sample_rtsp命令过程打印中找到url，一般格式是&lt;code&gt;rtsp://192.168.3.18:8554/ch0&lt;/code&gt;或&lt;code&gt;rtsp://192.168.3.18:8554/ch1&lt;/code&gt;的格式，现在用vlc观察图像吧~vlc的用法不追溯了，自己找去。&lt;/li&gt;
&lt;/ol&gt;
">全志v853s常规-调试camera驱动</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/kwW10gEwW/"" data-c="
          &lt;p&gt;参考资料：&lt;br&gt;
&lt;a href=&#34;https://v853.docs.aw-ol.com/&#34;&gt;全志提供的上手资料&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;搭建基本的SDK环境：&lt;br&gt;
&lt;a href=&#34;https://v853.docs.aw-ol.com/study/study_1tina/&#34;&gt;v853 软件入门&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-文档目的&#34;&gt;一、文档目的&lt;/h2&gt;
&lt;p&gt;本文档用来介绍全志Tina Linux SDK的开发方法，用来记录、复盘、积累Tina Linux系统的开发和调试流程。本文档不包含Tina Linux SDK环境的搭建方法。&lt;br&gt;
本文档基于v853s的开发环境编写&lt;/p&gt;
&lt;h2 id=&#34;二-基础使用方法&#34;&gt;二、基础使用方法&lt;/h2&gt;
&lt;h3 id=&#34;21-简介&#34;&gt;2.1 简介&lt;/h3&gt;
&lt;p&gt;Tina Linux SDK是基于openwrt-14.07的软件开发包，用来开发Linux系统。主线Linux的开发除了需要拉取和编译主线Kernel代码外，还需要编译uboot、编译自定义软件包并制作根文件系统，这一过程必不可少却十分繁琐。因此Tina Linux SDK就把Linux开发的过程集成到一个SDK内，这样可以减少开发者精力损耗，增加开发效率。当然缺点是不利于新手上手和理解Linux。&lt;/p&gt;
&lt;h3 id=&#34;22-开发流程&#34;&gt;2.2 开发流程&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;检查开发环境需求&lt;/li&gt;
&lt;li&gt;搭建开发环境&lt;/li&gt;
&lt;li&gt;选择设备&lt;/li&gt;
&lt;li&gt;下载源码&lt;/li&gt;
&lt;li&gt;定制系统配置&lt;/li&gt;
&lt;li&gt;编译和打包&lt;/li&gt;
&lt;li&gt;烧录并运行&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;23-目录说明&#34;&gt;2.3 目录说明&lt;/h3&gt;
&lt;p&gt;这里即使介绍了也不会用心看，略掉。需要了解时参考《Tina Linux 系统软件开发指南》，或者参考SDK的&lt;code&gt;docs/Tina Linux quick start guide.md&lt;/code&gt;文件的介绍。&lt;/p&gt;
&lt;p&gt;下面的命令可以快速进入一些目录：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;croot       # 进入SDK的根目录
cconfigs    # 进入内核、uboot配置目录
ckernel     # 进入内核目录
cboot0      # 进入boot0目录（boot0是spl boot固件）
cboot       # 进入uboot目录
cout        # 编译/打包完成后的输出目录
cdevice     # 目标板子配置目录
ctoolchain      # 工具链目录
# ...还有一些未记录的，自行查阅
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;24-编译&#34;&gt;2.4 编译&lt;/h3&gt;
&lt;h4 id=&#34;240-导入环境&#34;&gt;2.4.0 导入环境&lt;/h4&gt;
&lt;p&gt;编译前需要导入编译环境来应用编译配置，这是必不可少的一步。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;source build/envsetup.sh
lunch       # 选择对应的设备
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;241-编译boot&#34;&gt;2.4.1 编译boot&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mboot       # 编译boot0和uboot
mboot0      # 只编译boot0
muboot      # 只编译uboot
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;242-编译内核&#34;&gt;2.4.2 编译内核&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkernel     # 编译内核
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;243-编译e907&#34;&gt;2.4.3 编译E907&lt;/h4&gt;
&lt;p&gt;v85x系列有一个E907小核，并且SDK提供了编译运行的方法&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 找到e907代码环境
cd lichee/melis-v3.0/source
# 2. 加载环境并编译
source melis-env.sh
lunch v853-e907-ver1-board
make menuconfig
make -j
# 3. 预处理并打包
riscv64-unknown-elf-strip ekernel/melis30.elf
cp ekernel/melis30.elf /sdk/device/config/chips/v853s/configs/default/riscv.fex
cd sdk
pack
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;244-编译软件包&#34;&gt;2.4.4 编译软件包&lt;/h4&gt;
&lt;p&gt;当只修改了package下的软件包，不想再重新烧写固件时，可以单独编译和安装软件包。有两种方法：&lt;/p&gt;
&lt;p&gt;方法1：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 进入软件包目录，例如package/hello_world
cd package/hello_world
# 编译，-B表示需要clean
mm -B
# 上传编译后的软件包
adb push out/v853s-maixcam/packages/base/hello_world_1_sunxi.ipk /root
# 进入Tina Linux安装软件包
opkg install /root/hello_world_1_sunxi.ipk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;方法2：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 假设软件包位于package/hello_world
make package/hello_world/clean  # 执行clean
make package/hello_world/install  # 执行编译并安装
make package/hello_world/{clean,install}    # 执行clean后编译

# 上传编译后的软件包
adb push out/v853s-maixcam/packages/base/hello_world_1_sunxi.ipk /root
# 进入Tina Linux安装软件包
opkg install /root/hello_world_1_sunxi.ipk
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;244-编译所有并打包&#34;&gt;2.4.4 编译所有并打包&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;make -jN    # 编译
pack        # 打包
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-uboot开发&#34;&gt;三、uboot开发&lt;/h2&gt;
&lt;h3 id=&#34;31-uboot配置&#34;&gt;3.1 uboot配置&lt;/h3&gt;
&lt;h4 id=&#34;311-使用defconfig配置&#34;&gt;3.1.1 使用defconfig配置&lt;/h4&gt;
&lt;p&gt;修改目录&lt;code&gt;lichee/brandy-2.0/u-boot-2018/configs&lt;/code&gt;下的配置来修改默认的配置选项，各配置选项的功能通过代码或文档查阅，这里不扩展开。&lt;/p&gt;
&lt;h4 id=&#34;312-使用menuconfig配置&#34;&gt;3.1.2 使用menuconfig配置&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /sdk/lichee/brandy-2.0/u-boot-2018/
make ARCH=arm menuconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;313-编译&#34;&gt;3.1.3 编译&lt;/h4&gt;
&lt;p&gt;方法1：&lt;br&gt;
见上文，直接使用&lt;code&gt;muboot&lt;/code&gt;编译uboot&lt;br&gt;
方法2：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cboot
make xxx_config     # 使用指定配置文件编译
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;314-配置sys_configfex&#34;&gt;3.1.4 配置sys_config.fex&lt;/h4&gt;
&lt;p&gt;fex文件是全志自己的配置文件，这个文件可以用来配置外设，最终会被编译为dtb。fex文件主要是由主键和子键构成，主键由[]符号包含表示某项功能或模块的主标识，子键是主键各个参数的配置项。&lt;br&gt;
例如：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[platform]  # 主键：平台配置
debug_mode = 1  # 1表示开启uboot的调试模式
next_work = 2       # 烧录完系统后的下一步动作（1，正常启动；2，重启，3，关机）

[uart_para]     # 主键：串口参数
uart_debug_port = 0                                 # 子键1：调试串口号
uart_debug_tx   = port:PH09&amp;lt;5&amp;gt;&amp;lt;1&amp;gt;&amp;lt;default&amp;gt;&amp;lt;default&amp;gt; # 子键2：调试串口TX脚配置
uart_debug_rx   = port:PH10&amp;lt;5&amp;gt;&amp;lt;1&amp;gt;&amp;lt;default&amp;gt;&amp;lt;default&amp;gt; # 子键3：调试串口RX脚配置
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;详情参考《Tina Linux 配置开发指南》&lt;/p&gt;
&lt;h4 id=&#34;315-配置envcfg&#34;&gt;3.1.5 配置env.cfg&lt;/h4&gt;
&lt;p&gt;u-boot在启动后根据环境变量配置文件的内容来执行操作，一般在这一步来准备Kernel的启动环境，并随后启动内核。环境变量配置文件路径为&lt;code&gt;/sdk/device/config/chips/v853s/configs/maixcam/linux-4.9/env-4.9.cfg&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;详细配置参考uboot环境变量说明&lt;/p&gt;
&lt;h4 id=&#34;316-配置sys_partitionfex&#34;&gt;3.1.6 配置sys_partition.fex&lt;/h4&gt;
&lt;p&gt;这个配置文件会影响固件文件的分区分布，同时会影响烧录固件时的烧录策略。配置文件路径为&lt;code&gt;/sdk/device/config/chips/v853s/configs/maixcam/linux-4.9/sys_partition.fex&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;常用参数：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;name：分区名，用户自定义，不能超过16字节&lt;/li&gt;
&lt;li&gt;size：分区大小，单位为扇区（512字节），注意分配的大小需要能被128整除&lt;/li&gt;
&lt;li&gt;downloadfile：分区下载文件的路径。可以使用相对路径，相对与image.cfg文件的路径（例如：&lt;code&gt;/sdk/out/v853s-maixcam/image/&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;user_type：提供给操作系统使用。防止不同操作系统在读取分区时使用了不属于自己的分区&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;详情参考《Tina Linux 配置开发指南》&lt;/p&gt;
&lt;h2 id=&#34;四-kernel开发&#34;&gt;四、kernel开发&lt;/h2&gt;
&lt;h3 id=&#34;40-内核日志&#34;&gt;4.0 内核日志&lt;/h3&gt;
&lt;p&gt;在uboot启动的配置文件可以设置默认日志等级，见上文&lt;code&gt;配置env.cfg&lt;/code&gt;章节&lt;br&gt;
进入系统后，也可以通过下面的方法设置打印等级&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 方法1
echo 8 &amp;gt; /proc/sys/kernel/printk
# 方法2
dmesg -n 8
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;41-kernel配置&#34;&gt;4.1 kernel配置&lt;/h3&gt;
&lt;p&gt;kernel的配置使用menuconfig完成，由于全志在kernel之外套了一层openwrt，因此需要用kernel_menuconfig来配置kernel&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;make kernel_menuconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;42-tina-procd-init和busybox-init切换&#34;&gt;4.2 tina procd-init和busybox-init切换&lt;/h3&gt;
&lt;p&gt;tina linux支持procd-init和busybox-init两种初始化代码，一般情况用不到，详情自行查找文档&lt;/p&gt;
&lt;h3 id=&#34;43-自定义软件包&#34;&gt;4.3 自定义软件包&lt;/h3&gt;
&lt;p&gt;开发应用时经常会遇到需要执行自定义软件的情况。通过openwrt的机制，用户可以自定义库或者应用程序，并作为软件包上传和安装。参考&lt;a href=&#34;https://lxowalle.cc/quan-zhi-v853s-chang-gui-de-tian-jia-zi-ding-yi-ruan-jian-bao/&#34;&gt;全志v853s常规-添加自定义软件包&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;44-自启动设置&#34;&gt;4.4 自启动设置&lt;/h3&gt;
&lt;p&gt;一般需要自动启动的文件会放到目录&lt;code&gt;/etc/init.d&lt;/code&gt;。&lt;/p&gt;
&lt;h4 id=&#34;441-自启动自定义软件包&#34;&gt;4.4.1 自启动自定义软件包&lt;/h4&gt;
&lt;p&gt;如果自定义软件包需要自动启动，则可以在Makefile中将软件安装到&lt;code&gt;/etc/init.d&lt;/code&gt;目录下,例如：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# in package/system/fstools/Makefile
define Package/block-mount/install
	$(INSTALL_BIN) ./files/fstab.init $(1)/etc/init.d/fstab     # 将fstab.init复制到/etc/init.d/fstab
endef
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;442-编写sysv格式的自启动脚本&#34;&gt;4.4.2 编写sysV格式的自启动脚本&lt;/h3&gt;
&lt;p&gt;自启动脚本的编写示例，更多可以参考&lt;code&gt;package/base-files/files/etc/rc.common&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/sh /etc/rc.common
START=10                # 开启启动优先级，范围0~99，值越低优先级越高
STOP=15                 # 关机停止优先级，范围0~99，值越低优先级越高
DEPEND=xxx          # 确保依赖的脚本已经执行
start() { return 0}
stop() {return 0}
reload() {return 1}
restart() {
	trap &#39;&#39; TERM
	stop &amp;quot;$@&amp;quot;
	start &amp;quot;$@&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;443-编写procd格式自启动脚本&#34;&gt;4.4.3 编写procd格式自启动脚本&lt;/h3&gt;
&lt;p&gt;暂时用不到，先忽略了。用到时参考&lt;code&gt;package/base-files/files/etc/rc.common&lt;/code&gt;&lt;/p&gt;
">全志v853s常规-Tina Linux SDK基本应用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/quan-zhi-v853s-chang-gui-kai-fa-e907-nei-he-1/"" data-c="
          &lt;p&gt;参考资料：&lt;br&gt;
&lt;a href=&#34;https://forums.100ask.net/t/topic/3151&#34;&gt;100ASK_V853-PRO开发板支持E907小核开发&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://v853.docs.aw-ol.com/soft/dev_e907_firm/&#34;&gt;E907 核心固件加载&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;参考资料的步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;修改设备树&lt;br&gt;
注意内存分配的地址不要写错，多检查一下&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;reserved-memory {
    e907_dram: riscv_memserve {
        reg = &amp;lt;0x0 0x48000000 0x0 0x00400000&amp;gt;;
        no-map;
    };

    vdev0buffer: vdev0buffer@47000000 {
        /* 256k reserved for shared mem pool */
        compatible = &amp;quot;shared-dma-pool&amp;quot;;
        reg = &amp;lt;0x0 0x47000000 0x0 0x40000&amp;gt;;
        no-map;
    };

    vdev0vring0: vdev0vring0@47040000 {
        reg = &amp;lt;0x0 0x47040000 0x0 0x20000&amp;gt;;
        no-map;
    };

    vdev0vring1: vdev0vring1@47060000 {
        reg = &amp;lt;0x0 0x47060000 0x0 0x20000&amp;gt;;
        no-map;
    };
};

e907_rproc: e907_rproc@0 {
    compatible = &amp;quot;allwinner,sun8iw21p1-e907-rproc&amp;quot;;
    clock-frequency = &amp;lt;600000000&amp;gt;;
    memory-region = &amp;lt;&amp;amp;e907_dram&amp;gt;, &amp;lt;&amp;amp;vdev0buffer&amp;gt;,
                    &amp;lt;&amp;amp;vdev0vring0&amp;gt;, &amp;lt;&amp;amp;vdev0vring1&amp;gt;;
    mboxes = &amp;lt;&amp;amp;msgbox 0&amp;gt;;
    mbox-names = &amp;quot;mbox-chan&amp;quot;;
    iommus = &amp;lt;&amp;amp;mmu_aw 5 1&amp;gt;;

    memory-mappings =
        /* DA              len         PA */
        /* DDR for e907  */
        &amp;lt; 0x48000000 0x00400000 0x48000000 &amp;gt;;
    core-name = &amp;quot;sun8iw21p1-e907&amp;quot;;
    firmware-name = &amp;quot;melis-elf&amp;quot;;
    status = &amp;quot;okay&amp;quot;;
};

rpbuf_controller0: rpbuf_controller@0 {
    compatible = &amp;quot;allwinner,rpbuf-controller&amp;quot;;
    remoteproc = &amp;lt;&amp;amp;e907_rproc&amp;gt;;
    ctrl_id = &amp;lt;0&amp;gt;;    /* index of /dev/rpbuf_ctrl */
    iommus = &amp;lt;&amp;amp;mmu_aw 5 1&amp;gt;;
    status = &amp;quot;okay&amp;quot;;
};

rpbuf_sample: rpbuf_sample@0 {
    compatible = &amp;quot;allwinner,rpbuf-sample&amp;quot;;
    rpbuf = &amp;lt;&amp;amp;rpbuf_controller0&amp;gt;;
    status = &amp;quot;okay&amp;quot;;
};
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;配置kernel&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 加载环境
source build/envsetup.sh
lunch   # 选择对应的板子配置

# 配置内核
make kernel_menuconfig

# 勾选以下选项
Device Drivers  ---&amp;gt;
  Remoteproc drivers  ---&amp;gt;
    &amp;lt;*&amp;gt; SUNXI remote processor support
  Rpmsg drivers  ---&amp;gt;
    &amp;lt;*&amp;gt; allwinnertech rpmsg driver for v853-e907
    &amp;lt;*&amp;gt; allwinnertech rpmsg hearbeat driver
    &amp;lt;*&amp;gt; Virtio RPMSG bus driver 
    &amp;lt;*&amp;gt; sunxi rpmsg ctrl driver
  [*] Mailbox Hardware Support  ---&amp;gt;
    &amp;lt;*&amp;gt;   sunxi Mailbox
    &amp;lt;*&amp;gt;   sunxi rv32 standby driver
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;下载e907固件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在&lt;a href=&#34;https://www.aw-ol.com/downloads?cat=16&#34;&gt;这里&lt;/a&gt;下载&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;加载e907固件&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;adb push e907_test.elf /lib/firmware        # 注意要放到/lib/firmware，内核代码写死了路径(还有另外三个固定路径，详情见内核源码)
cd /lib/firmware            # 注意固件不能带有路径，所以需要进入/lib/firmware目录下导入固件

# 导入e907固件
echo e907_test.elf &amp;gt; /sys/kernel/debug/remoteproc/remoteproc0/firmware
# 启动e907固件
echo start &amp;gt; /sys/kernel/debug/remoteproc/remoteproc0/state
# 观察e907固件状态
cat /sys/kernel/debug/remoteproc/remoteproc0/state
# 停止e907固件
echo stop &amp;gt; /sys/kernel/debug/remoteproc/remoteproc0/state
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上面步骤是理论可行的步骤，但实际操作时出现问题，在启动e907固件时整个系统崩溃，目前怀疑可能是设备树或menuconfig配置问题，或者e907的固件问题。&lt;br&gt;
报错日志如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[  102.082339]  remoteproc0: powering up e907_rproc
[  102.087738]  remoteproc0: failed to parser head (e907_test.elf) ret=-2
[  102.095070]  remoteproc0: failed to read boot_package item
[  102.101234]  remoteproc0: request_firmware failed from boot_package: -14
[  102.117236] virtio_rpmsg_bus virtio0: rpmsg host is online
[  102.125213]  remoteproc0: registered virtio0 (type 7)
[  102.131831]  remoteproc0: remote processor e907_rproc is now up
[  102.138582] mm/pgtable-generic.c:33: bad pmd 85dec31f.
[  102.144742] Unable to handle kernel paging request at virtual address 079345d0
[  102.153039] pgd = c0004000
[  102.156065] [079345d0] *pgd=8ca647a2(bad)
[  102.160606] Internal error: Oops: 5 [#1] PREEMPT ARM
[  102.166154] Modules linked in: xradio_wlan xradio_core xradio_mac ft5x16_ts vin_v4l2 gc4663_mipi vin_io videobuf2_dma_contig v
ideobuf2_vmalloc videobuf2_v4l2 videobuf2_memops videobuf2_core
[  102.185086] CPU: 0 PID: 1558 Comm: sh Not tainted 4.9.191 #203
[  102.191603] Hardware name: sun8iw21
[  102.195501] task: c7ae4b40 task.stack: c583e000
[  102.200571] PC is at vunmap_page_range+0x94/0xe4
[  102.205733] LR is at free_unmap_vmap_area+0x24/0x34
[  102.211188] pc : [&amp;lt;c01a21a0&amp;gt;]    lr : [&amp;lt;c01a2a58&amp;gt;]    psr: 60000113
[  102.211188] sp : c583fda8  ip : 00008ff9  fp : c0829e28
[  102.224022] r10: fffff000  r9 : c583e000  r8 : c8b78000
[  102.229862] r7 : c0007228  r6 : c8b78000  r5 : c8b74000  r4 : 079345d0
[  102.237159] r3 : 00000174  r2 : 00000000  r1 : c8b78000  r0 : 079345d0
[  102.244459] Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment none
[  102.252436] Control: 10c5387d  Table: 467ec059  DAC: 00000051
[  102.258856] Process sh (pid: 1558, stack limit = 0xc583e208)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;暂时不追踪，之后追踪时尝试手动编译e907固件再尝试。e907固件的源码可以在&lt;a href=&#34;https://github.com/YuzukiHD/Yuzukilizard/tree/master/Software/BSP/e907_rtos&#34;&gt;这个&lt;/a&gt;仓库中获取。&lt;/p&gt;
">全志v853s常规-开发e907内核</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/wsl-wu-fa-zhi-xing-32-wei-cheng-xu-de-qing-kuang/"" data-c="
          &lt;h4 id=&#34;问题&#34;&gt;问题：&lt;/h4&gt;
&lt;p&gt;在WSL下编译Tina Linux后，在打包时出现了&lt;code&gt;/home/sipeed/sipeed/v831_SDK/sdk/out/host/bin/dragon: cannot execute binary file: Exec format error&lt;/code&gt;的错误，从网上得出了问题的原因时WSL默认使用64bit的程序，不支持32位程序。&lt;/p&gt;
&lt;h4 id=&#34;解决方法&#34;&gt;解决方法：&lt;/h4&gt;
&lt;p&gt;安装QEMU来虚拟化内核：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装QEMU&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;sudo apt update
sudo apt install qemu-user-static
sudo update-binfmts --install i386 /usr/bin/qemu-i386-static --magic &#39;\x7fELF\x01\x01\x01\x03\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x03\x00\x01\x00\x00\x00&#39; --mask &#39;\xff\xff\xff\xff\xff\xff\xff\xfc\xff\xff\xff\xff\xff\xff\xff\xff\xf8\xff\xff\xff\xff\xff\xff\xff&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;启动服务&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;调用32位程序前需要启动一次&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo service binfmt-support start
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;启动32位架构&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;sudo dpkg --add-architecture i386
sudo apt update
sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386
&lt;/code&gt;&lt;/pre&gt;
">WSL无法执行32位程序的情况</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/ubuntu-shang-an-zhuang-chang-yong-win10-ruan-jian/"" data-c="
          &lt;p&gt;&lt;a href=&#34;https://github.com/zq1997/deepin-wine&#34;&gt;参考链接&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&#34;安装windows软件方法&#34;&gt;安装Windows软件方法&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;添加仓库&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;wget -O- https://deepin-wine.i-m.dev/setup.sh | sh
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;安装应用&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;sudo apt-get install com.qq.weixin.deepin   # 微信
sudo apt-get install com.qq.im.deepin       # QQ
sudo apt-get install com.dingtalk.deepin    # 钉钉
# 更多安装包见:https://deepin-wine.i-m.dev
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;安装完成并重启电脑后会生成运行图标，点击图标来启动程序&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;微信不能输入中文&#34;&gt;微信不能输入中文&lt;/h5&gt;
&lt;p&gt;在deepin-wine的运行脚本目录中加载输入法&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /opt/deepinwine/tools/
sudo chmod 666 run.sh  			#文件默认为只读，修改权限
vim run.sh   					#修改脚本
# 加入以下内容
export GTK_IM_MODULE=&amp;quot;fcitx&amp;quot;
export QT_IM_MODULE=&amp;quot;fcitx&amp;quot; 
export XMODIFIERS=&amp;quot;@im=fcitx&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ubuntu-上微信不能压缩图片的问题&#34;&gt;ubuntu 上微信不能压缩图片的问题&lt;/h4&gt;
&lt;p&gt;需要安装微信支持的压缩库&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt-get install libjpeg62:i386
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;解决微信输入汉字是方块的问题&#34;&gt;解决微信输入汉字是方块的问题&lt;/h4&gt;
&lt;p&gt;https://github.com/wszqkzqk/deepin-wine-ubuntu/issues/136&lt;/p&gt;
&lt;h5 id=&#34;20220428更新&#34;&gt;20220428更新&lt;/h5&gt;
&lt;p&gt;参考&lt;a href=&#34;https://github.com/lovechoudoufu/wechat_for_linux&#34;&gt;这里&lt;/a&gt;的步骤也可以使用微信&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载
http://archive.ubuntukylin.com/ubuntukylin/pool/partner/weixin_2.1.1_amd64.deb

# 安装
sudo dpkg -i weixin_2.1.1_amd64.deb

# 启动
./weixin
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;解决微信启动错误wine-could-not-load-kernel32dll-status-c0000135&#34;&gt;解决微信启动错误&lt;code&gt;wine: could not load kernel32.dll, status c0000135&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/zq1997/deepin-wine/issues/310&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;解决方法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 打开启动脚本
sudo vim /opt/apps/com.qq.weixin.deepin/files/run.sh

# 2. 注释设置WINEPREDLL环境变量的一行
# export WINEPREDLL=&amp;quot;$ARCHIVE_FILE_DIR/dlls&amp;quot;

# 3. 重新启动微信
&lt;/code&gt;&lt;/pre&gt;
">ubuntu上安装常用win10软件</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/rust-serde-ku/"" data-c="
          &lt;h2 id=&#34;rust序列化反序列化框架-serde库&#34;&gt;Rust序列化/反序列化框架-serde库&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.rectcircle.cn/posts/rust-serde/&#34;&gt;Rust 序列化反序列框架 Serde&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;对JSON进行序列化和反序列化&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// Cargo.toml添加依赖
serde = { version = &amp;quot;1.0&amp;quot;, features = [&amp;quot;derive&amp;quot;] }
serde_json = &amp;quot;1.0&amp;quot;
    
// main.rs
use serde::{Serialize, Deserialize};
use serde_json;

#[derive(Serialize, Deserialize)]
struct Color {
    r: u8,
    g: u8,
    b: u8
}

fn main(){
    let data = r#&amp;quot;
        {
            &amp;quot;r&amp;quot;: 31,
            &amp;quot;g&amp;quot;: 43,
            &amp;quot;b&amp;quot;: 12
        }&amp;quot;#;

    // 解析字符串到Person对象。
    let p: Color = serde_json::from_str(data).unwrap();
    println!(&amp;quot;Color: {} {} {}&amp;quot;, p.r, p.g, p.b);
    
    // Person对象转为JSON字符串.
    let serialized = serde_json::to_string(&amp;amp;p).unwrap();
    println!(&amp;quot;serialized = {}&amp;quot;, serialized);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
">rust-serde库</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/rust-core-ku/"" data-c="
          &lt;p&gt;参考&lt;a href=&#34;https://doc.rust-lang.org/core/&#34;&gt;rust官方core文档&lt;/a&gt;V1.61.0版&lt;/p&gt;
&lt;p&gt;参考&lt;a href=&#34;https://rust.ffactory.org/core/index.html&#34;&gt;rust core文档&lt;/a&gt;V1.60.0版&lt;/p&gt;
&lt;p&gt;参考&lt;a href=&#34;https://rustmagazine.github.io/rust_magazine_2021/chapter_7/rusts-standard-library-traits.html&#34;&gt;Rust trait指南&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;​	rust有两个基本库，core库和std库，其中std库依赖于core库，core库没有依赖，一般作为rust代码跨平台的基础库。所以嵌入式开发过程一般都会使用#![no_std]来屏蔽掉std库，而只是用core库开发。&lt;/p&gt;
&lt;p&gt;​	core库分为原始类型、模块和宏。&lt;/p&gt;
&lt;h2 id=&#34;原始类型&#34;&gt;原始类型&lt;/h2&gt;
&lt;p&gt;注：rust官方手册标记了&lt;code&gt;Experimental&lt;/code&gt;的都表示不稳定状态，表示该类型/模块在未来是有可能更改甚至删除。&lt;/p&gt;
&lt;h3 id=&#34;never&#34;&gt;never&lt;/h3&gt;
&lt;p&gt;编程时写为&lt;code&gt;!&lt;/code&gt;的符号又称为nerver类型。&lt;code&gt;!&lt;/code&gt;类型用来表示某个数值不会被解释为任何计算类型。&lt;/p&gt;
&lt;p&gt;默认trait：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Clone&lt;/li&gt;
&lt;li&gt;Debug&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;注意事项：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;支持&lt;code&gt;!&lt;/code&gt;类型的表达式可以强制转换为任何其他类型，包括有break、continue和return&lt;/li&gt;
&lt;li&gt;使用&lt;code&gt;Result&amp;lt;T, !&amp;gt;&lt;/code&gt;可以表示该Result没有错误发生，使用&lt;code&gt;Result&amp;lt;!, T&amp;gt;&lt;/code&gt;可以表示该Result必定有错误发生&lt;/li&gt;
&lt;li&gt;对于非&lt;code&gt;!&lt;/code&gt;类型的函数，如果使用&lt;code&gt;!&lt;/code&gt;类型返回，则必须保证返回类型可以被自动推导出来，否则编译器不能确定&lt;code&gt;!&lt;/code&gt;需要强制转换的正确类型。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;array&#34;&gt;array&lt;/h3&gt;
&lt;p&gt;array是数组类型，表示为[T; N]，其中T表示类型，N表示非负常量。&lt;/p&gt;
&lt;p&gt;有两种创建数组的方式&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用[x,y,z]的方式创建&lt;/li&gt;
&lt;li&gt;使用[x; N]的方式创建，但是值x必须定义了Copy&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对于元素数量为0~32的数组，如果元素类型允许，数据将会实现Default trait。&lt;/li&gt;
&lt;li&gt;数组可以强制为slice，因此可以直接使用slice的方法&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;使用方法&#34;&gt;使用方法&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;初始化、赋值、取值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;// 初始化
let mut array: [i32; 3] = [0; 3];
// 赋值
array[0] = 1;
array[1] = 2;
array[2] = 3;
// 取值
for i in array {
	println!(&amp;quot;{}&amp;quot;, array[i]);
}

// 取值，注意这里的i是array每个元素的指针
println!(&amp;quot;&amp;amp;array:{}&amp;quot;, &amp;amp;array as *const i32 as usize);
for i in &amp;amp;array {
    unsafe{println!(&amp;quot;i:{} ptr_for_i:{}&amp;quot;, i, i as *const i32 as usize);}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;切片模式取值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;// 切片模式取值1
let array: [i32; 5] = [1, 2, 3, 4, 5];
match array[1..4] {
    [a, _] =&amp;gt; println!(&amp;quot;Error, too short&amp;quot;),
    [a, b, c] =&amp;gt; println!(&amp;quot;Ok,a:{} b:{}, c:{}&amp;quot;, a, b, c),
    _  =&amp;gt; println!(&amp;quot;None&amp;quot;),
};
// 切片模式取值2
let [a, b, c] = [1, 2, 3];
println!(&amp;quot;a:{}&amp;quot;, a);
println!(&amp;quot;b:{}&amp;quot;, b);
println!(&amp;quot;c:{}&amp;quot;, c);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;迭代取值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;// 取引用迭代
let array: [i32; 5] = [1, 2, 3, 4, 5];
for item in array.iter().enumerate() {
    let (i, val): (usize, &amp;amp;i32) = item;
    println!(&amp;quot;i:{} val:{}&amp;quot;, i, val);
}
// 取值迭代
let array: [i32; 5] = [1, 2, 3, 4, 5];
for item in IntoIterator::into_iter(array).enumerate() {
    let (i, val): (usize, i32) = item;
    println!(&amp;quot;i:{} val:{}&amp;quot;, i, val);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;函数&#34;&gt;函数&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;map函数&lt;/p&gt;
&lt;p&gt;map函数用来从一个数组生成一个新的数组。map在大数组上优化不够好，因此需要避免在大数组中使用map&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;// 将数组所有值加1并保存
let array: [i32; 5] = [1, 2, 3, 4, 5];
let tmp = 3;
let new_array = array.map(|v| {v + tmp});
println!(&amp;quot;{:?}&amp;quot;, new_array);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;try_map函数&lt;/p&gt;
&lt;p&gt;try_map函数功能类似map函数，从一个数组来生成一个新数组时会检查是否有Error并返回错误，错误类型可能是Result&amp;lt;[T;N];E&amp;gt;或Option&lt;T&gt;，由闭包的返回类型决定。&lt;/p&gt;
&lt;p&gt;try_map函数可以&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#![feature(array_try_map)]
// 将数组内容从&amp;amp;str转换为u32并保存为一个新的array
let a = [&amp;quot;1&amp;quot;, &amp;quot;2&amp;quot;, &amp;quot;3&amp;quot;];
let b = a.try_map(|v| v.parse::&amp;lt;u32&amp;gt;()).unwrap().map(|v| v + 1);
println!(&amp;quot;{:?}&amp;quot;, b);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zip函数&lt;/p&gt;
&lt;p&gt;zip函数会将两个数组的值合并为一个元组。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;let x = [1, 2, 3];
let y = [4, 5, 6];
let z = x.zip(y);
println!(&amp;quot;{:?}&amp;quot;, z);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;as_slice函数&lt;/p&gt;
&lt;p&gt;as_slice函数将数组转换为包含整个数组的切片，等效于&amp;amp;s[..]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;as_mut_slice函数&lt;/p&gt;
&lt;p&gt;as_mut_slice函数将数组转换为包含整个数组的可变切片，等效于mut &amp;amp;s[..]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;each_ref函数&lt;/p&gt;
&lt;p&gt;each_ref函数用来借用每个元素并返回大小相同的引用数组。注意返回的数组的每个成员都是原数组成员的引用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#![feature(array_methods)]
fn main() {
    println!(&amp;quot;Hello world!&amp;quot;);
    let floats = [3.1, 2.7, -1.0];
    let float_refs: [&amp;amp;f64; 3] = floats.each_ref();
    println!(&amp;quot;{:?} {:?} {:?} {:?}&amp;quot;, &amp;amp;floats as *const f64 as usize, 
                        float_refs[0] as *const f64 as usize,
                        float_refs[1] as *const f64 as usize,
                        float_refs[2] as *const f64 as usize);
    println!(&amp;quot;{:?} {:?}&amp;quot;, floats, float_refs);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mut_ref函数&lt;/p&gt;
&lt;p&gt;each_ref函数用来借用每个元素并返回大小相同的可变引用数组。注意返回的数组的每个成员都是原数组成员的可变引用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;split_array_ref函数&lt;/p&gt;
&lt;p&gt;split_array_ref函数会在索引M的位置将数组分为[0, M)和[M, N)两部分，N表示数组最大长度。如果M&amp;gt;N将会触发panic。&lt;/p&gt;
&lt;p&gt;split_array_ref函数通过元组返回两个新数组的引用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#![feature(split_array)]
fn main() {
    let v = [1, 2, 3, 4, 5, 6];
    {
       let (left, right) = v.split_array_ref::&amp;lt;0&amp;gt;();
       assert_eq!(left, &amp;amp;[]);
       assert_eq!(right, &amp;amp;[1, 2, 3, 4, 5, 6]);
    }
    
    {
        let (left, right) = v.split_array_ref::&amp;lt;2&amp;gt;();
        assert_eq!(left, &amp;amp;[1, 2]);
        assert_eq!(right, &amp;amp;[3, 4, 5, 6]);
        println!(&amp;quot;array:{:?} left:{:?}  right:{:?}&amp;quot;, 
        &amp;amp;v as *const i32 as usize, 
        left as *const i32 as usize,
        &amp;amp;right[0] as *const i32 as usize);
    }
    
    {
        let (left, right) = v.split_array_ref::&amp;lt;6&amp;gt;();
        assert_eq!(left, &amp;amp;[1, 2, 3, 4, 5, 6]);
        assert_eq!(right, &amp;amp;[]);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;split_array_mut函数&lt;/p&gt;
&lt;p&gt;同split_array_ref函数，生成的两个数组引用为可变引用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;rsplit_array_ref函数&lt;/p&gt;
&lt;p&gt;rsplit_array_ref函数会在索引M的位置将数组分为[0, N-M)和[N-M, N)两部分，N表示数组最大长度。如果M&amp;gt;N将会触发panic。&lt;/p&gt;
&lt;p&gt;split_array_ref函数通过元组返回两个新数组的引用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#![feature(split_array)]
fn main() {
    let v = [1, 2, 3, 4, 5, 6];

    {
       let (left, right) = v.rsplit_array_ref::&amp;lt;0&amp;gt;();
       assert_eq!(left, &amp;amp;[1, 2, 3, 4, 5, 6]);
       assert_eq!(right, &amp;amp;[]);
    }
    
    {
        let (left, right) = v.rsplit_array_ref::&amp;lt;2&amp;gt;();
        assert_eq!(left, &amp;amp;[1, 2, 3, 4]);
        assert_eq!(right, &amp;amp;[5, 6]);
    }
    
    {
        let (left, right) = v.rsplit_array_ref::&amp;lt;6&amp;gt;();
        assert_eq!(left, &amp;amp;[]);
        assert_eq!(right, &amp;amp;[1, 2, 3, 4, 5, 6]);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;rssplit_array_mut函数&lt;/p&gt;
&lt;p&gt;同rssplit_array_mut函数，生成的两个数组引用为可变引用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;已实现的trait&#34;&gt;已实现的Trait&lt;/h4&gt;
&lt;p&gt;见手册&lt;/p&gt;
&lt;h3 id=&#34;bool&#34;&gt;Bool&lt;/h3&gt;
&lt;p&gt;bool表示布尔类型，只能是true或flase，转换整数为0和1&lt;/p&gt;
&lt;h4 id=&#34;使用方法-2&#34;&gt;使用方法&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;let test = true;

// using the `if` conditional
if test {
    println!(&amp;quot;oh, yeah!&amp;quot;);
} else {
    println!(&amp;quot;what?!!&amp;quot;);
}

// ... or, a match pattern
match test {
    true =&amp;gt; println!(&amp;quot;keep praising!&amp;quot;),
    false =&amp;gt; println!(&amp;quot;you should praise!&amp;quot;),
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;函数-2&#34;&gt;函数&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;then_some函数&lt;/p&gt;
&lt;p&gt;then_some函数通过判断一个布尔类型，并返回Option类型&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    assert_eq!(false.then_some(0), None);
    assert_eq!(true.then_some(5), Some(5));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;then函数&lt;/p&gt;
&lt;p&gt;then函数通过判断一个布尔类型，如果为true则返回Some(f()),如果为false则返回None&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    assert_eq!(false.then(|| 0), None);
    assert_eq!(true.then(|| 5), Some(5));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;char&#34;&gt;char&lt;/h3&gt;
&lt;p&gt;char是字符类型，范围是Unicode除了代理代码点以外的代码点，包括[0,0x10FFFF]，UTF-16使用的代理代码点在0xD800到0xDFFF的范围。&lt;/p&gt;
&lt;h4 id=&#34;使用方式&#34;&gt;使用方式&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;创建&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    println!(&amp;quot;{:?}&amp;quot;, char::from_u32(0x61));
    println!(&amp;quot;{:?}&amp;quot;, unsafe{char::from_u32_unchecked(0x61)});
    let char = &#39;a&#39;;
    println!(&amp;quot;{:?}&amp;quot;, char);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;函数-3&#34;&gt;函数&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;MAX、REPLACEMENT_CHARACTER、UNICODE_VERSION变量&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    println!(&amp;quot;{:?}&amp;quot;, char::MAX);					// char最大有效码点
    println!(&amp;quot;{:?}&amp;quot;, char::REPLACEMENT_CHARACTER);	// 用来表示char字符错误的字符，一般是�符号
    println!(&amp;quot;{:?}&amp;quot;, char::UNICODE_VERSION);		// UNICODE版本号
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;decode_utf16函数&lt;/p&gt;
&lt;p&gt;将utf16进行解码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    let v = [
        0xD834, 0xDD1E, 0x006d, 0x0075, 0x0073, 0xDD1E, 0x0069, 0x0063, 0xD834,
    ];

    assert_eq!(
        char::decode_utf16(v)
            .map(|r| r.map_err(|e| e.unpaired_surrogate()))
            .collect::&amp;lt;Vec&amp;lt;_&amp;gt;&amp;gt;(),
        vec![
            Ok(&#39;𝄞&#39;),
            Ok(&#39;m&#39;), Ok(&#39;u&#39;), Ok(&#39;s&#39;),
            Err(0xDD1E),
            Ok(&#39;i&#39;), Ok(&#39;c&#39;),
            Err(0xD834)
        ]
    ); 
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;from_u32函数&lt;/p&gt;
&lt;p&gt;从u32类型转换为字符类型。该函数返回Option&lt;char&gt;类型&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() {
    let c = char::from_u32(0x2764);
    assert_eq!(Some(&#39;❤&#39;), c);
    assert_eq!(0x2764, c.unwrap() as u32);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;from_u32_unchecked函数&lt;/p&gt;
&lt;p&gt;从u32类型转换为字符类型。该函数返回char类型&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() -&amp;gt; () {
    let mut c = &#39;char::default()&#39;;
    unsafe {c = char::from_u32_unchecked(0x2764);}
    assert_eq!(&#39;❤&#39;, c);
    assert_eq!(0x2764, c as u32);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;....&lt;/p&gt;
&lt;p&gt;更多的函数见手册&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;f32&#34;&gt;f32&lt;/h3&gt;
&lt;p&gt;​	f32是32位的浮点类型，与其他语言的浮点类型类似。&lt;/p&gt;
&lt;p&gt;​	f32可以表示一些特殊的值：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-0.0：当比较运算时，-0.0=+0.0；当算数运算时，-0.0和+0.0的符号位将会纳入计算。&lt;/li&gt;
&lt;li&gt;∞和 -∞：这些结果来自于类似的计算&lt;code&gt;1.0 / 0.0&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;NaN(不是数字)：该值不等于浮点数，也不等于自己，因此Ord trait不能作用与浮点数，因为会出现NaN和NaN的比较计算。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;f64&#34;&gt;f64&lt;/h3&gt;
&lt;p&gt;​	f64是64位的浮点类型，与f32功能相似，只是提供了两倍的位数来提高精度。&lt;/p&gt;
&lt;h3 id=&#34;fn&#34;&gt;fn&lt;/h3&gt;
&lt;p&gt;​	fn是指向带么而不是数据的指针。fn可以像函数一样被调用，但不能为空。如果需要空函数，可以用Option&lt;Fn&gt;包含。&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;函数默认ABI为&amp;quot;Rust&amp;quot;，即&lt;code&gt;Fn()&lt;/code&gt;类型与&lt;code&gt;extern &amp;quot;Rust&amp;quot; fn()&lt;/code&gt;相同。也可以使用C ABI，需要写为&lt;code&gt;extern &amp;quot;C&amp;quot; fn()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;函数的名字已经通过Fn定义时，该名字作为表达式时会变成一个长度为0的唯一标识，并且可以将标识转换为函数指针类型。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;i8&#34;&gt;i8&lt;/h4&gt;
&lt;p&gt;​	i8是有符号的1字节整数。&lt;/p&gt;
&lt;h4 id=&#34;函数-4&#34;&gt;函数&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;常用&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;
fn main() {
    assert_eq!(i8::MAX, 127);                               // i8最大值
    assert_eq!(i8::MIN, -128);                              // i8最小值
    assert_eq!(i8::from_str_radix(&amp;quot;1&amp;quot;, 10).unwrap(), 1);    // 字符串转i8,基数为10
    assert_eq!(i8::from_str_radix(&amp;quot;A&amp;quot;, 16).unwrap(), 10);   // 字符串转i8,基数为16
    assert_eq!(i8::count_ones(0b00011001), 3);              // 返回bit为1的个数
    assert_eq!(i8::count_zeros(0b00011001), 5);             // 返回bit为0的个数
    assert_eq!(i8::leading_ones(-1i8), 8);                  // 返回前导1的个数
    assert_eq!(i8::leading_zeros(-1i8), 0);                 // 返回前导0的个数
    assert_eq!(i8::trailing_ones(-1i8), 8);                 // 返回后导1的个数
    assert_eq!(i8::trailing_zeros(-1i8), 0);                // 返回后导0的个数
    assert_eq!(i8::rotate_left(0b1000, 5), 0b0001);         // 循环左移n位，溢出值放到末尾
    assert_eq!(i8::rotate_right(0b10000, 6), 0b01000000);   // 循环右移n位，溢出值放到开头
    assert_eq!(i8::swap_bytes(-2i8), -2i8);                 // 交换数值
    assert_eq!(i8::reverse_bits(0b0010), 0b01000000);       // 大小端格式翻转
    assert_eq!(i8::from_le(1), 1);                          // 从小端格式转换
    assert_eq!(i8::from_be(1), 1);                          // 从大端格式转换
    assert_eq!(i8::to_le(1), 1);                            // 从转换为小端格式
    assert_eq!(i8::to_be(1), 1);                            // 从转换为大端格式   
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;使用方法-3&#34;&gt;使用方法：&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;强制转换普通函数，或者使用闭包&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() -&amp;gt; () {
    fn add_one(x: usize) -&amp;gt; usize {
        x + 1
    }
    let ptr: fn(usize) -&amp;gt; usize = add_one;		// 普通函数转fn
    assert_eq!(ptr(5), 6);
    let clos: fn(usize) -&amp;gt; usize = |x| x + 5;	// 闭包转fn
    assert_eq!(clos(5), 10);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;获取函数标识，以及将函数标识转换为函数指针&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;fn main() -&amp;gt; () {
    fn bar(x: i32) {}

    let not_bar_ptr = bar; // `not_bar_ptr` 大小为零，唯一标识 `bar`
    assert_eq!(mem::size_of_val(&amp;amp;not_bar_ptr), 0);
    
    let bar_ptr: fn(i32) = not_bar_ptr; // 强制转换为函数指针
    assert_eq!(mem::size_of_val(&amp;amp;bar_ptr), mem::size_of::&amp;lt;usize&amp;gt;());
    
    let footgun = &amp;amp;bar; // 这是对标识 `bar` 的零大小类型的共享引用
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;常用trait&#34;&gt;常用Trait&lt;/h2&gt;
&lt;h3 id=&#34;clone&#34;&gt;Clone&lt;/h3&gt;
&lt;p&gt;rust中实现了Clone Trait的类型可以进行深拷贝，但需要显示调用。Clone主要实现一个clone函数。&lt;/p&gt;
&lt;h3 id=&#34;copy&#34;&gt;Copy&lt;/h3&gt;
&lt;p&gt;参考&lt;a href=&#34;https://doc.rust-lang.org/core/marker/trait.Copy.html&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;rust中值传递过程默认隐式使用Move传递，意味着值传递时生命周期也一起传递，而实现了Copy trait后会默认隐式使用Copy传递，目标值将进行浅拷贝但不会有生命周期传递。&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;由于Copy trait定义时依赖了Clone trait，因此想要实现Copy，则必须实现Clone&lt;/li&gt;
&lt;li&gt;不能同时实现Copy trait和Drop trait&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;drop&#34;&gt;Drop&lt;/h3&gt;
&lt;p&gt;Drop主要实现一个drop函数，当某个所有者变量离开作用域时会调用该方法。&lt;/p&gt;
&lt;h3 id=&#34;default&#34;&gt;Default&lt;/h3&gt;
&lt;p&gt;Default用来定义一个变量的默认值。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#[device(Debug)]
struct Test {
    enable: bool,
}
impl Default for Test {
    fn default() -&amp;gt; Self {
        Test {
            enable: true,
        }
    }
}

fn main() {
    let td = Test::default();
    println!(&amp;quot;{:?}&amp;quot;, td);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;debug&#34;&gt;Debug&lt;/h3&gt;
&lt;p&gt;对于一些复合类型，需要实现Debug trait才能直接被打印出来。一般情况使用&lt;code&gt;#[device(Debug)]&lt;/code&gt;直接定义Debug trait。如果想要自定义的显示，则可以手动实现Debug或Display的fmt函数来自定义打印输出。&lt;/p&gt;
&lt;h3 id=&#34;display&#34;&gt;Display&lt;/h3&gt;
&lt;p&gt;对于一些复合类型，如果想要自定义打印格式，则可以实现Display trait的fmt方法。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;struct test {
    x: f64,
    y: f64,
}

impl Display for test {
    fn fmt(&amp;amp;self, f: &amp;amp;mut Formatter) -&amp;gt; Result {
        write!(f, &amp;quot;Display: {} + {}&amp;quot;, self.x, self.y)
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;from&#34;&gt;From&lt;/h3&gt;
&lt;p&gt;From trait通过编写from函数来定义从一种类型生成自己的过程。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;use std::convert::From;

#[derive(Debug)]
struct Number {
    value: i32,
}

impl From&amp;lt;i32&amp;gt; for Number {
    fn from(item: i32) -&amp;gt; Self {
        Number { value: item }
    }
}

fn main() {
    let num = Number::from(30);
    println!(&amp;quot;My number is {:?}&amp;quot;, num);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;into&#34;&gt;Into&lt;/h3&gt;
&lt;p&gt;Into trait就是把From trait倒过来，只要实现了From trait，Into trait也会被实现。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;use std::convert::From;

#[derive(Debug)]
struct Number {
    value: i32,
}

impl From&amp;lt;i32&amp;gt; for Number {
    fn from(item: i32) -&amp;gt; Self {
        Number { value: item }
    }
}

fn main() {
    let int = 5;
    let num: Number = int.into();		// 注意:这里定义num时需要指明类型为Number
    println!(&amp;quot;My number is {:?}&amp;quot;, num);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;hash&#34;&gt;Hash&lt;/h3&gt;
&lt;p&gt;Hash trait 可以实例化一个任意大小的类型，并且能够用哈希（hash）函数将该实例映射到一个固定大小的值上。&lt;/p&gt;
&lt;h3 id=&#34;partialeq&#34;&gt;PartialEq&lt;/h3&gt;
&lt;p&gt;PartialEq trait通过实现eq函数来实现==和!=的功能。&lt;/p&gt;
&lt;h3 id=&#34;eq&#34;&gt;Eq&lt;/h3&gt;
&lt;p&gt;Eq trait依赖于PartialEq的功能，且不需要实现。为数据实现Eq trait表明了该数据具有自反性，也就是自己等于自己。对于浮点类型不能实现Eq trait，因为Nan != Nan ?????&lt;/p&gt;
&lt;p&gt;Hash trait也会依赖Eq trait的特性。&lt;/p&gt;
&lt;h3 id=&#34;partialord&#34;&gt;PartialOrd&lt;/h3&gt;
&lt;p&gt;PartialOrd trait通过实现partial_cmp方法来实现&amp;gt; &amp;gt;= &amp;lt; &amp;lt;=的功能，依赖于PartialEq方法。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;use std::cmp::Ordering;

#[derive(Eq)]
struct Person {
    id: u32,
    name: String,
    height: u32,
}

impl PartialOrd for Person {
    fn partial_cmp(&amp;amp;self, other: &amp;amp;Self) -&amp;gt; Option&amp;lt;Ordering&amp;gt; {
        Some(self.cmp(other))
    }
}

impl PartialEq for Person {
    fn eq(&amp;amp;self, other: &amp;amp;Self) -&amp;gt; bool {
        self.height == other.height
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ord&#34;&gt;Ord&lt;/h3&gt;
&lt;p&gt;Ord trait可以指定数据结构上任意两个值存在的有效顺序，依赖于PartialOrd trait和Eq trait&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;use std::cmp::Ordering;

#[derive(Eq)]
struct Person {
    id: u32,
    name: String,
    height: u32,
}

impl Ord for Person {
    fn cmp(&amp;amp;self, other: &amp;amp;Self) -&amp;gt; Ordering {
        self.height.cmp(&amp;amp;other.height)
    }
}

impl PartialOrd for Person {
    fn partial_cmp(&amp;amp;self, other: &amp;amp;Self) -&amp;gt; Option&amp;lt;Ordering&amp;gt; {
        Some(self.cmp(other))
    }
}

impl PartialEq for Person {
    fn eq(&amp;amp;self, other: &amp;amp;Self) -&amp;gt; bool {
        self.height == other.height
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;intoiterator&#34;&gt;IntoIterator&lt;/h3&gt;
&lt;p&gt;IntoIterator trait通过定义into_iter函数来定义如何转换为迭代器。&lt;/p&gt;
&lt;h3 id=&#34;asref&#34;&gt;AsRef&lt;/h3&gt;
&lt;p&gt;AsRef trait通过定义as_ref函数来获取目标的引用。&lt;/p&gt;
&lt;h3 id=&#34;asmut&#34;&gt;AsMut&lt;/h3&gt;
&lt;p&gt;AsMut trait通过定义as_mut函数来获取目标的可变引用&lt;/p&gt;
&lt;h3 id=&#34;borrow&#34;&gt;Borrow&lt;/h3&gt;
&lt;p&gt;Borrow tarit通过定义borrow函数来获取目标的借用，Borrow和AsRef相比很相似但更加严格，如果类型U实现了Borrow&lt;T&gt;，在为U实现额外的trait(特别是实现Eq, Ord, Hash)的时候应该实现与T相同的行为。&lt;/p&gt;
&lt;h3 id=&#34;borrowmut&#34;&gt;BorrowMut&lt;/h3&gt;
&lt;p&gt;Borow trait通过定义borrow_mut函数来获取目标的可变借用，BorrowMut依赖于Borrow。&lt;/p&gt;
&lt;h3 id=&#34;toowned&#34;&gt;ToOwned&lt;/h3&gt;
&lt;p&gt;ToOwned trait允许类型&amp;amp;U到T的转换。&lt;/p&gt;
&lt;h3 id=&#34;index和indexmut&#34;&gt;Index和IndexMut&lt;/h3&gt;
&lt;p&gt;Index和IndexMut分别通过实现index和index_mut方法来实现使用[]进行切片操作&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-rust&#34;&gt;#[derive(Debug)]
struct Any&amp;lt;T&amp;gt; {
    con: Vec&amp;lt;T&amp;gt;,
}

impl&amp;lt;T&amp;gt; std::ops::Index&amp;lt;usize&amp;gt; for Any&amp;lt;T&amp;gt; {
    type Output = [T];
    fn index(&amp;amp;self, index: usize) -&amp;gt; &amp;amp;[T] {
        let start = index;
        &amp;amp;self.con[start..start + 1]
    }
}

impl&amp;lt;T&amp;gt; std::ops::IndexMut&amp;lt;usize&amp;gt; for Any&amp;lt;T&amp;gt; {
    fn index_mut(&amp;amp;mut self, index: usize) -&amp;gt; &amp;amp;mut [T] {
        let start = index * 1;
        &amp;amp;mut self.con[start..start + 1]
    }
}

fn main() {
    let mut a = Any {con: vec!{1, 2, 3, 4, 5, 6} };
    println!(&amp;quot;a:{:?} a[0]:{:?}&amp;quot;, a, &amp;amp;a[1]);
    assert!(a[0] == [1]);
    
    let b = &amp;amp;mut a[1];
    b[0] = 7;
    println!(&amp;quot;b:{:?}&amp;quot;, b);
    assert!(b == [7]);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;pattern&#34;&gt;Pattern&lt;/h3&gt;
&lt;p&gt;Pattern trait定义了字符串搜索方法&lt;/p&gt;
&lt;h3 id=&#34;add和addassign&#34;&gt;Add和AddAssign&lt;/h3&gt;
&lt;p&gt;Add trait通过实现add函数来实现+功能；AddAssign trait通过实现add_assign函数来实现+=功能&lt;/p&gt;
&lt;h3 id=&#34;div和divassign&#34;&gt;Div和DivAssign&lt;/h3&gt;
&lt;p&gt;Div trait通过实现div函数来实现/功能；DivAssign trait通过实现div_assign函数来实现/=功能&lt;/p&gt;
&lt;h3 id=&#34;mul和mulassign&#34;&gt;Mul和MulAssign&lt;/h3&gt;
&lt;p&gt;Mul trait通过实现mul函数来实现&lt;em&gt;功能；MulAssign trait通过实现mul_assign函数来实现&lt;/em&gt;=功能&lt;/p&gt;
&lt;h3 id=&#34;rem和remassign&#34;&gt;Rem和RemAssign&lt;/h3&gt;
&lt;p&gt;Rem trait通过实现rem函数来实现%功能；RemAssign trait通过实现rem_assign函数来实现%=功能&lt;/p&gt;
&lt;h3 id=&#34;sub和subassign&#34;&gt;Sub和SubAssign&lt;/h3&gt;
&lt;p&gt;Sub trait通过实现sub函数来实现-功能；SubAssign trait通过实现sub_assign函数来实现-=功能&lt;/p&gt;
&lt;h3 id=&#34;lowerexp&#34;&gt;LowerExp&lt;/h3&gt;
&lt;p&gt;LowerExp trait用来实现格式化时的小写指数形式&lt;/p&gt;
&lt;h3 id=&#34;upperexp&#34;&gt;UpperExp&lt;/h3&gt;
&lt;p&gt;UpperExp trait用来实现格式化时的大写指数形式&lt;/p&gt;
&lt;h3 id=&#34;neg&#34;&gt;Neg&lt;/h3&gt;
&lt;p&gt;Neg trait用来实现一元求反的功能&lt;/p&gt;
&lt;h3 id=&#34;product&#34;&gt;Product&lt;/h3&gt;
&lt;p&gt;Product trait通过实现product函数来实现迭代器元素相乘的功能&lt;/p&gt;
">rust-core库</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/lvgl-sheng-cheng-he-geng-huan-zi-ti/"" data-c="
          &lt;p&gt;LVGL内部支持各种大小的字体，但是默认都不支持中文，所以使用LVGL时想要显示中文就需要利用工具生成汉字库。&lt;br&gt;
我使用的&lt;code&gt;LvglFontTool v0.3&lt;/code&gt;工具来生成字体，这里下载&lt;a href=&#34;http://www.lfly.xyz/forum.php?mod=viewthread&amp;amp;tid=24&amp;amp;extra=&#34;&gt;LvglFontTool v0.4&lt;/a&gt;，应该操作区别不大。&lt;/p&gt;
&lt;h2 id=&#34;11-使用lvgl内置字体的方法&#34;&gt;1.1 使用LVGL内置字体的方法&lt;/h2&gt;
&lt;p&gt;LVGL内置的字体只支持英文，不支持中文。使用内置字体的步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;找到&lt;code&gt;lv_conf.h&lt;/code&gt;文件下的&lt;code&gt;LV_FONT_MONTSERRAT_xxx&lt;/code&gt;宏，这些宏代表了不同大小的字体，使能对应宏会使能该字体。&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;lv_style_set_text_font&lt;/code&gt;函数选择要使用的字体，代码示例如下：&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** 代码示例 */
void show_str_demo(char * str)
{
    static lv_style_t style;

    lv_style_init(&amp;amp;style);

    lv_style_set_text_color(&amp;amp;style, LV_STATE_DEFAULT, LV_COLOR_RED);
    lv_style_set_text_opa(&amp;amp;style, LV_STATE_DEFAULT, LV_OPA_50);

    /* 在这里设置字体 */
    lv_style_set_text_font(&amp;amp;style, LV_STATE_DEFAULT, &amp;amp;lv_font_montserrat_28);

    lv_obj_t *obj = lv_label_create(lv_scr_act(), NULL);
    lv_obj_add_style(obj, LV_OBJ_PART_MAIN, &amp;amp;style);
    
    lv_label_set_text(obj, str);
    lv_obj_align(obj, NULL, LV_ALIGN_IN_TOP_LEFT, 0, 0);
}

/** 调用 */
show_str_demo(&amp;quot;Hello! 你好啊世界&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;调用上面示例函数来打印字符&amp;quot;Hello! 你好啊世界&amp;quot;时，会发现界面只显示了&amp;quot;Hello!&amp;quot;，这是因为LVGL默认的字体库不支持中文。需要显示中文时，请参考下文的步骤。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;12-使用lvglfonttool工具生成中文字体库&#34;&gt;1.2 使用LvglFontTool工具生成中文字体库&lt;/h2&gt;
&lt;p&gt;使用LvglFontTool工具可以根据用户的需求生成自定义格式和大小的字体。配置自定义字体的步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装LvglFontTool工具，点击&lt;a href=&#34;http://www.lfly.xyz/forum.php?mod=viewthread&amp;amp;tid=24&amp;amp;extra=&#34;&gt;这里&lt;/a&gt;下载&lt;/li&gt;
&lt;li&gt;使用LvglFontTool生成字体库。注意字体库会以*.c文件的形式保存&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;待补图片
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;由于该软件在转换字体可能出现软件卡死的情况，遇到该情况时重新启动软件即可&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;将生成的字体库文件(C文件)加入工程中&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;LV_FONT_DECLARE(font_name)&lt;/code&gt;声明新加的字体库，然后通过lv_style_set_text_font设置字体即可。font_name表示字体库的名称。以下是使用的代码示例：&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** 代码示例 */
void show_str_demo(char * str)
{
   static lv_style_t style;

   lv_style_init(&amp;amp;style);

   lv_style_set_text_color(&amp;amp;style, LV_STATE_DEFAULT, LV_COLOR_RED);
   lv_style_set_text_opa(&amp;amp;style, LV_STATE_DEFAULT, LV_OPA_50);

   /* 在这里设置字体样式 */
   LV_FONT_DECLARE(myFont);									  // 声明字体库
   lv_style_set_text_font(&amp;amp;style, LV_STATE_DEFAULT, &amp;amp;myFont);    // 应用字体库

   lv_obj_t *obj = lv_label_create(lv_scr_act(), NULL);
   lv_obj_add_style(obj, LV_OBJ_PART_MAIN, &amp;amp;style);
   
   lv_label_set_text(obj, str);
   lv_obj_align(obj, NULL, LV_ALIGN_IN_TOP_LEFT, 0, 0);
}

/** 调用 */
show_str_demo(&amp;quot;Hello! 你好啊世界&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
">LVGL生成和更换字体</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/shi-yong-lv_font_conv-gong-ju-sheng-cheng-lvgl-zi-ti/"" data-c="
          &lt;p&gt;操作步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;下载lv_font_conv代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;https://github.com/lvgl/lv_font_conv.git
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装lv_font_conv&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd lv_font_conv
sudo npm i lv_font_conv -g	# 根据提示可能需要更新npm到指定版本
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行lv_font_conv&lt;/p&gt;
&lt;p&gt;参考&lt;a href=&#34;https://yuanze.wang/posts/lvgl-chinese-font-in-bin/&#34;&gt;将LVGL的中文字体编译为文件写入Flash中并读取&lt;/a&gt;, 下载字体&lt;a href=&#34;https://www.fonts.net.cn/fonts-zh-1.html&#34;&gt;字体天下&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;lv_font_conv --bpp 4 --size 19 -o sh_19.c --font FangZhengHeiTiJianTi-1.ttf --format lvgl --no-kerning --no-prefilter --range 0x20-0xBF --range 0x3000-0x3011 --range 0x4E00-0x9FAF --range 0xFF00-0xFF64
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;--bpp&lt;/code&gt;参数指定生成的字体中，1个显示像素使用多少字体像素。当此参数大于1时，代表启用灰度抗锯齿，字体的边缘将更加清晰，但是会占用更大的空间。为了显示效果，建议使用4像素抗锯齿。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--size&lt;/code&gt;参数指定生成字体的高度，可根据需要自行选择。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--format&lt;/code&gt;参数指定生成字体的格式，共有&lt;code&gt;lvgl&lt;/code&gt;与&lt;code&gt;bin&lt;/code&gt;两种格式可选，分别对应生成&lt;code&gt;.c&lt;/code&gt;格式与&lt;code&gt;.bin&lt;/code&gt;格式的字体。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--no-kerning&lt;/code&gt;参数用于关闭字体可变间距的功能。此功能在汉字显示过程中效果不明显，且会带来额外的查表时间并占用更多的存储空间，建议关闭。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--font&lt;/code&gt;参数用于指定使用的字体文件。其后所接的所有&lt;code&gt;--range&lt;/code&gt;参数与&lt;code&gt;--symbols&lt;/code&gt;参数均只对此字体起效，直到出现下一个&lt;code&gt;--font&lt;/code&gt;参数之前。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--range&lt;/code&gt;参数用于指定要添加进入字体的&lt;a href=&#34;https://www.ssec.wisc.edu/~tomw/java/unicode.html&#34;&gt;Unicode字符范围&lt;/a&gt;，可以重复使用以指定多个范围。在本例中，&lt;code&gt;0x20-0xBF&lt;/code&gt;包含所有ASCII字符与一些增补字符（例如&lt;code&gt;©&lt;/code&gt;），&lt;code&gt;0x3000-0x3011&lt;/code&gt;包含一些CJK括号（例如&lt;code&gt;《&lt;/code&gt; &lt;code&gt;【&lt;/code&gt;等），&lt;code&gt;0x4E00-0x9FAF&lt;/code&gt;包含所有简体繁体与日文汉字，&lt;code&gt;0xFF00-0xFF64&lt;/code&gt;包含全角英文数字与标点（例如&lt;code&gt;、&lt;/code&gt; &lt;code&gt;０&lt;/code&gt;）等。在此基础上，还可以根据需要自行添加或删除字体。下表包含了一些常用的Unicode字符范围。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;编码范围&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;字符数量&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;编码内容&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x0020-0x007F&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;96&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ASCII码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x0080-0x00BF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;64&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ASCII码增补（&lt;code&gt;™&lt;/code&gt; &lt;code&gt;©&lt;/code&gt;）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x2600-0x26FF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;256&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;各种符号（&lt;code&gt;☆&lt;/code&gt; &lt;code&gt;♂&lt;/code&gt; &lt;code&gt;♫&lt;/code&gt; &lt;code&gt;♡&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x3000-0x301F&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;32&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;CJK符号（&lt;code&gt;《&lt;/code&gt; &lt;code&gt;【&lt;/code&gt;）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x3040-0x309F&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;94&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;日文平假名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x30A0-0x30FF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;94&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;日文片假名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0x4E00-0x9FAF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;20902&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;所有简体、繁体、日文汉字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0xAC00-0xD7A3&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;11172&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;韩文音节&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0xFF00-0xFF64&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;100&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;全角英文数字与标点&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ol&gt;
">使用lv_font_conv工具生成lvgl字体</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/linux-ying-yong-framebuffer-cao-zuo-xian-shi-ping/"" data-c="
          &lt;h2 id=&#34;一-简述&#34;&gt;一、简述&lt;/h2&gt;
&lt;p&gt;​	Linux framebuffer框架可以让上层程序通过操作内存（称为帧缓存）的方式来向显示屏读/写显示数据。framebuffer还支持双缓存，用一个帧填充显示数据，另一个帧显示，然后交换彼此的功能，一般用来应用于高频率显示的场景。&lt;/p&gt;
&lt;p&gt;​	需要注意有些平台的framebuffer会自动将数据刷新到显示屏上，也有部分需要调用ioctl(fp, FBIOPAN_DISPLAY, &amp;amp;vinfo)参数才能刷新显示屏的数据。&lt;/p&gt;
&lt;h2 id=&#34;二-应用&#34;&gt;二、应用&lt;/h2&gt;
&lt;p&gt;​	应用层一般通过操作文件的方式来操作framebuffer，一般framebuffer文件格式为/dev/fbx,下面的例子中操作的framebuffer的文件名为&lt;code&gt;/dev/fb0&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;​	下面的操作会从&lt;code&gt;/dev/fb0&lt;/code&gt;读取当前显示屏的参数，然后通过mmap将显示区域映射到一个指针，这个指针指向了一块内存，读写这块内存的数据就等同于写入/读取显示屏的数据，非常简单。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;sys/mman.h&amp;quot;
#include &amp;quot;sys/ioctl.h&amp;quot;
#include &amp;quot;linux/fb.h&amp;quot;
#include &amp;quot;fcntl.h&amp;quot;
#include &amp;quot;stdio.h&amp;quot;
#include &amp;quot;stdlib.h&amp;quot;
#include &amp;quot;stdint.h&amp;quot;
#include &amp;quot;unistd.h&amp;quot;

int main ()   
{  
    int fp=0;  
    struct fb_var_screeninfo vinfo;  
    struct fb_fix_screeninfo finfo;  
    long screensize=0;  
    char *fbp = NULL;    

    /* 读/写的方式打开framebuffer的设备文件 */
    fp = open(&amp;quot;/dev/fb0&amp;quot;, O_RDWR);  
    if(fp &amp;lt; 0) {  
        printf(&amp;quot;Error : Can not open framebuffer device/n&amp;quot;);  
        exit(1);  
    }

    /* 获取硬件决定的显示参数（这部分参数不能被修改） */
    if(ioctl(fp, FBIOGET_FSCREENINFO, &amp;amp;finfo)){  
        printf(&amp;quot;Error reading fixed information/n&amp;quot;);  
        exit(2);  
    }  

    /* 获取软件决定的显示参数（这部分参数可以由用户修改） */
    if(ioctl(fp, FBIOGET_VSCREENINFO, &amp;amp;vinfo)){  
        printf(&amp;quot;Error reading variable information/n&amp;quot;);  
        exit(3);  
    }  

    /* 获取一些显示参数 */
    screensize = vinfo.xres * vinfo.yres * vinfo.bits_per_pixel / 8;  
    printf(&amp;quot;The phy mem = 0x%x, total size = %d(byte)\n&amp;quot;, (int)finfo.smem_start, (int)finfo.smem_len);  
    printf(&amp;quot;xres =  %d, yres =  %d, bits_per_pixel = %d\n&amp;quot;, vinfo.xres, vinfo.yres, vinfo.bits_per_pixel);  
    printf(&amp;quot;So the screensize = %d(byte), using %d frame\n&amp;quot;, (int)screensize, (int)(finfo.smem_len/screensize));
    printf(&amp;quot;vinfo.xoffset = %d, vinfo.yoffset = %d\n&amp;quot;, vinfo.xoffset, vinfo.yoffset);  
    printf(&amp;quot;vinfo.vmode is :%d\n&amp;quot;, vinfo.vmode);  
    printf(&amp;quot;finfo.ypanstep is :%d\n&amp;quot;, finfo.ypanstep);  
    printf(&amp;quot;vinfo.red.offset=0x%x\n&amp;quot;, vinfo.red.offset);
    printf(&amp;quot;vinfo.red.length=0x%x\n&amp;quot;, vinfo.red.length);
    printf(&amp;quot;vinfo.green.offset=0x%x\n&amp;quot;, vinfo.green.offset);
    printf(&amp;quot;vinfo.green.length=0x%x\n&amp;quot;, vinfo.green.length);
    printf(&amp;quot;vinfo.blue.offset=0x%x\n&amp;quot;, vinfo.blue.offset);
    printf(&amp;quot;vinfo.blue.length=0x%x\n&amp;quot;, vinfo.blue.length);
    printf(&amp;quot;vinfo.transp.offset=0x%x\n&amp;quot;, vinfo.transp.offset);
    printf(&amp;quot;vinfo.transp.length=0x%x\n&amp;quot;, vinfo.transp.length);
    
    /* 将显示内存映射出来，从这里开始，就可以通过操作fbp指向的内存来操作显示屏了 */
    fbp =(char *)mmap(0, screensize, PROT_READ | PROT_WRITE, MAP_SHARED, fp,0);  
    if ((int)fbp == -1)  
    {    
        printf (&amp;quot;Error: failed to map framebuffer device to memory.\n&amp;quot;);  
        exit (4);  
    }
    printf(&amp;quot;Get virt mem = %p\n&amp;quot;, fbp);  

    /* 显示一块长宽为SHOW_SIZE的区域(每像素4字节的情况) */
    #define SHOW_SIZE   (128)
    for (int i = 0; i &amp;lt; (int)vinfo.yres; i ++)
    {
        uint8_t *line = (uint8_t *)fbp + i * vinfo.xres * 4;
        for (int j = 0; j &amp;lt; (int)vinfo.xres; j ++)
        {
            line[j * 4] = 0x00;         // b
            line[j * 4 + 1] = 0x00;     // g
            line[j * 4 + 2] = 0xFF;     // r
            line[j * 4 + 3] = 0xFF;
        }
    }

    /* 刷新显示（有些framebuffer实现了自刷新，就可以不调用这个api） */
    ioctl(fp, FBIOPAN_DISPLAY, &amp;amp;vinfo);

	/* 解除映射 */
    munmap(fbp, screensize);
    
    /* 关闭fb驱动设备 */
    close (fp);
}  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;​	根据上面的代码操作，就能实现通过framebuffer操作显示屏了，当然显示数据的写入方式和显示效果就是另一回事了。这里总结一下上面的流程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;打开framebuffer设备文件，一般是/dev/fb0&lt;/li&gt;
&lt;li&gt;通过ioctl()获取显示屏的参数&lt;/li&gt;
&lt;li&gt;通过mmap()将显示内存映射到一个指针fbp上&lt;/li&gt;
&lt;li&gt;向这个指针fbp指向的内存读/写数据，相当于操作显示屏的显示&lt;/li&gt;
&lt;li&gt;需要关闭时，使用munmap()解除映射并关闭设备文件&lt;/li&gt;
&lt;/ul&gt;
">Linux应用-framebuffer操作显示屏</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/linux-ying-yong-shi-yong-i2c-tools-gong-ju-ce-shi-i2c/"" data-c="
          &lt;p&gt;i2c-tools命令是一套简单的i2c工具，可以在编写i2c应用或者驱动时用来测试i2c，也可以直接用来操作i2c设备。&lt;/p&gt;
&lt;h2 id=&#34;i2cdetect命令&#34;&gt;i2cdetect命令&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;i2cdetect -l 	# 获取系统支持的i2c总线
i2cdetect -y 1	# 检测i2c-1的挂载情况
i2cdetect -y 0	# 检测i2c-0的挂载情况
例如：
root@sipeed:~# i2cdetect -y 4
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- 2c -- -- --
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
50: -- UU -- -- -- -- -- -- -- -- -- -- -- -- -- --
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
70: -- -- -- -- -- -- 76 --
# 上面表示i2c-4的0x2c、0x51和0x76地址挂载了一个设备，显示UU表示该地址被驱动占用了但并没有设备存在。
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;i2cdump命令&#34;&gt;i2cdump命令&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;i2cdump -y -f 4 0x2c	# 获取i2c-4 地址0x2c设备的寄存器数据
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;i2cget命令&#34;&gt;i2cget命令&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;i2cget -y -f 4 0x2c 0x02	# 获取i2c-4 地址0x02c设备的寄存器0x02的数据
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;i2cset命令&#34;&gt;i2cset命令&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;i2cset -y -f 4 0x2c 0x02 0x05 # 设置i2c-4 地址0x2c设备的寄存器0x02的值为0x05
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;参考文章：&lt;br&gt;
&lt;a href=&#34;https://my.oschina.net/luoly/blog/368881&#34;&gt;Android 平台下使用 i2c-tools&lt;/a&gt;&lt;/p&gt;
">Linux应用-使用i2c-tools工具测试i2c</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/iou-ji-suan/"" data-c="
          &lt;p&gt;在目标检测当中，有一个重要的概念就是 IOU。一般指代模型预测的 bbox 和 Groud Truth 之间的交并比。交并比是指两张图片交集部分与两张图片的并集部分相比的值，即(P1 ∩ P2)/(P1 ∪ P2)&lt;/p&gt;
&lt;p&gt;计算IOU总结为：两张图片相交部分面积除以两张图片叠加后的总面积(图片叠加后重叠的部分只计算一次)&lt;/p&gt;
&lt;p&gt;IOU代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;typedef struct
{
  int32_t x;
  int32_t y;
} mf_point_t;


/**
 * @brief 计算IOU(只考虑了两张图片不旋转的情况)
 * @details
 *                               x
 *                               |
 *                               |____ y  (注意坐标轴是颠倒的)
 *       _________B(x,y)
 *      |         |
 *      |     ____|F(x,y)___D(x,y)
 *      |    |    |         |
 *      |    |    |         |
 *      |____|____|         |
 *  A(x,y)   |E(x,y)        |
 *           |______________|
 *          C(x,y)
 * 
 * 交集：a = (B(y) - C(y)) * (D(x) - A(x))
 * 并集：b = 两个图片面积之和 - a
 * 计算IOU: res = a / b 
 * @param 
 * @return 返回IOU值
*/
static double _caculate_face_iou(face_obj_t *rgb_face, face_obj_t *ir_face)
{
    if (rgb_face == NULL || ir_face == NULL)    return 0;

    /* 坐标映射 */
    mf_point_t A = {.x = rgb_face-&amp;gt;x1,.y = rgb_face-&amp;gt;y1};
    mf_point_t B = {.x = rgb_face-&amp;gt;x2,.y = rgb_face-&amp;gt;y2};
    mf_point_t C = {.x = ir_face-&amp;gt;x1,.y = ir_face-&amp;gt;y1}; // 手动映射
    mf_point_t D = {.x = ir_face-&amp;gt;x2,.y = ir_face-&amp;gt;y2};  // 手动映射
    mf_point_t E,F;
    E.x = (C.x &amp;lt;= B.x &amp;amp;&amp;amp; C.x &amp;gt;= A.x) ? C.x : A.x;
    E.y = (C.y &amp;lt;= B.y &amp;amp;&amp;amp; C.y &amp;gt;= A.y) ? C.y : A.y;
    F.x = (D.x &amp;lt;= B.x &amp;amp;&amp;amp; D.x &amp;gt;= A.x) ? D.x : B.x;
    F.y = (D.y &amp;lt;= B.y &amp;amp;&amp;amp; D.y &amp;gt;= A.y) ? D.y : B.y;
#if 0
    printf(&amp;quot;A:(%d,%d)  B:(%d,%d)\n&amp;quot;, A.x, A.y, B.x, B.y);
    printf(&amp;quot;C:(%d,%d)  D:(%d,%d)\n&amp;quot;, C.x, C.y, D.x, D.y);
    printf(&amp;quot;E:(%d,%d)  F:(%d,%d)\n&amp;quot;, E.x, E.y, F.x, F.y);
#endif

    /* 交集部分 */
    int32_t a = abs(F.y - E.y) * abs(F.x - E.x);

    /* 并集部分 */
    int32_t rgb_area = abs(B.y - A.y) * abs(B.x - A.x);
    int32_t ir_area = abs(D.y - C.y) * abs(D.x - C.x);
    int32_t b = abs(rgb_area) + abs(ir_area) - a;

    /* 计算iou */
    if (b == 0 || a &amp;gt; b)  return 0;
    double res = (double)a / (double)b;

#if 0
    printf(&amp;quot;IOU res: %f\n&amp;quot;, res);
#endif
    return res;
}
&lt;/code&gt;&lt;/pre&gt;
">IOU计算</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/gdb-diao-shi/"" data-c="
          &lt;h4 id=&#34;gdb调试常用命令&#34;&gt;GDB调试常用命令&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/b7896e9afeb7&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// 部分指令
file &amp;lt;file-name&amp;gt;    加载需要调试的程序
attach &amp;lt;pid&amp;gt;        关联指定进程id
help &amp;lt;cmd&amp;gt;          查看指定命令说明

r                   运行程序，直到断点
c                   继续运行程序，直到断点
b &amp;lt;line&amp;gt;            断点
b &amp;lt;func&amp;gt;            断点
b *&amp;lt;code_addr&amp;gt;      断点
d [id]              删除断点
si                  执行一行代码
ni                  执行一行代码，函数也会当成是一行
p $pc               显示pc的值
x/10i $pc           查看pc指向的地址后10行的汇编代码
display /i $pc      每次执行命令后，显示下一条汇编命令
undisplay &amp;lt;id&amp;gt;      取消display的显示
call &amp;lt;函数名&amp;gt;        跳转到目标函数的位置
q                   退出gdb
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;使用平头哥t-head-debug调试工具&#34;&gt;使用平头哥T-HEAD Debug调试工具&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://occ.t-head.cn/document?temp=console-edition-t-head-debugserver&amp;amp;slug=t-head-debug-server-user-manual&#34;&gt;T-HEAD Debug Server 用户手册&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;基本调试环境的搭建可以参考&lt;a href=&#34;https://occ.t-head.cn/document?temp=linux&amp;amp;slug=t-head-debug-server-user-manual&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&#34;1-t-head-debugserver-安装步骤&#34;&gt;1. T-Head DebugServer 安装步骤&lt;/h5&gt;
&lt;p&gt;1、在进行安装过程中，用户需要获得 sudo 权限。&lt;/p&gt;
&lt;p&gt;2、通过命令 &lt;code&gt;chmod+x&lt;/code&gt; 增加安装包的执行权限。&lt;/p&gt;
&lt;p&gt;3、执行 &lt;code&gt;sudo ./T-Head-DebugServer-linux-*.sh –i&lt;/code&gt; 开始安装。&lt;/p&gt;
&lt;p&gt;4、给出提示 “Do you agree to install the DebugServer[yes/no]”，输入 “yes”。&lt;/p&gt;
&lt;p&gt;5、系统提示设置安装路径 “Set full installing path:”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装到用户指定目录：用户输入安装路径（绝对路径），安装会给出提示“This software will be installed to the path:（用户输入的路径）？[yes/no/cancel]:”，确认路径无误，输入“yes”并按下回车键。此时安装包将进行安装，安装完成后将提示：&lt;/p&gt;
&lt;p&gt;“Done！&lt;/p&gt;
&lt;p&gt;You can use command “DebugServerConsole” to start DebugServerConsole！&lt;/p&gt;
&lt;p&gt;(NOTE：The full path of ‘DebugServerConsole.elf’ is 用户输入的路径/T-Head_DebugServer) ”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;默认路径安装：直接按回车，那么会给出提示“This software will be installed to the default path: (/usr/bin/)?[yes/no/cancel]:”，用户输入 “yes”，软件会安装到默认路径“/usr/bin/”目录下。安装完成后提示：&lt;/p&gt;
&lt;p&gt;“Done ！&lt;/p&gt;
&lt;p&gt;You can use command “DebugServerConsole” to start DebugServerConsole！&lt;/p&gt;
&lt;p&gt;(NOTE：The full path of ‘DebugServerConsole.elf’ is /usr/bin/T-Head_DebugServer) ”&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;2-连接t-head-debugserver到目标开发板&#34;&gt;2. 连接T-Head DebugServer到目标开发板&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;连接JTAG线到开发板，运行T-Head DebugServer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;DebugServerConsole
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意：如果JTAG未连接到开发板，则T-Head DebugServer会打开失败&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;准备待调试的可执行文件(ELF格式，编译时需要注意添加-g选项来保存符号名)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行工具链的gdb命令打开可执行文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;riscv64-unknown-elf-gdb ../../../../M1s_BL808_example/e907_app/build_out/firmware.elf
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在gdb的窗口中输入 T-Head DebugServer 界面上的提示的GDB 连接命令&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;(gdb) target remote 127.0.0.1:1025
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;开始进行gdb调试&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;load                     #下载程序至开发板
break main               #在 main 函数处设置断点
continue                 #运行程序
info registers r0        #查看寄存器 r0
print var_a              #查看程序变量 var_a
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
">gdb调试</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/fatfs-wen-jian-xi-tong-de-yi-zhi/"" data-c="
          &lt;p&gt;参考文章:&lt;br&gt;
&lt;a href=&#34;https://www.sunev.cn/embedded/943.html&#34;&gt;FatFs文件系统结构分析（强烈推荐）&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://elm-chan.org/docs/fat_e.html&#34;&gt;FAT Filesystem&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fatfs文件系统的移植主要关注diskio.c文件和ffconf.h文件,需要在diskio.c文件里写好操作磁盘的接口,在ffconf.h文件配置Fatfs.下面是我在Linux环境下,用文件代替Flash移植的Fatfs文件系统.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;diskio.c&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** diskio.c文件 */
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;sys/stat.h&amp;gt;
#include &amp;lt;fcntl.h&amp;gt;
#define DISK_FILE_SIZE  (1024 * 1024 * 5)      // Flash总容量
const char *disk_file = &amp;quot;fatfs_vdisk&amp;quot;;
#define PRINF_HEX_ARR(str,buf,len)\
do{\
    char *buff = (char *)buf;\
    printf(&amp;quot;\e[32m[%s](%d):\e[0m&amp;quot;, str, len);\
    for (int i = 0;i &amp;lt; len; ++i)\
    {\
        printf(&amp;quot;0x%.2X &amp;quot;, buff[i] &amp;amp; 0xff);\
    }\
    printf(&amp;quot;\r\n&amp;quot;);\
} while (0);

DSTATUS disk_status (
	BYTE pdrv		/* Physical drive nmuber to identify the drive */
)
{
	DSTATUS stat = RES_OK;

    printf(&amp;quot;Get disk status:%d\n&amp;quot;, stat);

	return stat;
}

DSTATUS disk_initialize (
	BYTE pdrv				/* Physical drive nmuber to identify the drive */
)
{
	DSTATUS stat;

    if (access(disk_file, F_OK))
    {
        printf(&amp;quot;Create file %s\n&amp;quot;, disk_file);
        creat(disk_file, 0666);
    }
    stat = RES_OK;

	return stat;
}

DRESULT disk_read (
	BYTE pdrv,		/* Physical drive nmuber to identify the drive */
	BYTE *buff,		/* Data buffer to store read data */
	LBA_t sector,	/* Start sector in LBA */
	UINT count		/* Number of sectors to read */
)
{
	DRESULT res;

    printf(&amp;quot;pdrv:%d sector:%d  count:%d&amp;quot;, pdrv, sector, count);
    if (!access(disk_file, F_OK))
    {
        int fd = open(disk_file, O_RDWR);
        if (fd)
        {
            lseek(fd, FF_MIN_SS * sector, SEEK_SET);
            int len = read(fd, buff, FF_MIN_SS * count);
            printf(&amp;quot;\e[32m[%s](%d):\e[0m&amp;quot;, &amp;quot;read&amp;quot;, len);
            for (int i = 0;i &amp;lt; len; ++i)
            {
                printf(&amp;quot;0x%.2X &amp;quot;, buff[i] &amp;amp; 0xff);
            }
            printf(&amp;quot;\r\n&amp;quot;);
            close(fd);
        }
    }
    res = RES_OK;

	return res;
}

DRESULT disk_write (
	BYTE pdrv,			/* Physical drive nmuber to identify the drive */
	const BYTE *buff,	/* Data to be written */
	LBA_t sector,		/* Start sector in LBA */
	UINT count			/* Number of sectors to write */
)
{
	DRESULT res;

    printf(&amp;quot;pdrv:%d sector:%d  count:%d&amp;quot;, pdrv, sector, count);
    if (!access(disk_file, F_OK))
    {
        int fd = open(disk_file, O_RDWR);
        if (fd)
        {
            lseek(fd, FF_MIN_SS * sector, SEEK_SET);
            int len = write(fd, buff, count * FF_MIN_SS);

            printf(&amp;quot;write:%s\n&amp;quot;, buff);
            printf(&amp;quot;\e[32m[%s](%d):\e[0m&amp;quot;, &amp;quot;write&amp;quot;, len);
            for (int i = 0;i &amp;lt; len; ++i)
            {
                printf(&amp;quot;0x%.2X &amp;quot;, buff[i] &amp;amp; 0xff);
            }
            printf(&amp;quot;\r\n&amp;quot;);

            close(fd);
        }
    }
    res = RES_OK;

	return res;
}

DRESULT disk_ioctl (
	BYTE pdrv,		/* Physical drive nmuber (0..) */
	BYTE cmd,		/* Control code */
	void *buff		/* Buffer to send/receive control data */
)
{
	DRESULT res = RES_OK;

    printf(&amp;quot;disk ioctl,pdrv:%d cmd:%d\n&amp;quot;, pdrv, cmd);

    int fd = -1;
    if (!access(disk_file, F_OK))
        fd = open(disk_file, O_RDWR);
    if (fd &amp;lt; 0) return RES_NOTRDY;

    switch (cmd)
    {
    case CTRL_SYNC:
        fsync(fd);
        break;
    case GET_SECTOR_COUNT:
        *(DWORD *)buff = DISK_FILE_SIZE / 512;
        break;
    case GET_SECTOR_SIZE:
        *(WORD *)buff = FF_MIN_SS;
        break;
    case GET_BLOCK_SIZE:
        *(WORD *)buff = 8;
        break;
    default:
        res = RES_PARERR; 
        break;
    }
    
    if (fd)
        close(fd);

	return res;
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ffconf.h文件&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** 下面只写了修改的部分 */
#define FF_USE_MKFS		    1   // 使能f_mkfs API(因为需要主动将Linux的新文件格式化为FAT文件系统)
#define FF_MULTI_PARTITION	1   // 使用多个逻辑盘
#define FF_VOLUMES		    5   // 创建了5个逻辑盘
#define FF_STR_VOLUME_ID	2   // 创建了2个分区

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ff.c文件&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** 如果使能了FF_MULTI_PARTITION宏,则还需要创建一个PARTITION结构体来配置分区信息 */
PARTITION VolToPart[FF_VOLUMES] = { 
    {0, 1},     /* &amp;quot;0:&amp;quot; 内部flash, 分区1 板级配置信息 */ 
    {0, 2},     /* &amp;quot;1:&amp;quot; 内部flash，分区2 人脸数据库*/ 
    {0, 3},     /* &amp;quot;2:&amp;quot; 内部flash，分区3 资源文件和其他数据*/
    {1, 1},     /* &amp;quot;3:&amp;quot; 外部flash，分区1 数据区 */
    {1, 2},     /* &amp;quot;4:&amp;quot; 外部flash，分区2 数据区 */
    {2, 0}      /* &amp;quot;5:&amp;quot; 可移动磁盘，注意如果有多个卷，移动磁盘前必须卸载这些卷 */
};

/** 分析上述数组,一共有编号为0,1,2的3个分区,这个分区编号对应于API中的pdrv参数.其中0分区又划分了1,2,3共3个逻辑盘,注意最多划分1-4个逻辑盘.1分区划分了1,2共2个逻辑盘.2分区的逻辑盘编号设置为0表示自动分配,一般用于可移动磁盘 */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;测试代码(TODO:整理代码)&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;int main(void)
{
    printf(&amp;quot;libfatfs test\n&amp;quot;);

#if 0
    /** 测试读写文件是否正常 */
    const char *disk_file = &amp;quot;fatfs_vdisk&amp;quot;;
    int sector = 0, count = 1;
    if (!access(disk_file, F_OK))
    {
        int fd = open(disk_file, O_RDWR);
        if (fd)
        {
            uint8_t buff0[128] = &amp;quot;1234566&amp;quot;;
            lseek(fd, FF_MIN_SS * sector, SEEK_SET);
            int len0 = write(fd, buff0, sizeof(buff0));

            uint8_t buff[128] = &amp;quot;&amp;quot;;
            lseek(fd, FF_MIN_SS * sector, SEEK_SET);
            int len = read(fd, buff, sizeof(buff));

            printf(&amp;quot;\e[32m[%s](%d):\e[0m&amp;quot;, &amp;quot;read&amp;quot;, len);
            for (int i = 0;i &amp;lt; len; ++i)
            {
                printf(&amp;quot;0x%.2X &amp;quot;, buff[i] &amp;amp; 0xff);
            }
            printf(&amp;quot;\r\n&amp;quot;);

            close(fd);
        }
    }

    return 0;
#endif
    FATFS fs;
    FIL fil;
    FRESULT res;

    /**配置磁盘，需要搭配VolToPart来配置。VolToPort是由用户定义的磁盘映射表 
    // PARTITION VolToPart[FF_VOLUMES] = { 
    //     {0, 1},     /* &amp;quot;0:&amp;quot; 内部flash, 分区1 板级配置信息 */ 
    //     {0, 2},     /* &amp;quot;1:&amp;quot; 内部flash，分区2 人脸数据库*/ 
    //     {0, 3},     /* &amp;quot;2:&amp;quot; 内部flash，分区3 资源文件和其他数据*/
    //     {1, 1},     /* &amp;quot;3:&amp;quot; 外部flash，分区1 数据区 */
    //     {1, 2}      /* &amp;quot;4:&amp;quot; 外部flash，分区2 数据区 */
    // };
    BYTE work[FF_MAX_SS];
    LBA_t plist[] = {20, 20, 100, 0};    /* 定义逻辑盘的分区大小。小于等于100时表示百分比，大于100表示扇区数，最后一位为0作为结尾 */
    res = f_fdisk(0, plist, work);
    printf(&amp;quot;f_fdisk res:%d\n&amp;quot;, res);
    // PRINF_HEX_ARR(&amp;quot;work&amp;quot;, work, sizeof(work));
    _read_mbr();
    
    #define BRDCFG_PATH         &amp;quot;0:&amp;quot;
    // #define FACEDB_PATH         &amp;quot;b&amp;quot;
    // #define RESOURCE_PATH       &amp;quot;c&amp;quot;
    res = f_mkfs(BRDCFG_PATH, 0, work, sizeof(work));
    printf(&amp;quot;f_mkfs %s res:%d\n&amp;quot;, BRDCFG_PATH, res);
    // res = f_mkfs(FACEDB_PATH, 0, work, sizeof(work));
    // printf(&amp;quot;f_mkfs %s res:%d\n&amp;quot;, FACEDB_PATH, res);
    // res = f_mkfs(RESOURCE_PATH, 0, work, sizeof(work));
    // printf(&amp;quot;f_mkfs %s res:%d\n&amp;quot;, RESOURCE_PATH, res);

    // #define ROOT_PATH1   &amp;quot;/1&amp;quot;
    // res = f_mkfs(ROOT_PATH1, 0, work, sizeof(work));
    // printf(&amp;quot;f_mkfs / res:%d\n&amp;quot;, res);

    fs.fs_type = FS_FAT32;
    res = f_mount(&amp;amp;fs, BRDCFG_PATH, 1);
    printf(&amp;quot;f_mount 0: res:%d\n&amp;quot;, res);

    // res = f_mount(&amp;amp;fs, ROOT_PATH1, 1);
    // printf(&amp;quot;f_mount /1 res:%d\n&amp;quot;, res);
    _read_mbr();
    _read_dbr();
#if 0
    {
        FIL fp;
        res = f_open(&amp;amp;fp, &amp;quot;0:a&amp;quot;, FA_CREATE_NEW | FA_WRITE | FA_READ);
        if (!fp.obj.fs)
            printf(&amp;quot;fp obj fs is NULL\n&amp;quot;);
        printf(&amp;quot;f_open res:%d\n&amp;quot;, res);

        int bw;
        res = f_write(&amp;amp;fp, &amp;quot;123456789&amp;quot;, strlen(&amp;quot;123456789&amp;quot;), &amp;amp;bw);
        printf(&amp;quot;write data(%d)  f_write res:%d\n&amp;quot;, bw, res);

        res = f_sync(&amp;amp;fp);
        printf(&amp;quot;f_sync res:%d\n&amp;quot;, res);

        uint8_t read_buff[100];
        int br;
        f_lseek(&amp;amp;fp, 0);

        res = f_read(&amp;amp;fp, read_buff, sizeof(read_buff), &amp;amp;br);
        printf(&amp;quot;read 0:a data(%d):%s  f_read res:%d\n&amp;quot;, br, read_buff, res);

        f_close(&amp;amp;fp);
    }
#endif

#if 0
    {
        FIL fp;
        res = f_open(&amp;amp;fp, &amp;quot;b&amp;quot;, FA_CREATE_NEW | FA_WRITE | FA_READ);
        if (!fp.obj.fs)
            printf(&amp;quot;fp obj fs is NULL\n&amp;quot;);
        printf(&amp;quot;f_open res:%d\n&amp;quot;, res);

        int bw;
        res = f_write(&amp;amp;fp, &amp;quot;123123123123&amp;quot;, strlen(&amp;quot;123123123123&amp;quot;), &amp;amp;bw);
        printf(&amp;quot;write data(%d)  f_write res:%d\n&amp;quot;, bw, res);

        res = f_sync(&amp;amp;fp);
        printf(&amp;quot;f_sync res:%d\n&amp;quot;, res);

        uint8_t read_buff[100];
        int br;
        f_lseek(&amp;amp;fp, 0);

        res = f_read(&amp;amp;fp, read_buff, sizeof(read_buff), &amp;amp;br);
        printf(&amp;quot;read 1:a data(%d):%s  f_read res:%d\n&amp;quot;, br, read_buff, res);

        f_close(&amp;amp;fp);
    }
#endif

    // printf(&amp;quot;\n\n\n&amp;quot;);
    // f_unmount(&amp;quot;&amp;quot;);

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Fatfs文件系统有主引导记录(MBR)和操作系统引导记录(DBR).通过MBR可以获取最多4个分区(逻辑盘)的位置和状态.每个分区都有一个DBR来记录当前分区的信息.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MBR一般保存在磁盘的第一个扇区,其内容如下&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/**
 * @brief MBR中分区的字段信息
*/
typedef struct
{
    uint8_t PT_BootID;  // 开机指示 0 不可启动，0x80 可启动。只能有一个分区可以设置为可启动
    uint8_t PT_StartHd; // CHS形式的分区起始扇区的头部编号[0,254]
    uint16_t PT_StartCySc;  // CHS形式的分区起始扇区的柱面号(bit9~bit0, 0~1023)和柱面中的扇区号(bit15~bit10, 1~63)
    uint8_t PT_System;  // 分区的类型。经典值：
                            /**
                             * 0x00, 空白分区。此时其他字段必须为0
                             * 0x01, FAT12(CHS/LBA &amp;lt;65536 sectors)
                             * 0x04, FAT16(CHS/LBA &amp;lt;65536 sectors)
                             * 0x05, 扩展分区(CHS/LBA)
                             * 0x06, FAT12/16(CHS/LBA &amp;gt;=65536 sectors)
                             * 0x07, HPFS/NTFS/exFAT(CHS/LBA)
                             * 0x0B, FAT32(CHS/LBA)
                             * 0x0C, FAT32(LBA)
                             * 0x0E, FAT12/16(LBA)
                             * 0x0F, 扩展分区(LBA)
                            */
    uint8_t PT_EndHd;       /* CHS形式分区的结束扇区的头部编号(0~254) */
    uint16_t PT_EndCySc;    /* CHS形式分区的结束扇区的柱面号(bit9~0， 0~1023)和柱面中的扇区号(bit15~10, 1~63) */
    uint32_t PT_LbaOfs;     /* 在32位LBA(1-0xFFFFFFFF)中分区起始扇区(引导扇区(DBR)位置) */
    uint32_t PT_LabSize;    /* 以扇区为单位的分区大小(1 - 0xFFFFFFFF) */
}__attribute__ ((packed)) MBR_Partation_t;

/**
 * @brief MBR字段
*/
typedef struct
{
    uint8_t MBR_bootcode[446];          // 引导程序。不使用时用0填充
    MBR_Partation_t MBR_Partation1;     // 分区表条目1，保存分区类型和状态，会指向该分区DBR的扇区位置
    MBR_Partation_t MBR_Partation2;
    MBR_Partation_t MBR_Partation3;
    MBR_Partation_t MBR_Partation4;
    uint16_t MBR_Sig;                    // 固定为0xAA55，表示这是有效的MBR
}__attribute__ ((packed)) MBR_t; 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通过MBR可以知道每个分区的位置,而DBR位于分区的第一个扇区,因此可以通过MBR获取到DBR的位置.&lt;/p&gt;
&lt;p&gt;Fatfs格式化后分为Fat12/16/32共3种文件系统,它们格式化后的分区DBR字段的含义有些区别.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DBR&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;
/**
 * @brief DBR中FAT12/16/32卷的公共字段(0-35字节)
*/
typedef struct
{
    uint8_t BS_JmpBoot[3];          /** 跳转指令，跳转到操作系统引导序列使用的引导代码(x86)，如果不符合格式，Windows会无法识别该卷
                                        格式1: 0xEB 0x?? 0x90   // Short jump + NOP
                                        格式2: 0xE9 0x?? 0x??   // Nearjunp
                                        其中??决定跳转的位置
                                    */
    uint8_t BS_OEMName[8];          /** 创建卷的系统的名称，常用&amp;quot;MSWIN4.1&amp;quot;或&amp;quot;MSDOS5.0&amp;quot; */
    uint16_t BPB_BytesPerSec;       /** 每扇区的字节数，有效值为512,1024,2048或4096 */
    uint8_t BPB_SecPerClus;         /** 每簇(块)的连续扇区数,有效值必须是2的幂次方。为了兼容性尽量不超过32KB */
    uint16_t BPB_RsvdSecCnt;        /** 保留区的扇区数。该字段不能为0，为了兼容性在FAT12/16卷上设为1，在FAT32卷上为32 */
    uint8_t BPB_NumFATs;            /** FAT数量。任何大于1的值都有效，一般设为2 */
    uint16_t BPB_RootEntCnt;        /** 根目录中32字节目录的数量。FAT16卷设置为512，FAT32卷必须设置为0 */
    uint16_t BPB_TotSec16;          /** 卷的扇区总数(2字节表示)。FAT12/16卷的扇区数超过该区域(&amp;gt;=0x10000)时，设置为0，并将实际值保存到BPB_TotSec32字段。FAT32卷必须设为0 */
    uint8_t BPB_Media;              /** 值必须为0xF0,0xF8~0xFF。0xF8是不可移动磁盘的标准，0xF0是非分区可移动磁盘。需要注意FAT[0]的低8位需要放入相同的值,这是由MS-DOS Ver.1的媒体决定 */
    uint16_t BPB_FATSz16;           /** 每个FAT的扇区数。此字段仅用于FAT12/16，对于FAT32卷必须是0 */
    uint16_t BPB_SecPerTrk;         /** 每个磁道的扇区数。此字段仅与具有几何形状且仅用于 IBM PC 的磁盘 BIOS 的介质相关 */
    uint16_t BPB_NumHeads;          /** 针头数。此字段仅与具有几何形状且仅用于 IBM PC 的磁盘 BIOS 的介质相关 */
    uint32_t BPB_HiddSec;           /** FAT卷前的隐藏物理扇区数 */
    uint32_t BPB_TotSec32;          /** 卷的扇区总数(4字节表示)。FAT12/16卷的扇区数&amp;lt;0x10000时，设置为0，并将实际值保存到BPB_TotSec16字段。FAT32卷该字段始终有效 */
}__attribute__((packed)) DBR_GLOBAL_t;         // FAT12/16/32的公共字段。注意任何以BPB_命令的字段是BPB的一部分，以BS_命名的字段只是引导扇区的一部分

/**
 * @brief DBR中FAT12/16卷的字段(从36字节开始偏移)
*/
typedef struct
{
    uint8_t BS_DrvNum;              /** 用于 MS-DOS 引导程序，0x00 用于软盘，0x80 用于固定磁盘。其实这取决于操作系统 */
    uint8_t BS_Reserved;            /** 保留，创建卷时设为0 */
    uint8_t BS_Sig;                 /** 扩展启动签名(0x29)，用来标志存在下面的三个字段 */
    uint32_t BS_VolID;              /** 与BS_VolLab一起使用的卷序列号，用来跟踪可移动存储的卷 */
    uint8_t BS_VolLab[11];           /** 与根目录中记录的卷匹配。 */
    uint8_t BS_FilSysType[8];       /** FAT类型，设为FAT12、FAT16或FAT。但一般不会用这个字段来判断FAT类型 */
    uint8_t BS_BootCode[448];       /** 引导程序。默认填充0 */
    uint16_t BS_BootSig;            /** 引导签名。固定0xaa55 */
}__attribute__((packed)) DBR_FAT1216_t;         // FAT12/16的字段(从36字节开始)。

/**
 * @brief DBR中FAT32卷的字段(从36字节开始偏移)
*/
typedef struct
{
    uint32_t BPB_FATSz32;           /** FAT的扇区数。FAT区域的大小为BPB_FATSz32 * BPB_NumFATs。这是确定FAT类型需要参考的字段 */
    uint16_t BPB_ExtFlags;          /** 指示FAT状态
                                        Bit3-0  从0开始的活动FAT。当bit7=1时有效
                                        Bit6-4  保留，默认填充0
                                        Bit7    表示每个FAT都处于活动状态。
                                        bit15-8 保留，默认填充0
                                     */
    uint16_t BPB_FSVer;             /** FAT32的版本。高字节是主要版本，低字节是次要版本 */
    uint32_t BPB_RootClus;          /** 根目录的第一个簇号。一般设为2，即卷的第一个簇 */
    uint16_t BPB_FSInfo;            /** 与 FAT32 卷顶部偏移的 FSInfo 结构扇区。它通常设置为 1，在引导扇区旁边 */
    uint16_t BPB_BkBootSec;         /** 与 FAT32 卷顶部偏移的备份引导扇区的扇区。它通常设置为 6，在引导扇区旁边，但不推荐使用 6 和任何其他值 */
    uint8_t BPB_Reserved[12];       /** 保留，默认填充0 */
    uint8_t BS_DrvNum;              /** 与FAT12/16字段描述相同 */
    uint8_t BS_Reserved;            /** 与FAT12/16字段描述相同 */
    uint8_t BS_BootSig;             /** 与FAT12/16字段描述相同 */
    uint32_t VolID;                 /** 与FAT12/16字段描述相同 */
    uint8_t VolLab[11];             /** 与FAT12/16字段描述相同 */
    uint8_t BS_FilSysType[8];       /** 文件系统类型。一般始终为&amp;quot;FAT32&amp;quot;，一般不会用此字段来判断文件类型 */
    uint8_t BS_BootCode32[420];     /** 引导程序。不使用时填充0 */
    uint16_t BS_BootSign;           /** 引导签名。固定0xaa55 */
}__attribute__((packed)) DBR_FAT32_t;           // FAT32的字段(从36字节开始)。

/**
 * @brief DBR字段
*/
typedef struct
{
    DBR_GLOBAL_t global;
    union
    {
        DBR_FAT1216_t fat1216;
        DBR_FAT32_t fat32;
    };
}__attribute__((packed)) DBR_t;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通过DBR字段就可以推断出FAT区和数据区的位置和大小了.&lt;/p&gt;
&lt;p&gt;一些打印信息来读取字段&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/**
 * @brief 打印MBR中指示分区的信息
*/
static void _print_mbr_partation(MBR_Partation_t *partation)
{
    if (!partation) return;

    printf(&amp;quot;PT_BootID(0 boot，1 not boot):%#x\n&amp;quot;
            &amp;quot;PT_StartHd():%#x\n&amp;quot;
            &amp;quot;PT_StartCySc:%#x   %#x(bit9-0: 0-1023)  %#x(bit15-10:1-63)\n&amp;quot;// 0000 0001
            &amp;quot;PT_System:%#x\n&amp;quot;
            &amp;quot;PT_EndHd:%#x\n&amp;quot;
            &amp;quot;PT_EndCySc:%#x\n&amp;quot;
            &amp;quot;PT_LbaOfs:%#x(%#x)\n&amp;quot;
            &amp;quot;PT_LabSize:%#x(%#x  %d kb)\n&amp;quot;,
            partation-&amp;gt;PT_BootID,
            partation-&amp;gt;PT_StartHd,
            partation-&amp;gt;PT_StartCySc, partation-&amp;gt;PT_StartCySc &amp;amp; 0x03FF, (partation-&amp;gt;PT_StartCySc &amp;amp; 0xFC00) &amp;gt;&amp;gt; 10,
            partation-&amp;gt;PT_System,
            partation-&amp;gt;PT_EndHd,
            partation-&amp;gt;PT_EndCySc,
            partation-&amp;gt;PT_LbaOfs, partation-&amp;gt;PT_LbaOfs * 512,
            partation-&amp;gt;PT_LabSize, partation-&amp;gt;PT_LabSize * 512, partation-&amp;gt;PT_LabSize * 512 / 1024);
}

/**
 * @brief 读取MBR字段
*/
static void _read_mbr(void)
{
    MBR_t mbr;
    disk_read(0, &amp;amp;mbr, 0, 1);

    printf(&amp;quot;MBR_bootcode:xxx\n&amp;quot;
            &amp;quot;MBR_Sig:%#x\n&amp;quot;, mbr.MBR_Sig);

    MBR_Partation_t *partation;
    printf(&amp;quot;分区1信息:\n&amp;quot;);
    _print_mbr_partation(&amp;amp;mbr.MBR_Partation1);
    printf(&amp;quot;分区2信息:\n&amp;quot;);
    _print_mbr_partation(&amp;amp;mbr.MBR_Partation2);
    printf(&amp;quot;分区3信息:\n&amp;quot;);
    _print_mbr_partation(&amp;amp;mbr.MBR_Partation3);
    printf(&amp;quot;分区4信息:\n&amp;quot;);
    _print_mbr_partation(&amp;amp;mbr.MBR_Partation4);
}

/**
 * @brief 读取DBR字段,在这里可以获取较详细的数据信息
*/
static void _read_dbr(void)
{
    DBR_t data;
    disk_read(0, &amp;amp;data, 63, 1);

    DBR_t *dbr = (DBR_t *)&amp;amp;data;

    int BPB_TotSec = dbr-&amp;gt;global.BPB_TotSec16 ? dbr-&amp;gt;global.BPB_TotSec16 : dbr-&amp;gt;global.BPB_TotSec32;
    int BPB_FATSz = dbr-&amp;gt;global.BPB_FATSz16 ? dbr-&amp;gt;global.BPB_FATSz16 : dbr-&amp;gt;fat32.BPB_FATSz32;


    /** FAT区偏移量和大小 */
    int FatStartSector = dbr-&amp;gt;global.BPB_RsvdSecCnt;                        /** FAT区起始扇区位置 */
    int FatSectors = BPB_FATSz * dbr-&amp;gt;global.BPB_NumFATs;                   /** FAT区占用扇区数 */
    printf(&amp;quot;FAT区数量:%d FAT区偏移量:%d  FAT区大小:%d  单位:扇区\n&amp;quot;, dbr-&amp;gt;global.BPB_NumFATs, FatStartSector, FatSectors);

    /** 根目录偏移量和大小(FAT32不存在根目录区，该位置会被数据区顶替) */
    int RootDirStartSector = FatStartSector + FatSectors;  
    int RootDirSector = 0;  
    if (dbr-&amp;gt;global.BPB_RootEntCnt)                                                               /** 根目录起始扇区 */
    {
        RootDirSector = (32 * dbr-&amp;gt;global.BPB_RootEntCnt + dbr-&amp;gt;global.BPB_BytesPerSec - 1) / dbr-&amp;gt;global.BPB_BytesPerSec;  /** 根目录占用扇区数 */
        printf(&amp;quot;根目录偏移量:%d  根目录大小:%d  单位:扇区\n&amp;quot;, RootDirStartSector, RootDirSector);
    }
    else
    {
        RootDirSector = 0;
        printf(&amp;quot;不存在根目录\n&amp;quot;);
    }


    /** 数据区偏移量和大小 */
    int DataStartSector = RootDirStartSector + RootDirSector;           /** 数据区起始扇区 */
    int DataSectors = BPB_TotSec - DataStartSector;                     /** 数据区扇区总数 */
    printf(&amp;quot;数据区偏移量:%d  数据区大小:%d  单位:扇区\n&amp;quot;, DataStartSector, DataSectors);

    /** 获取本卷上簇的数量 */
    int CountofClusters = DataSectors / dbr-&amp;gt;global.BPB_SecPerClus;
    printf(&amp;quot;卷内簇总数:%d\n&amp;quot;, CountofClusters);
    if (CountofClusters &amp;lt;= 4085)
    {
        printf(&amp;quot;卷类型:FAT12\n&amp;quot;);
    }
    else if (CountofClusters &amp;gt;= 4086 &amp;amp;&amp;amp; CountofClusters &amp;lt;= 65525)
    {
        printf(&amp;quot;卷类型:FAT16\n&amp;quot;);
    }
    else
    {
        printf(&amp;quot;卷类型:FAT32\n&amp;quot;);
    }

    /** 卷的扇区总数 */
    printf(&amp;quot;卷内扇区总数:%d 每扇区字节数:%d 卷总字节数:%dkb\n&amp;quot;, BPB_TotSec, dbr-&amp;gt;global.BPB_BytesPerSec, dbr-&amp;gt;global.BPB_BytesPerSec * BPB_TotSec / 1024);
    printf(&amp;quot;每簇扇区数:%d 每磁道扇区数:%d\n&amp;quot;, dbr-&amp;gt;global.BPB_SecPerClus, dbr-&amp;gt;global.BPB_SecPerTrk);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;FAT区&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.bthss.com/info/%E6%96%87%E4%BB%B6%E5%88%86%E9%85%8D%E8%A1%A8FAT%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%8A%E7%B1%BB%E5%88%AB.html&#34;&gt;文件分配表(FAT)及其结构_千金甜果的专栏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FAT区用来标识一个文件的簇数.FAT32的FAT区每个单元有4字节,其中FAT[0]表示FAT介质类型,FAT[1]表示FAT错误标志,从FAT[2]开始表示文件,每个FAT单元填入一个簇号(0x00000001-0xffffffef)代表一个簇,当该FAT单元的值为0xFFFFFFF8时表示文件末尾.因此可以推断从上个文件末尾到下一个文件末尾的FAT单元数量来推断出文件的大小(簇数).&lt;/p&gt;
&lt;p&gt;数据区(TODO)&lt;/p&gt;
">Fatfs文件系统的移植</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/elf-wen-jian/"" data-c="
          &lt;p&gt;&lt;strong&gt;内容出自&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-46512.html#scrolltoc&#34;&gt;这里&lt;/a&gt;，移出来是为了方便查阅。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;读ELF文件的所有符号&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;objdump -t xxx.elf
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;目标文件格式&#34;&gt;目标文件格式&lt;/h2&gt;
&lt;p&gt;本章介绍由汇编程序和链接编辑器生成的目标文件的可执行链接格式 (Excutable and Linking Format, ELF)。存在三种重要类型的目标文件。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;可重定位目标&lt;/strong&gt;文件包含代码节和数据节。此文件适合与其他可重定位目标文件链接，从而创建动态可执行文件、共享目标文件或其他可重定位目标文件。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;动态可执行&lt;/strong&gt;文件包含可随时执行的程序。此文件指定了 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN2exec-2&#34;&gt;&lt;code&gt;exec&lt;/code&gt;(2)&lt;/a&gt; 创建程序的进程映像的方式。此文件通常在运行时绑定到共享目标文件以创建进程映像。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;共享目标文件&lt;/strong&gt;文件包含适用于进行其他链接的代码和数据。链接编辑器可将此文件与其他可重定位目标文件和共享目标文件一起处理，以创建其他目标文件。运行时链接程序会将此文件与动态可执行文件和其他共享目标文件合并，以创建进程映像。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;程序可以使用 ELF 访问库 &lt;code&gt;libelf&lt;/code&gt; 所提供的函数来处理目标文件。有关 &lt;code&gt;libelf&lt;/code&gt; 内容的说明，请参阅 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN3Eelf-3elf&#34;&gt;&lt;code&gt;elf&lt;/code&gt;(3ELF)&lt;/a&gt;。&lt;code&gt;/usr/demo/ELF&lt;/code&gt; 目录下的 &lt;code&gt;SUNWosdem&lt;/code&gt; 软件包中提供了使用 &lt;code&gt;libelf&lt;/code&gt; 的源代码样例。&lt;/p&gt;
&lt;h2 id=&#34;文件格式&#34;&gt;文件格式&lt;/h2&gt;
&lt;p&gt;目标文件既参与程序链接，又参与程序执行。为了方便和提高效率，目标文件格式提供了文件内容的平行视图，以反映这些活动的不同需要。下图显示了目标文件的结构。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-1 目标文件格式&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/ObjFileFmt.png&#34; alt=&#34;image:目标文件格式。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ELF 头位于目标文件的起始位置，其中包含用于说明文件结构的&lt;strong&gt;指南&lt;/strong&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 只有 ELF 头在文件中具有固定位置。由于 ELF 格式的灵活性，不要求头表、节或段具有指定的顺序。但是，此图是 Oracle Solaris OS 中使用的典型布局。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;节&lt;/strong&gt;表示 ELF 文件中可以处理的最小不可分割单位。&lt;strong&gt;段&lt;/strong&gt;是节的集合。段表示可由 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN2exec-2&#34;&gt;&lt;code&gt;exec&lt;/code&gt;(2)&lt;/a&gt; 或运行时链接程序映射到内存映像的最小独立单元。&lt;/p&gt;
&lt;p&gt;节包含链接视图的批量目标文件信息。此数据包括指令、数据、符号表和重定位信息。本章的第一部分提供了各节的说明。本章的第二部分讨论了文件的各段及程序执行视图。&lt;/p&gt;
&lt;p&gt;程序头表（如果存在）指示系统如何创建进程映像。用于生成进程映像、可执行文件和共享目标文件的文件必须具有程序头表。可重定位目标文件无需程序头表。&lt;/p&gt;
&lt;p&gt;节头表包含说明文件各节的信息。每节在表中有一个与之对应的项。每一项都指定了节名称和节大小之类的信息。链接编辑过程中使用的文件必须具有节头表。&lt;/p&gt;
&lt;h2 id=&#34;数据表示形式&#34;&gt;数据表示形式&lt;/h2&gt;
&lt;p&gt;目标文件格式支持 8 位字节、32 位体系结构和 64 位体系结构的各种处理器。不过，数据表示形式最好可扩展为更大或更小的体系结构。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-6.html#chapter6-tbl-7&#34;&gt;表 12-1&lt;/a&gt; 和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-6.html#chapter6-tbl-7-1&#34;&gt;表 12-2&lt;/a&gt; 列出了 32 位数据类型和 64 位数据类型。&lt;/p&gt;
&lt;p&gt;目标文件表示格式与计算机无关的一些控制数据。此格式可提供目标文件的通用标识和解释。目标文件中的其余数据使用目标处理器的编码，无论在什么计算机上创建该文件都是如此。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-1 ELF 32 位数据类型&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;大小&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;对齐&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;目的&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf32_Addr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号程序地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf32_Half&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号中整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf32_Off&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号文件偏移&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf32_Sword&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;带符号整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf32_Word&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;unsigned char&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号小整数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;表 12-2 ELF 64 位数据类型&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;大小&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;对齐&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;目的&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Addr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号程序地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Half&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号中整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Off&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号文件偏移&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Sword&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;带符号整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Word&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Xword&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号长整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Elf64_Sxword&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;带符号长整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;unsigned char&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无符号小整数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;目标文件格式定义的所有数据结构都遵循相关类的自然大小和对齐规则。数据结构可以包含显式填充，以确保 4 字节目标的 4 字节对齐，从而强制结构大小为 4 的倍数，依此类推。数据在文件的开头也会适当对齐。例如，包含 &lt;code&gt;Elf32_Addr&lt;/code&gt; 成员的结构在文件中与 4 字节边界对齐。同样，包含 &lt;code&gt;Elf64_Addr&lt;/code&gt; 成员的结构与 8 字节边界对齐。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 为便于移植，ELF 不使用位字段。&lt;/p&gt;
&lt;h2 id=&#34;elf-头&#34;&gt;ELF 头&lt;/h2&gt;
&lt;p&gt;目标文件中的一些控制结构可以增大，因为 ELF 头包含这些控制结构的实际大小。如果目标文件格式发生变化，则程序可能会遇到大于或小于预期大小的控制结构。因此，程序可能会忽略额外的信息。这些忽略的信息的处理方式取决于上下文，如果定义了扩展内容，则会指定处理方式。&lt;/p&gt;
&lt;p&gt;ELF 头具有以下结构。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#define EI_NIDENT       16
 
typedef struct {
        unsigned char   e_ident[EI_NIDENT]; 
        Elf32_Half      e_type;
        Elf32_Half      e_machine;
        Elf32_Word      e_version;
        Elf32_Addr      e_entry;
        Elf32_Off       e_phoff;
        Elf32_Off       e_shoff;
        Elf32_Word      e_flags;
        Elf32_Half      e_ehsize;
        Elf32_Half      e_phentsize;
        Elf32_Half      e_phnum;
        Elf32_Half      e_shentsize;
        Elf32_Half      e_shnum;
        Elf32_Half      e_shstrndx;
} Elf32_Ehdr;

typedef struct {
        unsigned char   e_ident[EI_NIDENT]; 
        Elf64_Half      e_type;
        Elf64_Half      e_machine;
        Elf64_Word      e_version;
        Elf64_Addr      e_entry;
        Elf64_Off       e_phoff;
        Elf64_Off       e_shoff;
        Elf64_Word      e_flags;
        Elf64_Half      e_ehsize;
        Elf64_Half      e_phentsize;
        Elf64_Half      e_phnum;
        Elf64_Half      e_shentsize;
        Elf64_Half      e_shnum;
        Elf64_Half      e_shstrndx;
} Elf64_Ehdr;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_ident&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;将文件标记为目标文件的初始字节。这些字节提供与计算机无关的数据，用于解码和解释文件的内容。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-35342.html#scrolltoc&#34;&gt;ELF 标识&lt;/a&gt;中提供了完整说明。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_type&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识目标文件类型，如下表中所列。名称值含义&lt;code&gt;ET_NONE``0&lt;/code&gt;无文件类型&lt;code&gt;ET_REL``1&lt;/code&gt;可重定位文件&lt;code&gt;ET_EXEC``2&lt;/code&gt;可执行文件&lt;code&gt;ET_DYN``3&lt;/code&gt;共享目标文件&lt;code&gt;ET_CORE``4&lt;/code&gt;核心文件&lt;code&gt;ET_LOPROC``0xff00&lt;/code&gt;开始特定于处理器的范围&lt;code&gt;ET_HIPROC``0xffff&lt;/code&gt;结束特定于处理器的范围虽然未指定核心文件内容，但类型 &lt;code&gt;ET_CORE&lt;/code&gt; 保留用于标记文件。从 &lt;code&gt;ET_LOPROC&lt;/code&gt; 到 &lt;code&gt;ET_HIPROC&lt;/code&gt; 之间的值（包括这两个值）保留用于特定于处理器的语义。其他值保留供将来使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_machine&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定独立文件所需的体系结构。下表中列出了相关体系结构。名称值含义&lt;code&gt;EM_NONE``0&lt;/code&gt;无计算机&lt;code&gt;EM_SPARC``2&lt;/code&gt;SPARC&lt;code&gt;EM_386``3&lt;/code&gt;Intel 80386&lt;code&gt;EM_SPARC32PLUS``18&lt;/code&gt;Sun SPARC 32+&lt;code&gt;EM_SPARCV9``43&lt;/code&gt;SPARC V9&lt;code&gt;EM_AMD64``62&lt;/code&gt;AMD 64其他值保留供将来使用。特定于处理器的 ELF 名称通过使用计算机名来进行区分。例如，为 &lt;code&gt;e_flags&lt;/code&gt; 定义的标志使用前缀 &lt;code&gt;EF_&lt;/code&gt;。&lt;code&gt;EM_XYZ&lt;/code&gt; 计算机的名为 &lt;code&gt;WIDGET&lt;/code&gt; 的标志称为 &lt;code&gt;EF_XYZ_WIDGET&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识目标文件版本，如下表中所列。名称值含义&lt;code&gt;EV_NONE``0&lt;/code&gt;无效版本&lt;code&gt;EV_CURRENT``&amp;gt;=1&lt;/code&gt;当前版本值 1 表示原始文件格式。&lt;code&gt;EV_CURRENT&lt;/code&gt; 的值可根据需要进行更改，以反映当前版本号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_entry&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;虚拟地址，系统首先将控制权转移到该地址，进而启动进程。如果文件没有关联的入口点，则此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_phoff&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;程序头表的文件偏移（字节）。如果文件没有程序头表，则此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_shoff&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节头表的文件偏移（字节）。如果文件没有节头表，则此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_flags&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与文件关联的特定于处理器的标志。标志名称采用 &lt;code&gt;EF_machine&lt;/code&gt;&lt;strong&gt;_flag&lt;/strong&gt; 形式。对于 x86，此成员目前为零。下表中列出了 SPARC 标志。名称值含义&lt;code&gt;EF_SPARC_EXT_MASK``0xffff00&lt;/code&gt;供应商扩展掩码&lt;code&gt;EF_SPARC_32PLUS``0x000100&lt;/code&gt;通用 V8+ 功能&lt;code&gt;EF_SPARC_SUN_US1``0x000200&lt;/code&gt;Sun UltraSPARC 1 扩展&lt;code&gt;EF_SPARC_HAL_R1``0x000400&lt;/code&gt;HAL R1 扩展&lt;code&gt;EF_SPARC_SUN_US3``0x000800&lt;/code&gt;Sun UltraSPARC 3 扩展&lt;code&gt;EF_SPARCV9_MM``0x3&lt;/code&gt;内存型号掩码&lt;code&gt;EF_SPARCV9_TSO``0x0&lt;/code&gt;总体存储排序&lt;code&gt;EF_SPARCV9_PSO``0x1&lt;/code&gt;部分存储排序&lt;code&gt;EF_SPARCV9_RMO``0x2&lt;/code&gt;非严格内存排序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_ehsize&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ELF 头的大小（字节）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_phentsize&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;文件的程序头表中某一项的大小（字节）。所有项的大小都相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_phnum&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;程序头表中的项数。&lt;code&gt;e_phentsize&lt;/code&gt; 和 &lt;code&gt;e_phnum&lt;/code&gt; 的积指定了表的大小（字节）。如果文件没有程序头表，则 &lt;code&gt;e_phnum&lt;/code&gt; 值为零。如果程序头的数量大于或等于 &lt;code&gt;PN_XNUM&lt;/code&gt; (&lt;code&gt;0xffff&lt;/code&gt;)，则此成员的值为 &lt;code&gt;PN_XNUM&lt;/code&gt; (&lt;code&gt;0xffff&lt;/code&gt;)。程序头表的实际项数包含在节头中索引为 &lt;code&gt;0&lt;/code&gt; 的 &lt;code&gt;sh_info&lt;/code&gt; 字段中。否则，初始节头项的 &lt;code&gt;sh_info&lt;/code&gt; 成员值为零。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-12754&#34;&gt;表 12-6&lt;/a&gt; 和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#gavyo&#34;&gt;表 12-7&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_shentsize&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节头的大小（字节）。节头是节头表中的一项。所有项的大小都相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_shnum&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节头表中的项数。&lt;code&gt;e_shentsize&lt;/code&gt; 和 &lt;code&gt;e_shnum&lt;/code&gt; 的积指定了节头表的大小（字节）。如果文件没有节头表，则 &lt;code&gt;e_shnum&lt;/code&gt; 值为零。如果节数大于或等于 &lt;code&gt;SHN_LORESERVE&lt;/code&gt; (&lt;code&gt;0xff00&lt;/code&gt;)，则 &lt;code&gt;e_shnum&lt;/code&gt; 值为零。节头表的实际项数包含在节头中索引为 &lt;code&gt;0&lt;/code&gt; 的 &lt;code&gt;sh_size&lt;/code&gt; 字段中。否则，初始节头项的 &lt;code&gt;sh_size&lt;/code&gt; 成员值为零。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-12754&#34;&gt;表 12-6&lt;/a&gt; 和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#gavyo&#34;&gt;表 12-7&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e_shstrndx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与节名称字符串表关联的项的节头表索引。如果文件没有节名称字符串表，则此成员值为 &lt;code&gt;SHN_UNDEF&lt;/code&gt;。如果节名称字符串表的节索引大于或等于 &lt;code&gt;SHN_LORESERVE&lt;/code&gt; (&lt;code&gt;0xff00&lt;/code&gt;)，则此成员值为 &lt;code&gt;SHN_XINDEX&lt;/code&gt; (&lt;code&gt;0xffff&lt;/code&gt;)，节名称字符串表的实际节索引包含在节头中索引为 &lt;code&gt;0&lt;/code&gt; 的 &lt;code&gt;sh_link&lt;/code&gt; 字段中。否则，初始节头项的 &lt;code&gt;sh_link&lt;/code&gt; 成员值为零。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-12754&#34;&gt;表 12-6&lt;/a&gt; 和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#gavyo&#34;&gt;表 12-7&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;elf-标识&#34;&gt;ELF 标识&lt;/h2&gt;
&lt;p&gt;ELF 提供了一个目标文件框架，用于支持多个处理器、多种数据编码和多类计算机。要支持此目标文件系列，文件的初始字节应指定解释文件的方式。这些字节与发出查询的处理器以及文件的其余内容无关。&lt;/p&gt;
&lt;p&gt;ELF 头和目标文件的初始字节对应于 &lt;code&gt;e_ident&lt;/code&gt; 成员。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-3 ELF 标识索引&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;名称值目的&lt;code&gt;EI_MAG0``0&lt;/code&gt;文件标识&lt;code&gt;EI_MAG1``1&lt;/code&gt;文件标识&lt;code&gt;EI_MAG2``2&lt;/code&gt;文件标识&lt;code&gt;EI_MAG3``3&lt;/code&gt;文件标识&lt;code&gt;EI_CLASS``4&lt;/code&gt;文件类&lt;code&gt;EI_DATA``5&lt;/code&gt;数据编码&lt;code&gt;EI_VERSION``6&lt;/code&gt;文件版本&lt;code&gt;EI_OSABI``7&lt;/code&gt;操作系统/ABI 标识&lt;code&gt;EI_ABIVERSION``8&lt;/code&gt;ABI 版本&lt;code&gt;EI_PAD``9&lt;/code&gt;填充字节的开头&lt;code&gt;EI_NIDENT``16``e_ident[]&lt;/code&gt; 的大小&lt;/p&gt;
&lt;p&gt;这些索引可访问值为以下各项的字节。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_MAG0&lt;/code&gt; - &lt;code&gt;EI_MAG3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;4 字节&lt;strong&gt;魔数&lt;/strong&gt;，用于将文件标识为 ELF 目标文件，如下表中所列。名称值位置&lt;code&gt;ELFMAG0``0x7f``e_ident[EI_MAG0]``ELFMAG1``&#39;E&#39;``e_ident[EI_MAG1]``ELFMAG2``&#39;L&#39;``e_ident[EI_MAG2]``ELFMAG3``&#39;F&#39;``e_ident[EI_MAG3]&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_CLASS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节 &lt;code&gt;e_ident[EI_CLASS]&lt;/code&gt; 用于标识文件的类或容量，如下表中所列。名称值含义&lt;code&gt;ELFCLASSNONE``0&lt;/code&gt;无效类&lt;code&gt;ELFCLASS32``1&lt;/code&gt;32 位目标文件&lt;code&gt;ELFCLASS64``2&lt;/code&gt;64 位目标文件文件格式设计用于在各种大小的计算机之间进行移植，而不会将最大计算机的大小强加给最小的计算机。文件类定义目标文件容器的数据结构所使用的基本类型。包含在目标文件各节中的数据可以遵循其他编程模型。类 &lt;code&gt;ELFCLASS32&lt;/code&gt; 支持文件和虚拟地址空间最高为 4 GB 的计算机。该类使用&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-6.html#chapter6-tbl-7&#34;&gt;表 12-1&lt;/a&gt; 中定义的基本类型。类 &lt;code&gt;ELFCLASS64&lt;/code&gt; 保留用于 64 位体系结构，如 64 位 SPARC 和 x64。该类使用&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-6.html#chapter6-tbl-7-1&#34;&gt;表 12-2&lt;/a&gt; 中定义的基本类型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_DATA&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节 &lt;code&gt;e_ident[EI_DATA]&lt;/code&gt; 用于指定目标文件中特定于处理器的数据的数据编码，如下表中所列。名称值含义&lt;code&gt;ELFDATANONE``0&lt;/code&gt;无效数据编码&lt;code&gt;ELFDATA2LSB``1&lt;/code&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-12.html#chapter6-fig-14&#34;&gt;图 12-2&lt;/a&gt;。&lt;code&gt;ELFDATA2MSB``2&lt;/code&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-12.html#chapter6-fig-15&#34;&gt;图 12-3&lt;/a&gt;。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-12.html#scrolltoc&#34;&gt;数据编码&lt;/a&gt;一节中提供了有关这些编码的更多信息。其他值保留供将来使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_VERSION&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节 &lt;code&gt;e_ident[EI_VERSION]&lt;/code&gt; 用于指定 ELF 头版本号。当前，该值必须为 &lt;code&gt;EV_CURRENT&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_OSABI&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节 &lt;code&gt;e_ident[EI_OSABI]&lt;/code&gt; 用于标识操作系统以及目标文件所面向的 ABI。其他 ELF 结构中的一些字段包含的标志和值具有特定于操作系统或 ABI 的含义。这些字段的解释由此字节的值确定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_ABIVERSION&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节 &lt;code&gt;e_ident[EI_ABIVERSION]&lt;/code&gt; 用于标识目标文件所面向的 ABI 的版本。此字段用于区分 ABI 的各个不兼容版本。此版本号的解释依赖于 &lt;code&gt;EI_OSABI&lt;/code&gt; 字段标识的 ABI。如果没有为对应于处理器的 &lt;code&gt;EI_OSABI&lt;/code&gt; 字段指定值，或者没有为 &lt;code&gt;EI_OSABI&lt;/code&gt; 字节的特定值所确定的 ABI 指定版本值，则会使用值零来表示未指定值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EI_PAD&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;该值用于标记 &lt;code&gt;e_ident&lt;/code&gt; 中未使用字节的起始位置。这些字节会保留并设置为零。读取目标文件的程序应忽略这些值。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;数据编码&#34;&gt;数据编码&lt;/h2&gt;
&lt;p&gt;文件的数据编码指定解释文件中的整数类型的方式。类 &lt;code&gt;ELFCLASS32&lt;/code&gt; 文件和类 &lt;code&gt;ELFCLASS64&lt;/code&gt; 文件使用占用 1、2、4 和 8 个字节的整数来表示偏移、地址和其他信息。按照定义的编码，目标文件使用如下描述的数字表示。字节编号显示在左上角。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ELFDATA2LSB&lt;/code&gt; 编码用于指定 2 的补码值，其中最低有效字节占用最低地址。在非正式情况下，这种编码通常称为&lt;strong&gt;小尾数法字节排序&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-2 数据编码 ELFDATA2LSB&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/ELFDATA2LSB.png&#34; alt=&#34;image:ELFDATA2LSB 数据编码。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;ELFDATA2MSB&lt;/code&gt; 编码用于指定 2 的补码值，其中最高有效字节占用最低地址。在非正式情况下，这种编码通常称为&lt;strong&gt;大尾数法字节排序&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-3 数据编码 ELFDATA2MSB&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/ELFDATA2MSB.png&#34; alt=&#34;image:ELFDATA2MSB 数据编码。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;节&#34;&gt;节&lt;/h2&gt;
&lt;p&gt;使用目标文件的节头表，可以定位文件的所有节。节头表是 &lt;code&gt;Elf32_Shdr&lt;/code&gt; 或 &lt;code&gt;Elf64_Shdr&lt;/code&gt; 结构的数组。节头表索引是此数组的下标。ELF 头的 &lt;code&gt;e_shoff&lt;/code&gt; 成员表示从文件的起始位置到节头表的字节偏移。&lt;code&gt;e_shnum&lt;/code&gt; 成员表示节头表包含的项数。&lt;code&gt;e_shentsize&lt;/code&gt; 成员表示每一项的大小（字节）。&lt;/p&gt;
&lt;p&gt;如果节数大于或等于 &lt;code&gt;SHN_LORESERVE&lt;/code&gt; (&lt;code&gt;0xff00&lt;/code&gt;)，则 &lt;code&gt;e_shnum&lt;/code&gt; 值为 &lt;code&gt;SHN_UNDEF&lt;/code&gt; (&lt;code&gt;0&lt;/code&gt;)。节头表的实际项数包含在节头中索引为 &lt;code&gt;0&lt;/code&gt; 的 &lt;code&gt;sh_size&lt;/code&gt; 字段中。否则，初始项的 &lt;code&gt;sh_size&lt;/code&gt; 成员值为零。&lt;/p&gt;
&lt;p&gt;如果上下文中限制了索引大小，则会保留部分节头表索引。例如，符号表项的 &lt;code&gt;st_shndx&lt;/code&gt; 成员以及 ELF 头的 &lt;code&gt;e_shnum&lt;/code&gt; 和 &lt;code&gt;e_shstrndx&lt;/code&gt; 成员。在这类上下文中，保留的值不表示目标文件中的实际各节。同样在这类上下文中，转义值表示会在其他位置（较大字段中）找到实际节索引。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-4 ELF 特殊节索引&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;名称值&lt;code&gt;SHN_UNDEF``0``SHN_LORESERVE``0xff00``SHN_LOPROC``0xff00``SHN_BEFORE``0xff00``SHN_AFTER``0xff01``SHN_AMD64_LCOMMON``0xff02``SHN_HIPROC``0xff1f``SHN_LOOS``0xff20``SHN_LOSUNW``0xff3f``SHN_SUNW_IGNORE``0xff3f``SHN_HISUNW``0xff3f``SHN_HIOS``0xff3f``SHN_ABS``0xfff1``SHN_COMMON``0xfff2``SHN_XINDEX``0xffff``SHN_HIRESERVE``0xffff&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 虽然索引 &lt;code&gt;0&lt;/code&gt; 保留为未定义的值，但节头表包含对应于索引 &lt;code&gt;0&lt;/code&gt; 的项。即，如果 ELF 头的 &lt;code&gt;e_shnum&lt;/code&gt; 成员表示文件在节头表中具有 &lt;code&gt;6&lt;/code&gt; 项，则这些节的索引为 &lt;code&gt;0&lt;/code&gt; 到 &lt;code&gt;5&lt;/code&gt;。初始项的内容会在本节的后面指定。&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_UNDEF&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;未定义、缺少、无关或无意义的节引用。例如，&lt;strong&gt;定义&lt;/strong&gt;的相对于节编号 &lt;code&gt;SHN_UNDEF&lt;/code&gt; 的符号即是未定义符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_LORESERVE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;保留索引的范围的下界。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_LOPROC&lt;/code&gt; - &lt;code&gt;SHN_HIPROC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于处理器的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_LOOS&lt;/code&gt; - &lt;code&gt;SHN_HIOS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于操作系统的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_LOSUNW&lt;/code&gt; - &lt;code&gt;SHN_HISUNW&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于 Sun 的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_SUNW_IGNORE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节索引用于在可重定位目标文件中提供临时符号定义。保留供 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN1Mdtrace-1m&#34;&gt;&lt;code&gt;dtrace&lt;/code&gt;(1M)&lt;/a&gt; 内部使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_BEFORE、SHN_AFTER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;SHF_LINK_ORDER&lt;/code&gt; 和 &lt;code&gt;SHF_ORDERED&lt;/code&gt; 节标志一起提供初始和最终节排序。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-10675&#34;&gt;表 12-8&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_AMD64_LCOMMON&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;特定于 x64 的通用块标签。此标签与 &lt;code&gt;SHN_COMMON&lt;/code&gt; 类似，但用于标识较大的通用块。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_ABS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;对应引用的绝对值。例如，相对于节编号 &lt;code&gt;SHN_ABS&lt;/code&gt; 而定义的符号具有绝对值，不受重定位影响。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_COMMON&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;相对于此节而定义的符号为通用符号，如 FORTRAN &lt;code&gt;COMMON&lt;/code&gt; 或未分配的 C 外部变量。这些符号有时称为暂定符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_XINDEX&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;转义值，用于表示实际节头索引过大，无法放入包含字段。节头索引可在特定于显示节索引的结构的其他位置中找到。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_HIRESERVE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;保留索引的范围的上界。系统保留了 &lt;code&gt;SHN_LORESERVE&lt;/code&gt; 和 &lt;code&gt;SHN_HIRESERVE&lt;/code&gt; 之间的索引（包括这两个值）。这些值不会引用节头表。节头表不包含对应于保留索引的项。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;节包含目标文件中的所有信息，但 ELF 头、程序头表和节头表除外。此外，目标文件中的各节还满足多个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;目标文件中的每一节仅有一个说明该节的节头。可能会有节头存在但节不存在的情况。&lt;/li&gt;
&lt;li&gt;每一节在文件中占用可能为空的一系列相邻字节。&lt;/li&gt;
&lt;li&gt;文件中的各节不能重叠。文件中的字节不能位于多个节中。&lt;/li&gt;
&lt;li&gt;目标文件可以包含非活动空间。各种头和节可能不会包括目标文件中的每个字节。非活动数据的内容未指定。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;节头具有以下结构。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        elf32_Word      sh_name;
        Elf32_Word      sh_type;
        Elf32_Word      sh_flags;
        Elf32_Addr      sh_addr;
        Elf32_Off       sh_offset;
        Elf32_Word      sh_size;
        Elf32_Word      sh_link;
        Elf32_Word      sh_info;
        Elf32_Word      sh_addralign;
        Elf32_Word      sh_entsize;
} Elf32_Shdr;

typedef struct {
        Elf64_Word      sh_name;
        Elf64_Word      sh_type;
        Elf64_Xword     sh_flags;
        Elf64_Addr      sh_addr;
        Elf64_Off       sh_offset;
        Elf64_Xword     sh_size;
        Elf64_Word      sh_link;
        Elf64_Word      sh_info;
        Elf64_Xword     sh_addralign;
        Elf64_Xword     sh_entsize;
} Elf64_Shdr;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节的名称。此成员值是节头字符串表节的索引，用于指定以空字符结尾的字符串的位置。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-1.html#chapter6-28341&#34;&gt;表 12-10&lt;/a&gt; 中列出了节名称及其说明。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_type&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于将节的内容和语义分类。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-73445&#34;&gt;表 12-5&lt;/a&gt; 中列出了节类型及其说明。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_flags&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节可支持用于说明杂项属性的 1 位标志。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-10675&#34;&gt;表 12-8&lt;/a&gt; 中列出了标志定义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_addr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果节显示在进程的内存映像中，则此成员会指定节的第一个字节所在的地址。否则，此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_offset&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从文件的起始位置到节中第一个字节的字节偏移。对于 &lt;code&gt;SHT_NOBITS&lt;/code&gt; 节，此成员表示文件中的概念性偏移，因为该节在文件中不占用任何空间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_size&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节的大小（字节）。除非节类型为 &lt;code&gt;SHT_NOBITS&lt;/code&gt;，否则该节将在文件中占用 &lt;code&gt;sh_size&lt;/code&gt; 个字节。&lt;code&gt;SHT_NOBITS&lt;/code&gt; 类型的节大小可以不为零，但该节在文件中不占用任何空间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_link&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节头表索引链接，其解释依赖于节类型。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-47976&#34;&gt;表 12-9&lt;/a&gt; 说明了相应的值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_info&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;额外信息，其解释依赖于节类型。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-47976&#34;&gt;表 12-9&lt;/a&gt; 说明了相应的值。如果此节头的 &lt;code&gt;sh_flags&lt;/code&gt; 字段包含属性 &lt;code&gt;SHF_INFO_LINK&lt;/code&gt;，则此成员表示节头表索引。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_addralign&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一些节具有地址对齐约束。例如，如果某节包含双字，则系统必须确保整个节双字对齐。在此情况下，&lt;code&gt;sh_addr&lt;/code&gt; 的值在以 &lt;code&gt;sh_addralign&lt;/code&gt; 的值为模数进行取模时，同余数必须等于 &lt;code&gt;0&lt;/code&gt;。当前，仅允许使用 &lt;code&gt;0&lt;/code&gt; 和 2 的正整数幂。值 &lt;code&gt;0&lt;/code&gt; 和 &lt;code&gt;1&lt;/code&gt; 表示节没有对齐约束。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;sh_entsize&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一些节包含固定大小的项的表，如符号表。对于这样的节，此成员会指定每一项的大小（字节）。如果节不包含固定大小的项的表，则此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;节头的 &lt;code&gt;sh_type&lt;/code&gt; 成员用于指定节的语义，如下表中所示。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-5 ELF 节类型 sh_type&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NULL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_STRTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_RELA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HASH&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_DYNAMIC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOTE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;7&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_REL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;9&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SHLIB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_DYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_INIT_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;14&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_FINI_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;15&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PREINIT_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;16&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;17&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;18&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_LOOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x60000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_LOSUNW&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6fffffef&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_capchain&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6fffffef&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_symsort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_tlssort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff3&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_dof&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff4&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_cap&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff5&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_SIGNATURE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff6&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_ANNOTATE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff7&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_DEBUGSTR&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff8&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_DEBUG&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffff9&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffffa&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffffb&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_syminfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffffc&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_verdef&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffffd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_verneed&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6ffffffe&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_versym&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6fffffff&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HISUNW&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6fffffff&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HIOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x6fffffff&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_LOPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x70000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SPARC_GOTDATA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x70000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_AMD64_UNWIND&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x70000001&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HIPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x7fffffff&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_LOUSER&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x80000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HIUSER&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0xffffffff&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_NULL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;将节头标识为无效。此节头没有关联的节。节头的其他成员具有未定义的值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识由程序定义的信息，这些信息的格式和含义完全由程序确定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SYMTAB&lt;/code&gt;、&lt;code&gt;SHT_DYNSYM&lt;/code&gt;、&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识符号表。通常，&lt;code&gt;SHT_SYMTAB&lt;/code&gt; 节会提供用于链接编辑的符号。作为完整的符号表，该表可能包含许多对于动态链接不必要的符号。因此，目标文件还可以包含一个 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节，用以包含最低限度的一组动态链接符号，从而节省空间。&lt;code&gt;SHT_DYNSYM&lt;/code&gt; 还可以使用 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节进行扩充。此附加节为运行时环境提供局部函数符号，但对于动态链接来说不是必需的。当不可分配的 &lt;code&gt;SHT_SYMTAB&lt;/code&gt; 不可用或已从文件中剥离时，调试器通过使用此节可在运行时上下文中产生精确的栈跟踪。此节还可以为运行时环境提供其他符号信息，以便与 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN3Adladdr-3c&#34;&gt;&lt;code&gt;dladdr&lt;/code&gt;(3C)&lt;/a&gt; 一起使用。如果 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节和 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节同时存在，链接编辑器会将这两者的数据区域紧邻彼此放置。&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节位于 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节的前面。这种放置方式可以使两个表看起来像是一个更大的连续符号表，其中包含 &lt;code&gt;SHT_SYMTAB&lt;/code&gt; 中的缩减符号集合。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_STRTAB&lt;/code&gt;、&lt;code&gt;SHT_DYNSTR&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识字符串表。目标文件可以有多个字符串表节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-73709.html#scrolltoc&#34;&gt;字符串表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_RELA&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含显式加数的重定位项，如 32 位目标文件类的 &lt;code&gt;Elf32_Rela&lt;/code&gt; 类型。目标文件可以有多个重定位节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_HASH&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识符号散列表。动态链接的目标文件必须包含符号散列表。当前，目标文件只能有一个散列表，但此限制在将来可能会放宽。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-48031.html#scrolltoc&#34;&gt;散列表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_DYNAMIC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识动态链接的信息。当前，目标文件只能有一个动态节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-42444.html#scrolltoc&#34;&gt;动态节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_NOTE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识以某种方法标记文件的信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-18048.html#scrolltoc&#34;&gt;注释节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识在文件中不占用任何空间，但在其他方面与 &lt;code&gt;SHT_PROGBITS&lt;/code&gt; 类似的节。虽然此节不包含任何字节，但 &lt;code&gt;sh_offset&lt;/code&gt; 成员包含概念性文件偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_REL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识不包含显式加数的重定位项，如 32 位目标文件类的 &lt;code&gt;Elf32_Rel&lt;/code&gt; 类型。目标文件可以有多个重定位节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SHLIB&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识具有未指定的语义的保留节。包含此类型的节的程序不符合 ABI。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_INIT_ARRAY&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含指针数组的节，这些指针指向初始化函数。数组中的每个指针都被视为不返回任何值的无参数过程。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-55859.html#chapter2-48195&#34;&gt;初始化节和终止节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_FINI_ARRAY&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含指针数组的节，这些指针指向终止函数。数组中的每个指针都被视为不返回任何值的无参数过程。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-55859.html#chapter2-48195&#34;&gt;初始化节和终止节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_PREINIT_ARRAY&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含指针数组的节，这些指针指向在其他所有初始化函数之前调用的函数。数组中的每个指针都被视为不返回任何值的无参数过程。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-55859.html#chapter2-48195&#34;&gt;初始化节和终止节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识节组。节组标识一组相关的节，这些节必须作为一个单元由链接编辑器进行处理。&lt;code&gt;SHT_GROUP&lt;/code&gt; 类型的节只能出现在可重定位目标文件中。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-26.html#scrolltoc&#34;&gt;组节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含扩展节索引的节，扩展节索引与符号表关联。如果符号表引用的任何节头索引包含转义值 &lt;code&gt;SHN_XINDEX&lt;/code&gt;，则需要关联的 &lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt;。&lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt; 节是 &lt;code&gt;Elf32_Word &lt;/code&gt;值的数组。对于关联的符号表项中的每一项，此数组都包含对应的一项。这些值表示针对其定义符号表项的节头索引。仅当对应符号表项的 &lt;code&gt;st_shndx&lt;/code&gt; 字段包含转义值 &lt;code&gt;SHN_XINDEX&lt;/code&gt; 时，匹配的 &lt;code&gt;Elf32_Word&lt;/code&gt; 才会包含实际的节头索引。否则，该项必须为 &lt;code&gt;SHN_UNDEF&lt;/code&gt; (&lt;code&gt;0&lt;/code&gt;)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_LOOS&lt;/code&gt; – &lt;code&gt;SHT_HIOS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于操作系统的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_LOSUNW&lt;/code&gt; – &lt;code&gt;SHT_HISUNW&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于 Oracle Solaris OS 语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capchain&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;收集功能系列成员的索引数组。该数组的第一个元素是链版本号。此元素的后面是以 &lt;code&gt;0&lt;/code&gt; 结尾的功能符号索引链。每个以 &lt;code&gt;0&lt;/code&gt; 结尾的索引组都表示一个功能系列。每个系列的第一个元素是功能前置符号。后面的元素指向系列成员。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;将符号表项与功能要求及其前置功能符号关联起来的索引数组。定义符号功能的目标文件包含 &lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节。&lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节头信息指向关联的 &lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 节。&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 节头信息指向关联的符号表节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_symsort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由相邻的 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节和 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节构成的动态符号表的索引数组。这些索引相对于 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节的开头。这些索引引用包含内存地址的符号。该索引已进行排序，以使索引按照地址递增的顺序引用符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_tlssort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由相邻的 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节和 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节构成的动态符号表的索引数组。这些索引相对于 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 节的开头。这些索引引用线程局部存储符号。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;。该索引已进行排序，以使索引按照偏移递增的顺序引用符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;非全局符号的动态符号表。请参见前面的 &lt;code&gt;SHT_SYMTAB&lt;/code&gt;、&lt;code&gt;SHT_DYNSYM&lt;/code&gt;、&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 说明。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_dof&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;保留供 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN1Mdtrace-1m&#34;&gt;&lt;code&gt;dtrace&lt;/code&gt;(1M)&lt;/a&gt; 内部使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_cap&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定功能要求。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_SIGNATURE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识模块验证签名。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_ANNOTATE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;注释节的处理遵循处理节的所有缺省规则。仅当注释节位于不可分配的内存中时，才会发生异常。如果未设置节头标志 &lt;code&gt;SHF_ALLOC&lt;/code&gt;，则链接编辑器将在不给出任何提示的情况下忽略针对此节的所有未满足的重定位。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_DEBUGSTR&lt;/code&gt;、&lt;code&gt;SHT_SUNW_DEBUG&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识调试信息。使用链接编辑器的 &lt;code&gt;-z strip-class&lt;/code&gt; 选项，或者在链接编辑之后使用 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN1strip-1&#34;&gt;&lt;code&gt;strip&lt;/code&gt;(1)&lt;/a&gt;，可以将此类型的节从目标文件中剥离。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识用于处理部分初始化的符号的数据。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-24.html#scrolltoc&#34;&gt;移动节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识允许将相同数据的多个副本减少为单个副本的节。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-11598.html#scrolltoc&#34;&gt;COMDAT 节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_syminfo&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识其他符号信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-17.html#scrolltoc&#34;&gt;Syminfo 表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_verdef&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识此文件定义的细分版本。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54676.html#chapter6-80869&#34;&gt;版本定义章节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_verneed&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识此文件所需的细分依赖性。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54676.html#chapter6-61174&#34;&gt;版本依赖性节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_versym&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识用于说明符号与文件提供的版本定义之间关系的表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54676.html#chapter6-31&#34;&gt;版本符号节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_LOPROC&lt;/code&gt; - &lt;code&gt;SHT_HIPROC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于处理器的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_SPARC_GOTDATA&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识特定于 SPARC 的数据，使用相对于 &lt;code&gt;GOT&lt;/code&gt; 的寻址引用这些数据。即，相对于指定给符号 &lt;code&gt;_GLOBAL_OFFSET_TABLE_&lt;/code&gt; 的地址的偏移。对于 64 位 SPARC，此节中的数据必须在链接编辑时绑定到偏离 &lt;code&gt;GOT&lt;/code&gt; 地址不超过 &lt;code&gt;{+-} 2^32&lt;/code&gt; 字节的位置。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_AMD64_UNWIND&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识特定于 x64 的数据，其中包含对应于栈展开的展开函数表的各项。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_LOUSER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定保留用于应用程序的索引范围的下界。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHT_HIUSER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定保留用于应用程序的索引范围的上界。应用程序可以使用 &lt;code&gt;SHT_LOUSER&lt;/code&gt; 和 &lt;code&gt;SHT_HIUSER&lt;/code&gt; 之间的节类型，而不会与当前或将来系统定义的节类型产生冲突。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他节类型值保留。如前所述，即使索引 &lt;code&gt;0&lt;/code&gt; (&lt;code&gt;SHN_UNDEF&lt;/code&gt;) 标记了未定义的节引用，仍会存在对应于该索引的节头。下表显示了这些值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-6 ELF 节头表项：索引 &lt;code&gt;0&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;附注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_name&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_type&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NULL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无效&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_flags&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无标志&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_addr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_offset&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无文件偏移&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_size&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无大小&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_link&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHN_UNDEF&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无链接信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_info&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无辅助信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_addralign&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无对齐&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_entsize&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无项&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果节或程序头的数目超过 ELF 头数据大小，则节头 &lt;code&gt;0&lt;/code&gt; 的各元素将用于定义扩展的 ELF 头属性。下表显示了这些值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-7 ELF 扩展的节头表项：索引 &lt;code&gt;0&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;附注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_name&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_type&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NULL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无效&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_flags&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无标志&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_addr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_offset&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无文件偏移&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_size&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;e_shnum&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;节头表中的项数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_link&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;e_shstrndx&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;与节名称字符串表关联的项的节头索引&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_info&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;e_phnum&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;程序头表中的项数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_addralign&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无对齐&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_entsize&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无项&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;节头的 &lt;code&gt;sh_flags&lt;/code&gt; 成员包含用于说明节属性的 1 位标志。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-8 ELF 节属性标志&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_EXECINSTR&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x4&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_MERGE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x10&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_STRINGS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x20&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_INFO_LINK&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x40&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_LINK_ORDER&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x80&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_OS_NONCONFORMING&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x100&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_GROUP&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x200&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_TLS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x400&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_MASKOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x0ff00000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_SUNW_NODISCARD&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x00100000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_MASKPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0xf0000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_AMD64_LARGE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x10000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ORDERED&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x40000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_EXCLUDE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x80000000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果在 &lt;code&gt;sh_flags&lt;/code&gt; 中设置了标志位，则该节的此属性处于&lt;strong&gt;启用&lt;/strong&gt;状态。否则，此属性处于&lt;strong&gt;禁用&lt;/strong&gt;状态，或者不适用。未定义的属性会保留并设置为零。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_WRITE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识在进程执行过程中应可写的节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识在进程执行过程中占用内存的节。一些控制节不位于目标文件的内存映像中。对于这些节，此属性处于禁用状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_EXECINSTR&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含可执行计算机指令的节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_MERGE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识可以将其中包含的数据合并以消除重复的节。除非还设置了 &lt;code&gt;SHF_STRINGS&lt;/code&gt; 标志，否则该节中的数据元素大小一致。每个元素的大小在节头的 &lt;code&gt;sh_entsize&lt;/code&gt; 字段中指定。如果还设置了 &lt;code&gt;SHF_STRINGS&lt;/code&gt; 标志，则数据元素会包含以空字符结尾的字符串。每个字符的大小在节头的 &lt;code&gt;sh_entsize&lt;/code&gt; 字段中指定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_STRINGS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识包含以空字符结尾的字符串的节。每个字符的大小在节头的 &lt;code&gt;sh_entsize&lt;/code&gt; 字段中指定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_INFO_LINK&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节头的 &lt;code&gt;sh_info&lt;/code&gt; 字段中包含节头表索引。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_LINK_ORDER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节向链接编辑器中添加特殊排序要求。如果此节头的 &lt;code&gt;sh_link&lt;/code&gt; 字段引用其他节（链接到的节），则会应用这些要求。如果将此节与输出文件中的其他节合并，则此节将按照相同的相对顺序（相对于这些节）显示。同样，链接到的节也将按照相同的相对顺序（相对于与其合并的节）显示。链接到的节必须是未排序的，因而不能指定 &lt;code&gt;SHF_LINK_ORDER&lt;/code&gt; 或 &lt;code&gt;SHF_ORDERED&lt;/code&gt;。特殊的 &lt;code&gt;sh_link&lt;/code&gt; 值 &lt;code&gt;SHN_BEFORE&lt;/code&gt; 和 &lt;code&gt;SHN_AFTER&lt;/code&gt;（请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-tbl-16&#34;&gt;表 12-4&lt;/a&gt;）分别表示已排序的节将位于要排序的集合中的其他所有节之前或之后。如果已排序集合中的多个节包含这些特殊值之一，则会保持输入文件链接行的顺序。此标志的一个典型用法是生成按地址顺序引用文本或数据节的表。如果缺少 &lt;code&gt;sh_link&lt;/code&gt; 排序信息，则合并到输出文件一个节内的单个输入文件中的节是相邻的。这些节会与输入文件中的节一样进行相对排序。构成多个输入文件的节按照链接行顺序显示。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_OS_NONCONFORMING&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节除了要求标准链接规则之外，还要求特定于操作系统的特殊处理，以避免不正确的行为。如果此节具有 &lt;code&gt;sh_type&lt;/code&gt; 值，或者对于这些字段包含特定于操作系统范围内的 &lt;code&gt;sh_flags&lt;/code&gt; 位，并且链接编辑器无法识别这些值，则包含此节的目标文件会由于出错而被拒绝。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_GROUP&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节是节组的一个成员（可能是唯一的成员）。此节必须由 &lt;code&gt;SHT_GROUP&lt;/code&gt; 类型的节引用。只能对可重定位目标文件中包含的节设置 &lt;code&gt;SHF_GROUP&lt;/code&gt; 标志。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-26.html#scrolltoc&#34;&gt;组节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_TLS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节包含线程局部存储。进程中的每个线程都包含此数据的一个不同实例。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_MASKOS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此掩码中包括的所有位都保留用于特定于操作系统的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_SUNW_NODISCARD&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节无法通过链接编辑器丢弃，并且始终会被复制到输出目标文件中。链接编辑器提供了通过链接编辑放弃未使用的输入节的功能。&lt;code&gt;SHF_SUNW_NODISCARD&lt;/code&gt; 节标志将该节排除在此类优化之外。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_MASKPROC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此掩码中包括的所有位都保留用于特定于处理器的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_AMD64_LARGE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;x64 的缺省编译模型仅用于 32 位位移。此位移限制了节的大小，并最终限制段的大小不得超过 2 GB。此属性标志用于标识可包含超过 2 GB 数据的节。此标志允许链接使用不同代码模型的目标文件。不包含 &lt;code&gt;SHF_AMD64_LARGE&lt;/code&gt; 属性标志的 x64 目标文件节可以由使用小代码模型的目标文件任意引用。包含此标志的节只能由使用较大代码模型的目标文件引用。例如，x64 中间代码模型目标文件可以引用包含此属性标志的节和不包含此属性标志的节中的数据。但是，x64 小代码模型目标文件只能引用不包含此标志的节中的数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_ORDERED&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHF_ORDERED&lt;/code&gt; 是 &lt;code&gt;SHF_LINK_ORDER&lt;/code&gt; 所提供的旧版本功能，并且已被 &lt;code&gt;SHF_LINK_ORDER&lt;/code&gt; 取代。&lt;code&gt; SHF_ORDERED&lt;/code&gt; 提供两种不同的功能。首先，可以指定输出节，其次，链接编辑器具有特殊排序要求。&lt;code&gt;SHF_ORDERED&lt;/code&gt; 节的 &lt;code&gt;sh_link&lt;/code&gt; 字段可以构成节的链接列表。此列表以包含指向其自身的 &lt;code&gt;sh_link&lt;/code&gt; 的最终节结束。此列表中的所有节都将指定给具有此列表中最终节的名称的输出节。如果已排序节的 &lt;code&gt;sh_info&lt;/code&gt; 项在相同输入文件中是有效节，则将基于由 &lt;code&gt;sh_info&lt;/code&gt; 项所指向的节的输出文件内的相对排序，对已排序的节进行排序。&lt;code&gt;sh_info&lt;/code&gt; 项指向的节必须尚未排序，因而不能指定 &lt;code&gt;SHF_LINK_ORDER&lt;/code&gt; 或 &lt;code&gt;SHF_ORDERED&lt;/code&gt;。特殊的 &lt;code&gt;sh_info&lt;/code&gt; 值 &lt;code&gt;SHN_BEFORE&lt;/code&gt; 和 &lt;code&gt;SHN_AFTER&lt;/code&gt;（请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-tbl-16&#34;&gt;表 12-4&lt;/a&gt;）分别表示已排序的节将位于要排序的集合中的其他所有节之前或之后。如果已排序集合中的多个节包含这些特殊值之一，则会保持输入文件链接行的顺序。如果缺少 &lt;code&gt;sh_info&lt;/code&gt; 排序信息，则合并到输出文件一个节内的单个输入文件中的各节是相邻的。这些节会与输入文件中的节一样进行相对排序。构成多个输入文件的节按照链接行顺序显示。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHF_EXCLUDE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节不包括在可执行文件或共享目标文件的链接编辑的输入中。如果还设置了 &lt;code&gt;SHF_ALLOC&lt;/code&gt; 标志，或者存在针对此节的重定位，则会忽略此标志。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;根据节类型，节头中的两个成员 &lt;code&gt;sh_link&lt;/code&gt; 和 &lt;code&gt;sh_info&lt;/code&gt; 包含特殊信息。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-9 ELF &lt;code&gt;sh_link&lt;/code&gt; 和 &lt;code&gt;sh_info&lt;/code&gt; 解释&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_type&lt;/code&gt;&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_link&lt;/code&gt;&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;&lt;code&gt;sh_info&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_DYNAMIC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的字符串表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HASH&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_REL``SHT_RELA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;如果 &lt;code&gt;sh_flags&lt;/code&gt; 成员包含 &lt;code&gt;SHF_INFO_LINK&lt;/code&gt; 标志，则为应用重定位的节的节头索引，否则为 &lt;code&gt;0&lt;/code&gt;。另请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-1.html#chapter6-28341&#34;&gt;表 12-10&lt;/a&gt; 和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB``SHT_DYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的字符串表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;比上一个局部符号 &lt;code&gt;STB_LOCAL&lt;/code&gt; 的符号表索引大一。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表中项的符号表索引。指定的符号表项的名称用于提供节组的签名。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_cap&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;如果符号功能存在，则为关联的 &lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 表的节头索引，否则为 &lt;code&gt;0&lt;/code&gt;。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;如果任何功能引用指定的字符串，则为关联的字符串表的节头索引，否则为 &lt;code&gt;0&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;对于动态目标文件，为关联的 &lt;code&gt;SHT_SUNW_capchain&lt;/code&gt; 表的节头索引，否则为 &lt;code&gt;0&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_symsort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_tlssort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的字符串表的节头索引。此索引是与 &lt;code&gt;SHT_DYNSYM&lt;/code&gt; 节所使用的字符串表相同的字符串表。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;比上一个局部符号 &lt;code&gt;STB_LOCAL&lt;/code&gt; 的符号表索引大一。由于 &lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt; 仅包含局部符号，因此 &lt;code&gt;sh_info&lt;/code&gt; 等于表中的符号数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_syminfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的 &lt;code&gt;.dynamic&lt;/code&gt; 节的节头索引。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_verdef&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的字符串表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;节中版本定义的数量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_verneed&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的字符串表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;节中版本依赖性的数量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_versym&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;关联的符号表的节头索引。&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;节合并&#34;&gt;节合并&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;SHF_MERGE&lt;/code&gt; 节标志可用于标记可重定位目标文件中的 &lt;code&gt;SHT_PROGBITS&lt;/code&gt; 节。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-10675&#34;&gt;表 12-8&lt;/a&gt;。此标志表示该节可以与其他目标文件中的兼容节合并。这类合并有可能减小通过这些可重定位目标文件生成的任何可执行文件或共享目标文件的大小。减小文件大小还有助于改善生成的目标文件的运行时性能。&lt;/p&gt;
&lt;p&gt;带有 &lt;code&gt;SHF_MERGE&lt;/code&gt; 标志的节表示该节遵循以下特征：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;该节为只读。包含该节的程序在运行时绝对不可能修改该节的数据。&lt;/li&gt;
&lt;li&gt;从单独的重定位记录可以访问该节中的每一项。生成访问这些项的代码时，程序代码无法针对该节中的项的相对位置做出任何假设。&lt;/li&gt;
&lt;li&gt;如果该节还设置了 &lt;code&gt;SHF_STRINGS&lt;/code&gt; 标志，那么该节只能包含以空字符结尾的字符串。空字符只能作为字符串结束符，而不能出现在任何字符串的中间位置。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;SHF_MERGE&lt;/code&gt; 是一个可选标志，用于表示进行优化的可能性。允许链接编辑器执行优化，或忽略优化。任一情况下，链接编辑器都会创建一个有效的输出目标文件。当前，链接编辑器仅对包含使用 &lt;code&gt;SHF_STRINGS&lt;/code&gt; 标志进行标记的字符串数据的节执行节合并。&lt;/p&gt;
&lt;p&gt;同时设置了 &lt;code&gt;SHF_STRINGS&lt;/code&gt; 节标志和 &lt;code&gt;SHF_MERGE&lt;/code&gt; 标志时，该节中的字符串就可以与其他兼容节中的字符串合并。链接编辑器使用与用于压缩 &lt;code&gt;SHT_STRTAB&lt;/code&gt; 字符串表（&lt;code&gt;.strtab&lt;/code&gt; 和 &lt;code&gt;.dynstr&lt;/code&gt;）的字符串压缩算法相同的字符串压缩算法来合并此类节。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;重复字符串会缩减为一个。&lt;/li&gt;
&lt;li&gt;会消除尾部字符串。例如，如果输入节包含字符串 &amp;quot;bigdog&amp;quot; 和 &amp;quot;dog&amp;quot;，那么将消除较小的 &amp;quot;dog&amp;quot;，并使用较大的字符串的尾部表示较小的字符串。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目前，链接编辑器仅对由没有特殊对齐限制的单字节大小字符组成的字符串执行字符串合并。具体来说，必须具备以下节特征。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sh_entsize&lt;/code&gt; 必须为 &lt;code&gt;0&lt;/code&gt; 或 &lt;code&gt;1&lt;/code&gt;。不支持包含宽字符的节。&lt;/li&gt;
&lt;li&gt;仅合并字节对齐的节，其中 &lt;code&gt;sh_addralign&lt;/code&gt; 为 &lt;code&gt;0&lt;/code&gt; 或 &lt;code&gt;1&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 可以使用链接编辑器的 &lt;code&gt;-z nocompstrtab&lt;/code&gt; 选项抑制任何字符串表压缩。&lt;/p&gt;
&lt;h2 id=&#34;特殊节&#34;&gt;特殊节&lt;/h2&gt;
&lt;p&gt;包含程序和控制信息的各种节。下表中的各节由系统使用，并且具有指明的类型和属性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-10 ELF 特殊节&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;类型&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;属性&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.bss&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.comment&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.data&lt;/code&gt;、&lt;code&gt;.data1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.dynamic&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_DYNAMIC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.dynstr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_STRTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.dynsym&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_DYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.eh_frame_hdr&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_AMD64_UNWIND&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.eh_frame&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_AMD64_UNWIND&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.fini&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_EXECINSTR&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.fini_array&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_FINI_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.got&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-74186.html#scrolltoc&#34;&gt;全局偏移表（特定于处理器）&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.hash&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_HASH&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.init&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_EXECINSTR&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.init_array&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_INIT_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.interp&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-34713.html#chapter6-71736&#34;&gt;程序的解释程序&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.note&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOTE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.lbss&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE + SHF_AMD64_LARGE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.ldata&lt;/code&gt;、&lt;code&gt;.ldata1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE + SHF_AMD64_LARGE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.lrodata&lt;/code&gt;、&lt;code&gt;.lrodata1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_AMD64_LARGE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.plt&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-1235.html#scrolltoc&#34;&gt;过程链接表（特定于处理器）&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.preinit_array&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PREINIT_ARRAY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.rela&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_RELA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.rel&lt;/code&gt;name&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_REL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.rela&lt;/code&gt;name&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_RELA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.rodata&lt;/code&gt;、&lt;code&gt;.rodata1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.shstrtab&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_STRTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.strtab&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_STRTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参阅此表后面的说明。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.symtab&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.symtab_shndx&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.tbss&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE + SHF_TLS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.tdata&lt;/code&gt;、&lt;code&gt;.tdata1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE + SHF_TLS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.text&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_EXECINSTR&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_bss&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_NOBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_cap&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_cap&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_capchain&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_capchain&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_capinfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_heap&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_PROGBITS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC + SHF_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_dynsymsort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_symsort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_dymtlssort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_tlssort&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_move&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_reloc&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_REL``SHT_RELA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_syminfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_syminfo&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;.SUNW_version&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_verdef``SHT_SUNW_verneed``SHT_SUNW_versym&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.bss&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;构成程序的内存映像的未初始化数据。根据定义，系统在程序开始运行时会将数据初始化为零。如节类型 &lt;code&gt;SHT_NOBITS&lt;/code&gt; 所指明的那样，此节不会占用任何文件空间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.comment&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;注释信息，通常由编译系统的组件提供。此节可以由 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN1mcs-1&#34;&gt;&lt;code&gt;mcs&lt;/code&gt;(1)&lt;/a&gt; 进行处理。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.data&lt;/code&gt;, &lt;code&gt;.data1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;构成程序的内存映像的已初始化数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.dynamic&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;动态链接信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-42444.html#scrolltoc&#34;&gt;动态节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.dynstr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;进行动态链接所需的字符串，通常是表示与符号表各项关联的名称的字符串。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.dynsym&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;动态链接符号表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.eh_frame_hdr&lt;/code&gt;、&lt;code&gt;.eh_frame&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于展开栈的调用帧信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.fini&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;可执行指令，用于构成包含此节的可执行文件或共享目标文件的单个终止函数。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter3-8.html#scrolltoc&#34;&gt;初始化和终止例程&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.fini_array&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;函数指针数组，用于构成包含此节的可执行文件或共享目标文件的单个终止数组。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter3-8.html#scrolltoc&#34;&gt;初始化和终止例程&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.got&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;全局偏移表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-74186.html#scrolltoc&#34;&gt;全局偏移表（特定于处理器）&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.hash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号散列表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-48031.html#scrolltoc&#34;&gt;散列表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.init&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;可执行指令，用于构成包含此节的可执行文件或共享目标文件的单个初始化函数。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter3-8.html#scrolltoc&#34;&gt;初始化和终止例程&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.init_array&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;函数指针数组，用于构成包含此节的可执行文件或共享目标文件的单个初始化数组。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter3-8.html#scrolltoc&#34;&gt;初始化和终止例程&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.interp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;程序的解释程序的路径名。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-34713.html#chapter6-71736&#34;&gt;程序的解释程序&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.lbss&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;特定于 x64 的未初始化的数据。此数据与 &lt;code&gt;.bss&lt;/code&gt; 类似，但用于大小超过 2 GB 的节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.ldata&lt;/code&gt;, &lt;code&gt;.ldata1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;特定于 x64 的已初始化数据。此数据与 &lt;code&gt;.data&lt;/code&gt; 类似，但用于大小超过 2 GB 的节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.lrodata&lt;/code&gt;, &lt;code&gt;.lrodata1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;特定于 x64 的只读数据。此数据与 &lt;code&gt;.rodata&lt;/code&gt; 类似，但用于大小超过 2 GB 的节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.note&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-18048.html#scrolltoc&#34;&gt;注释节&lt;/a&gt;中说明了该格式的信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.plt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;过程链接表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-1235.html#scrolltoc&#34;&gt;过程链接表（特定于处理器）&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.preinit_array&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;函数指针数组，用于构成包含此节的可执行文件或共享目标文件的单个预初始化数组。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter3-8.html#scrolltoc&#34;&gt;初始化和终止例程&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.rela&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;不适用于特定节的重定位。此节的用途之一是用于寄存器重定位。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#chapter7-25&#34;&gt;寄存器符号&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.rel&lt;/code&gt;name&lt;code&gt;、`.rela`name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重定位信息，如&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;中所述。如果文件具有包括重定位的可装入段，则此节的属性将包括 &lt;code&gt;SHF_ALLOC&lt;/code&gt; 位。否则，该位会处于禁用状态。通常，name 由应用重定位的节提供。因此，&lt;code&gt;.text&lt;/code&gt; 的重定位节的名称通常为 &lt;code&gt;.rel.text&lt;/code&gt; 或 &lt;code&gt;.rela.text&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.rodata&lt;/code&gt;, &lt;code&gt;.rodata1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通常构成进程映像中的非可写段的只读数据。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-83432.html#scrolltoc&#34;&gt;程序头&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.shstrtab&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;节名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.strtab&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字符串，通常是表示与符号表各项关联的名称的字符串。如果文件具有包括符号字符串表的可装入段，则此节的属性将包括 &lt;code&gt;SHF_ALLOC&lt;/code&gt; 位。否则，该位会处于禁用状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.symtab&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号表，如&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;中所述。如果文件具有包括符号表的可装入段，则此节的属性将包括 &lt;code&gt;SHF_ALLOC&lt;/code&gt; 位。否则，该位会处于禁用状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.symtab_shndx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节包含特殊符号表的节索引数组，如 &lt;code&gt;.symtab&lt;/code&gt; 所述。如果关联的符号表节包括 &lt;code&gt;SHF_ALLOC&lt;/code&gt; 位，则此节的属性也将包括该位。否则，该位会处于禁用状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.tbss&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节包含构成程序的内存映像的未初始化线程局部数据。根据定义，为每个新执行流实例化数据时，系统都会将数据初始化为零。如节类型 &lt;code&gt;SHT_NOBITS&lt;/code&gt; 所指明的那样，此节不会占用任何文件空间。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.tdata&lt;/code&gt;, &lt;code&gt;.tdata1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些节包含已初始化的线程局部数据，这些数据构成程序的内存映像。对于每个新执行流，系统会对其内容的副本进行实例化。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.text&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;程序的&lt;strong&gt;文本&lt;/strong&gt;或可执行指令。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_bss&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;共享目标文件的部分初始化数据，这些数据构成程序的内存映像。数据会在运行时进行初始化。如节类型 &lt;code&gt;SHT_NOBITS&lt;/code&gt; 所指明的那样，此节不会占用任何文件空间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_cap&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;功能要求。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_capchain&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;功能链表。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_capinfo&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;功能符号信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-28.html#scrolltoc&#34;&gt;功能节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_heap&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通过 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN3Adldump-3c&#34;&gt;&lt;code&gt;dldump&lt;/code&gt;(3C)&lt;/a&gt; 创建的动态可执行文件的&lt;strong&gt;堆&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_dynsymsort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt; – &lt;code&gt;.dynsym&lt;/code&gt; 组合符号表中符号的索引数组。该索引进行排序，以按照地址递增的顺序引用符号。不表示变量或函数的符号不包括在内。对于冗余全局符号和弱符号，仅保留弱符号。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#gepev&#34;&gt;符号排序节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_dyntlssort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt; – &lt;code&gt;.dynsym&lt;/code&gt; 组合符号表中线程局部存储符号的索引数组。该索引进行排序，以按照偏移递增的顺序引用符号。不表示 TLS 变量的符号不包括在内。对于冗余全局符号和弱符号，仅保留弱符号。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#gepev&#34;&gt;符号排序节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;扩充 &lt;code&gt;.dynsym&lt;/code&gt; 节。此节包含局部函数符号，以在完整的 &lt;code&gt;.symtab&lt;/code&gt; 节不可用时在上下文中使用。链接编辑器始终将 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 节的数据放置在紧邻 &lt;code&gt;.dynsym&lt;/code&gt; 节之前。这两个节始终使用相同的 &lt;code&gt;.dynstr&lt;/code&gt; 字符串表节。这种放置和组织方式使两个符号表可以被视为一个更大的符号表。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#scrolltoc&#34;&gt;符号表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_move&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;部分初始化数据的附加信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-24.html#scrolltoc&#34;&gt;移动节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_reloc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重定位信息，如&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#scrolltoc&#34;&gt;重定位节&lt;/a&gt;中所述。此节是多个重定位节的串联，用于为引用各个重定位记录提供更好的临近性。由于仅有重定位记录的偏移有意义，因此节的 &lt;code&gt;sh_info&lt;/code&gt; 值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_syminfo&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;其他符号表信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter7-17.html#scrolltoc&#34;&gt;Syminfo 表节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;版本控制信息。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54676.html#scrolltoc&#34;&gt;版本控制节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具有点 (.) 前缀的节名为系统而保留，但如果这些节的现有含义符合要求，则应用程序也可以使用这些节。应用程序可以使用不带前缀的名称，以避免与系统节产生冲突。使用目标文件格式，可以定义非保留的节。一个目标文件可以包含多个同名的节。&lt;/p&gt;
&lt;p&gt;保留用于处理器体系结构的节名称通过在节名称前加上体系结构名称的缩写而构成。该名称应来自用于 &lt;code&gt;e_machine&lt;/code&gt; 的体系结构名称。例如，&lt;code&gt;.Foo.psect&lt;/code&gt; 是根据 &lt;code&gt;FOO&lt;/code&gt; 体系结构定义的 &lt;code&gt;psect&lt;/code&gt; 节。&lt;/p&gt;
&lt;p&gt;现有扩展使用其历史名称。&lt;/p&gt;
&lt;h2 id=&#34;comdat-节&#34;&gt;COMDAT 节&lt;/h2&gt;
&lt;p&gt;COMDAT 节由其节名称 (&lt;code&gt;sh_name&lt;/code&gt;) 唯一标识。如果链接编辑器遇到节名称相同的 &lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt; 类型的多个节，则将保留第一个节，而丢弃其余的节。任何应用于丢弃的 &lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt; 节的重定位都会被忽略。在丢弃的节中定义的任何符号都会被删除。&lt;/p&gt;
&lt;p&gt;此外，使用 &lt;code&gt;-xF&lt;/code&gt; 选项调用编译器时，链接编辑器还支持用于对节重新排序的节命名约定。如果将函数放入名为 &lt;code&gt;.&lt;/code&gt;sectname&lt;code&gt;%&lt;/code&gt; funcname 的 &lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt; 节中，则最后保留的几个 &lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt; 节都将并入名为 &lt;code&gt;.&lt;/code&gt;sectname 的节中。此方法可用于将 &lt;code&gt;SHT_SUNW_COMDAT&lt;/code&gt; 节放入作为最终目标位置的 &lt;code&gt;.text&lt;/code&gt;、&lt;code&gt;.data&lt;/code&gt; 或其他任何节。&lt;/p&gt;
&lt;h2 id=&#34;组节&#34;&gt;组节&lt;/h2&gt;
&lt;p&gt;一些节会出现在相关的组中。例如，内置函数的外部定义除了要求包含可执行指令的节外，可能还会要求其他信息。此附加信息可以是包含引用的字面值的只读数据节、一个或多个调试信息节或其他信息节。&lt;/p&gt;
&lt;p&gt;组节之间可以存在内部引用。但是，如果删除了其中某节，或者将其中某节替换为另一个目标文件中的副本，则这些引用将没有意义。因此，应将这些组作为一个单元包括在链接目标文件中或从中忽略。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt; 类型的节可定义这样分组的一组节：包含方目标文件的其中一个符号表中的某个符号名称为节组提供签名。&lt;code&gt;SHT_GROUP&lt;/code&gt; 节的节头会指定标识符号项。&lt;code&gt;sh_link&lt;/code&gt; 成员包含含有该项的符号表节的节头索引。&lt;code&gt;sh_info&lt;/code&gt; 成员包含标识项的符号表索引。节头的 &lt;code&gt;sh_flags&lt;/code&gt; 成员值为零。节名 (&lt;code&gt;sh_name&lt;/code&gt;) 未指定。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt; 节的节数据是 &lt;code&gt;Elf32_Word&lt;/code&gt; 项的数组。第一项是一个标志字。其余项是一系列节头索引。&lt;/p&gt;
&lt;p&gt;当前定义了以下标志：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-11 ELF 组节标志&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;GRP_COMDAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;GRP_COMDAT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GRP_COMDAT&lt;/code&gt; 是一个 &lt;code&gt;COMDAT&lt;/code&gt; 组。该组可以与另一个目标文件中的 &lt;code&gt;COMDAT&lt;/code&gt; 组重复，其中，重复的定义是具有相同的组签名。在这类情况下，链接编辑器将仅保留其中一个重复组。其余组的成员会被丢弃。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;SHT_GROUP&lt;/code&gt; 节中的节头索引标识构成该组的节。这些节必须在其 &lt;code&gt;sh_flags&lt;/code&gt; 节头成员中设置 &lt;code&gt;SHF_GROUP&lt;/code&gt; 标志。如果链接编辑器决定删除节组，则它将删除组的所有成员。&lt;/p&gt;
&lt;p&gt;为了便于删除组，并且不保留未使用的引用，同时仅对符号表进行最少的处理，请遵循以下规则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;必须使用符号表各项中包含的 &lt;code&gt;STB_GLOBAL&lt;/code&gt; 或 &lt;code&gt;STB_WEAK&lt;/code&gt; 绑定和节索引 &lt;code&gt;SHN_UNDEF&lt;/code&gt;，才能从组外的节中引用组成该组的节。包含引用的目标文件中定义的相同符号必须具有独立于该引用的符号表项。组外的各节不能引用对组节中包含的地址具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定的符号，包括 &lt;code&gt;STT_SECTION&lt;/code&gt; 类型的符号。&lt;/li&gt;
&lt;li&gt;不允许从组外对组成该组的节进行非符号引用。例如，不能在 &lt;code&gt;sh_link &lt;/code&gt;或 &lt;code&gt;sh_info&lt;/code&gt; 成员中使用组成员的节头索引。&lt;/li&gt;
&lt;li&gt;如果丢弃了某个组的成员，则可以删除相对于该组的某一节定义的符号表项。如果此符号表项包含在不属于该组的符号表节中，则会进行此删除。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;功能节&#34;&gt;功能节&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节标识目标文件的功能要求。这些功能称为&lt;strong&gt;目标文件&lt;/strong&gt;功能。此节还可以标识目标文件中的函数或初始化的数据项的功能要求。这些功能称为&lt;strong&gt;符号&lt;/strong&gt;功能。此节包含以下结构的数组。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Word      c_tag;
        union {
                Elf32_Word      c_val;
                Elf32_Addr      c_ptr;
        } c_un;
} Elf32_Cap;

typedef struct {
        Elf64_Xword     c_tag;
        union {
                Elf64_Xword     c_val;
                Elf64_Addr      c_ptr;
        } c_un;
} Elf64_Cap;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对于此类型的每一个目标文件，&lt;code&gt;c_tag&lt;/code&gt; 都会控制 &lt;code&gt;c_un&lt;/code&gt; 的解释。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;c_val&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些目标文件表示具有各种解释的整数值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;c_ptr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些目标文件表示程序虚拟地址。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;存在以下功能标记。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-12 ELF 功能数组标记&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_un&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_NULL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;已忽略&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_HW_1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_val&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_SF_1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_val&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_HW_2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_val&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_PLAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_ptr&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_MACH&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_ptr&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;CA_SUNW_ID&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;c_ptr&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_NULL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标记功能组的结尾。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_HW_1&lt;/code&gt;、&lt;code&gt;CA_SUNW_HW_2&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;表示硬件功能值。&lt;code&gt;c_val&lt;/code&gt; 元素包含用于表示关联硬件功能的值。在 SPARC 平台上，硬件功能在 &lt;code&gt;sys/auxv_SPARC.h&lt;/code&gt; 中定义。在 x86 平台上，硬件功能在 &lt;code&gt;sys/auxv_386.h&lt;/code&gt; 中定义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_SF_1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;表示软件功能值。&lt;code&gt;c_val&lt;/code&gt; 元素包含用于表示 &lt;code&gt;sys/elf.h&lt;/code&gt; 中定义的关联软件功能的值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_PLAT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定平台名称。&lt;code&gt;c_ptr&lt;/code&gt; 元素包含以空字符结尾的字符串的字符串表偏移，该偏移定义平台名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_MACH&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定计算机名。&lt;code&gt;c_ptr&lt;/code&gt; 元素包含以空字符结尾的字符串的字符串表偏移，该偏移定义计算机硬件名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CA_SUNW_ID&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定功能标识符名称。&lt;code&gt;c_ptr&lt;/code&gt; 元素包含以空字符结尾的字符串的字符串表偏移，该偏移定义标识符名称。此元素并不定义功能，而是为功能组指定唯一的符号名称，通过该名称可以引用该功能组。此标识符名称附加在任何在链接编辑器的 &lt;code&gt;-z symbolcap&lt;/code&gt; 处理过程中转换为局部符号的全局符号名称中。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-13.html#giskc&#34;&gt;将目标文件功能转换为符号功能&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可重定位目标文件可以包含功能节。链接编辑器会将多个输入可重定位目标文件中的所有功能节合并到一个单独的功能节中。使用链接编辑器，还可在生成目标文件时定义功能。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-13.html#chapter2-19&#34;&gt;标识功能要求&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;一个目标文件中可以存在多个以 &lt;code&gt;CA_SUNW_NULL&lt;/code&gt; 结尾的功能组。从索引 &lt;code&gt;0&lt;/code&gt; 开始的第一个组标识目标文件功能。定义目标文件功能的动态目标文件包含与该节关联的 &lt;code&gt;PT_SUNWCAP&lt;/code&gt; 程序头。使用此程序头，运行时链接程序可以对照可供进程使用的系统功能来验证目标文件。使用不同目标文件功能的动态目标文件可以提供使用过滤器的灵活运行时环境。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/appendixc-1.html#scrolltoc&#34;&gt;特定于功能的共享目标文件&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;其他功能组标识符号功能。符号功能允许一个目标文件中存在同一符号的多个实例。每个实例都关联一组必须可供要使用的实例使用的功能。存在符号功能时，&lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节的 &lt;code&gt;sh_link&lt;/code&gt; 元素指向关联的 &lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 表。使用符号功能的动态目标文件可以提供针对特定的系统启用优化功能的灵活方式。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-13.html#giskh&#34;&gt;创建符号功能函数系列&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 表与关联的符号表对应。&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 节的 &lt;code&gt;sh_link&lt;/code&gt; 元素指向关联的符号表。与功能关联的函数在 &lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 表中具有索引，这些索引用于标识 &lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节中的功能组。&lt;/p&gt;
&lt;p&gt;在动态目标文件中，&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 节的 &lt;code&gt;sh_info&lt;/code&gt; 元素指向功能链表 &lt;code&gt;SHT_SUNW_capchain&lt;/code&gt;。运行时链接程序使用此表查找功能系列的成员。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 表项具有以下格式。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef Elf32_Word    Elf32_Capinfo;
typedef Elf64_Xword   Elf64_Capinfo;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;此表中的元素可以使用以下宏进行解释。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#define ELF32_C_SYM(info)       ((info)&amp;gt;&amp;gt;8)
#define ELF32_C_GROUP(info)     ((unsigned char)(info))
#define ELF32_C_INFO(sym, grp)  (((sym)&amp;lt;&amp;lt;8)+(unsigned char)(grp))

#define ELF64_C_SYM(info)       ((info)&amp;gt;&amp;gt;32)
#define ELF64_C_GROUP(info)     ((Elf64_Word)(info))
#define ELF64_C_INFO(sym, grp)  (((Elf64_Xword)(sym)&amp;lt;&amp;lt;32)+(Elf64_Xword)(grp))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 项的 &lt;code&gt;group&lt;/code&gt;（组）元素包含此符号关联的 &lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 表的索引。因此该元素可以将符号与功能组关联起来。保留的组索引 &lt;code&gt;CAPINFO_SUNW_GLOB&lt;/code&gt; 标识功能实例系列的前置符号，该符号提供缺省实例。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;名称&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CAPINFO_SUNW_GLOB&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0xff&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;标识缺省符号。此符号不与任何特定的功能关联，但指向一个符号功能系列。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 项的 &lt;code&gt;symbol&lt;/code&gt; 元素包含与此符号关联的前置符号的索引。链接编辑器使用组和符号信息处理可重定位目标文件中的功能符号系列，并在任何输出目标文件中构造所需的功能信息。在动态目标文件中，前置符号的符号元素（使用组 &lt;code&gt;CAPINFO_SUNW_GLOB&lt;/code&gt; 标记）是 &lt;code&gt;SHT_SUNW_capchain&lt;/code&gt; 表的索引。此索引使运行时链接程序可以遍历功能链表，从该索引开始检查其后的每一项，直至找到 &lt;code&gt;0&lt;/code&gt; 项为止。这些链项包含每个功能系列成员的符号索引。&lt;/p&gt;
&lt;p&gt;定义符号功能的动态目标文件具有一个 &lt;code&gt;DT_SUNW_CAP&lt;/code&gt; 动态项和一个 &lt;code&gt;DT_SUNW_CAPINFO&lt;/code&gt; 动态项。这些项分别标识 &lt;code&gt;SHT_SUNW_cap&lt;/code&gt; 节和 &lt;code&gt;SHT_SUNW_capinfo&lt;/code&gt; 节。目标文件还包含 &lt;code&gt;DT_SUNW_CAPCHAIN&lt;/code&gt;、&lt;code&gt;DT_SUNW_CAPCHAINENT&lt;/code&gt; 和 &lt;code&gt;DT_SUNW_CAPCHAINSZ&lt;/code&gt; 项，这些项标识 &lt;code&gt;SHT_SUNW_capchain&lt;/code&gt; 节、节项大小和总大小。通过这些项，运行时链接程序可以使用符号功能实例系列建立最好的符号以供使用。&lt;/p&gt;
&lt;p&gt;目标文件可以仅定义目标文件功能，或仅定义符号功能，也可以同时定义这两种功能。目标文件功能组从索引 &lt;code&gt;0&lt;/code&gt; 开始。符号功能组从 &lt;code&gt;0&lt;/code&gt; 以外的其他任何索引开始。如果目标文件定义符号功能，但不定义目标文件功能，那么在索引 &lt;code&gt;0&lt;/code&gt; 处必须存在一个 &lt;code&gt;CA_SUNW_NULL&lt;/code&gt; 项以表示符号功能的开始。&lt;/p&gt;
&lt;h2 id=&#34;散列表节&#34;&gt;散列表节&lt;/h2&gt;
&lt;p&gt;散列表由用于符号表访问的 &lt;code&gt;Elf32_Word&lt;/code&gt; 或 &lt;code&gt;Elf64_Word&lt;/code&gt; 目标文件组成。&lt;code&gt;SHT_HASH&lt;/code&gt; 节提供了此散列表。与散列关联的符号表在散列表节头的 &lt;code&gt;sh_link&lt;/code&gt; 项中指定。下图中使用了标签来帮助说明散列表的结构，但这些标签不属于规范的一部分。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-4 符号散列表&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/HashTbl.png&#34; alt=&#34;image:ELF 散列表信息示例。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;bucket&lt;/code&gt; 数组包含 &lt;code&gt;nbucket&lt;/code&gt; 项，&lt;code&gt;chain&lt;/code&gt; 数组包含 &lt;code&gt;nchain&lt;/code&gt; 项。索引从 &lt;code&gt;0&lt;/code&gt; 开始。&lt;code&gt;bucket&lt;/code&gt; 和 &lt;code&gt;chain&lt;/code&gt; 都包含符号表索引。链表的各项与符号表对应。符号表的项数应等于 &lt;code&gt;nchain&lt;/code&gt;，因此符号表索引也可选择链表的各项。&lt;/p&gt;
&lt;p&gt;接受符号名称的散列函数会返回一个值，用于计算 &lt;code&gt;bucket&lt;/code&gt; 索引。因此，如果散列函数为某个名称返回值 x，则 &lt;code&gt;bucket&lt;/code&gt; [x% &lt;code&gt;nbucket&lt;/code&gt;] 将会计算出索引 y。此索引为符号表和链表的索引。如果符号表项不是需要的名称，则 &lt;code&gt;chain&lt;/code&gt;[y] 将使用相同的散列值计算出符号表的下一项。&lt;/p&gt;
&lt;p&gt;在所选符号表项具有需要的名称或者 &lt;code&gt;chain&lt;/code&gt; 项包含值 &lt;code&gt;STN_UNDEF&lt;/code&gt; 之前，可以遵循 &lt;code&gt;chain&lt;/code&gt; 链接。&lt;/p&gt;
&lt;p&gt;散列函数如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;unsigned long
elf_Hash(const unsigned char *name)
{
    unsigned long h = 0, g;
 
        while (*name)
        {
             h = (h &amp;lt;&amp;lt; 4) + *name++;
             if (g = h &amp;amp; 0xf0000000)
                  h ^= g &amp;gt;&amp;gt; 24;
                   h &amp;amp;= ~g;
        }
        return h;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;移动节&#34;&gt;移动节&lt;/h2&gt;
&lt;p&gt;通常在 ELF 文件中，已初始化的数据变量会保留在目标文件中。如果数据变量很大，并且仅包含少量的已初始化（非零）元素，则整个变量仍会保留在目标文件中。&lt;/p&gt;
&lt;p&gt;包含大型部分初始化数据变量（如 &lt;code&gt;FORTRAN ``COMMON&lt;/code&gt; 块）的目标文件可能会产生较大的磁盘空间开销。&lt;code&gt;SHT_SUNW_move&lt;/code&gt; 节提供了一种压缩这些数据变量的机制。此压缩机制可减小关联目标文件的磁盘空间大小。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt; 节包含多个类型为 &lt;code&gt;ELF32_Move&lt;/code&gt; 或 &lt;code&gt;Elf64_Move&lt;/code&gt; 的项。使用这些项，可以将数据变量定义为暂定项目 (&lt;code&gt;.bss&lt;/code&gt;)。这些项目在目标文件中不占用任何空间，但在运行时会构成目标文件的内存映像。移动记录可确定如何初始化内存映像的数据，从而构造完整的数据变量。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ELF32_Move&lt;/code&gt; 和 &lt;code&gt;Elf64_Move&lt;/code&gt; 项的定义如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Lword       m_value;
        Elf32_Word        m_info;
        Elf32_Word        m_poffset;
        Elf32_Half        m_repeat;
        Elf32_Half        m_stride;
} Elf32_Move;

#define ELF32_M_SYM(info)       ((info)&amp;gt;&amp;gt;8)
#define ELF32_M_SIZE(info)      ((unsigned char)(info))
#define ELF32_M_INFO(sym, size) (((sym)&amp;lt;&amp;lt;8)+(unsigned char)(size))

typedef struct {
        Elf64_Lword       m_value;
        Elf64_Xword       m_info;
        Elf64_Xword       m_poffset;
        Elf64_Half        m_repeat;
        Elf64_Half        m_stride;
} Elf64_Move;

#define ELF64_M_SYM(info)       ((info)&amp;gt;&amp;gt;8)
#define ELF64_M_SIZE(info)      ((unsigned char)(info))
#define ELF64_M_INFO(sym, size) (((sym)&amp;lt;&amp;lt;8)+(unsigned char)(size))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这些结构的元素如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;m_value&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;初始化值，即移到内存映像中的值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;m_info&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号表索引（与应用初始化相关）以及初始化的偏移的大小（字节）。成员的低 8 位定义大小，该大小可以是 1、2、4 或 8。高位字节定义符号索引。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;m_poffset&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;相对于应用初始化的关联符号的偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;m_repeat&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重复计数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;m_stride&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;幅度计数。该值表示在执行重复初始化时应跳过的单元数。单元是由 &lt;code&gt;m_info&lt;/code&gt; 定义的初始化目标文件的大小。&lt;code&gt;m_stride&lt;/code&gt; 值为零表示连续对单元执行初始化。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以下数据定义以前在目标文件中会占用 &lt;code&gt;0x8000&lt;/code&gt; 个字节：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        int     one;
        char    two;
} Data;

Data move[0x1000] = {
        {0, 0},       {1, &#39;1&#39;},     {0, 0},
        {0xf, &#39;F&#39;},   {0xf, &#39;F&#39;},   {0, 0},
        {0xe, &#39;E&#39;},   {0, 0},       {0xe, &#39;E&#39;}
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_move&lt;/code&gt; 节可用于说明此数据。数据项在 &lt;code&gt;.bss&lt;/code&gt; 节中定义。使用相应的移动项初始化数据项中的非零元素。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ elfdump -s data | fgrep move
      [17]  0x00020868 0x00008000  OBJT GLOB 0   .bss       move
$ elfdump -m data

Move Section:  .SUNW_move
    symndx     offset   size repeat stride            value  with respect to
      [17]       0x44      4      1      1       0x45000000  move
      [17]       0x40      4      1      1              0xe  move
      [17]       0x34      4      1      1       0x45000000  move
      [17]       0x30      4      1      1              0xe  move
      [17]       0x1c      4      2      1       0x46000000  move
      [17]       0x18      4      2      1              0xf  move
      [17]        0xc      4      1      1       0x31000000  move
      [17]        0x8      4      1      1              0x1  move
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可重定位目标文件提供的移动节可串联并在链接编辑器所创建的目标文件中输出。但是，在以下条件下链接编辑器将处理移动项，并将其内容扩展到传统的数据项中。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输出文件为静态可执行文件。&lt;/li&gt;
&lt;li&gt;移动项的大小大于移动数据会扩展到的符号的大小。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-z nopartial&lt;/code&gt; 选项有效。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;注释节&#34;&gt;注释节&lt;/h2&gt;
&lt;p&gt;供应商或系统工程师可能需要使用特殊信息标记目标文件，以便其他程序可根据此信息检查一致性或兼容性。为此，可使用 &lt;code&gt;SHT_NOTE&lt;/code&gt; 类型的节和 &lt;code&gt;PT_NOTE&lt;/code&gt; 类型的程序头元素。&lt;/p&gt;
&lt;p&gt;节和程序头元素中的注释信息包含任意数量的项，如下图所示。对于 64 位目标文件和 32 位目标文件，每一项都是一个目标处理器格式的 4 字节字的数组。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-18048.html#chapter6-fig-36&#34;&gt;图 12-6&lt;/a&gt; 中所示的标签用于帮助说明注释信息的结构，但不属于规范的一部分。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-5 注释信息&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/NoteInfo.png&#34; alt=&#34;image:ELF 注释节信息。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;namesz&lt;/code&gt; 和 &lt;code&gt;name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;名称中的前 &lt;code&gt;namesz&lt;/code&gt; 个字节包含表示项的所有者或创建者的字符（以空字符结尾）。不存在用于避免名称冲突的正式机制。根据约定，供应商使用其各自的名称（如 &amp;quot;XYZ Computer Company&amp;quot;）作为标识符。如果不存在 &lt;code&gt;name&lt;/code&gt;，则 &lt;code&gt;namesz&lt;/code&gt; 值为零。如有必要，可使用填充确保描述符 4 字节对齐。&lt;code&gt;namesz&lt;/code&gt; 中不包括这种填充方式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;descsz&lt;/code&gt; 和 &lt;code&gt;desc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;desc&lt;/code&gt; 中的前 &lt;code&gt;descsz&lt;/code&gt; 个字节包含注释描述符。如果不存在描述符，则 &lt;code&gt;descsz&lt;/code&gt; 值为零。如有必要，可使用填充确保下一个注释项 4 字节对齐。&lt;code&gt;descsz&lt;/code&gt; 中不包括这种填充方式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;type&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;提供对描述符的解释。每个创建者可控制其各自的类型。单个 &lt;code&gt;type&lt;/code&gt; 值可以存在多种解释。程序必须同时识别名称和 &lt;code&gt;type&lt;/code&gt; 才能理解描述符。类型当前必须为非负数。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下图中所示的注释段包含两项。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-6 注释段示例&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/NoteSeg.png&#34; alt=&#34;image:ELF 注释节示例。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 系统会保留没有名称 (&lt;code&gt;namesz == 0&lt;/code&gt;) 以及名称长度为零 (&lt;code&gt;name[0] == &#39;\0&#39;&lt;/code&gt;) 的注释信息，但当前不定义任何类型。其他所有名称必须至少有一个非空字符。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;重定位节&#34;&gt;重定位节&lt;/h2&gt;
&lt;p&gt;重定位是连接符号引用与符号定义的过程。例如，程序调用函数时，关联的调用指令必须在执行时将控制权转移到正确的目标地址。可重定位文件必须包含说明如何修改其节内容的信息。通过此信息，可执行文件和共享目标文件可包含进程的程序映像的正确信息。重定位项即是这些数据。&lt;/p&gt;
&lt;p&gt;重定位项可具有以下结构。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Addr      r_offset;
        Elf32_Word      r_info;
} Elf32_Rel;
 
typedef struct {
        Elf32_Addr      r_offset;
        Elf32_Word      r_info;
        Elf32_Sword     r_addend;
} Elf32_Rela;

typedef struct {
        Elf64_Addr      r_offset;
        Elf64_Xword     r_info;
} Elf64_Rel;
 
typedef struct {
        Elf64_Addr      r_offset;
        Elf64_Xword     r_info;
        Elf64_Sxword    r_addend;
} Elf64_Rela;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r_offset&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员指定应用重定位操作的位置。不同的目标文件对于此成员的解释会稍有不同。对于可重定位文件，该值表示节偏移。重定位节说明如何修改文件中的其他节。重定位偏移会在第二节中指定一个存储单元。对于可执行文件或共享目标文件，该值表示受重定位影响的存储单元的虚拟地址。此信息使重定位项对于运行时链接程序更为有用。虽然为了使相关程序可以更有效地访问，不同目标文件的成员的解释会发生变化，但重定位类型的含义保持相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r_info&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员指定必须对其进行重定位的符号表索引以及要应用的重定位类型。例如，调用指令的重定位项包含所调用的函数的符号表索引。如果索引是未定义的符号索引 &lt;code&gt;STN_UNDEF&lt;/code&gt;，则重定位将使用零作为符号值。重定位类型特定于处理器。重定位项的重定位类型或符号表索引是将 &lt;code&gt;ELF32_R_TYPE&lt;/code&gt; 或 &lt;code&gt;ELF32_R_SYM&lt;/code&gt; 分别应用于项的 &lt;code&gt;r_info&lt;/code&gt; 成员所得的结果。&lt;code&gt;#define ELF32_R_SYM(info)             ((info)&amp;gt;&amp;gt;8) #define ELF32_R_TYPE(info)            ((unsigned char)(info)) #define ELF32_R_INFO(sym, type)       (((sym)&amp;lt;&amp;lt;8)+(unsigned char)(type)) #define ELF64_R_SYM(info)             ((info)&amp;gt;&amp;gt;32) #define ELF64_R_TYPE(info)            ((Elf64_Word)(info)) #define ELF64_R_INFO(sym, type)       (((Elf64_Xword)(sym)&amp;lt;&amp;lt;32)+ \                                         (Elf64_Xword)(type))&lt;/code&gt;对于 64 位 SPARC &lt;code&gt;Elf64_Rela&lt;/code&gt; 结构，&lt;code&gt;r_info&lt;/code&gt; 字段可进一步细分为 8 位类型标识符和 24 位类型相关数据字段。对于现有的重定位类型，数据字段为零。但是，新的重定位类型可能会使用数据位。&lt;code&gt;#define ELF64_R_TYPE_DATA(info)       (((Elf64_Xword)(info)&amp;lt;&amp;lt;32)&amp;gt;&amp;gt;40) #define ELF64_R_TYPE_ID(info)         (((Elf64_Xword)(info)&amp;lt;&amp;lt;56)&amp;gt;&amp;gt;56) #define ELF64_R_TYPE_INFO(data, type) (((Elf64_Xword)(data)&amp;lt;&amp;lt;8)+ \                                         (Elf64_Xword)(type))&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r_addend&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员指定常量加数，用于计算将存储在可重定位字段中的值。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;Rela&lt;/code&gt; 项包含显式加数。&lt;code&gt;Rel&lt;/code&gt; 类型的项会在要修改的位置中存储一个隐式加数。32 位 SPARC 仅使用 &lt;code&gt;Elf32_Rela&lt;/code&gt; 重定位项。64 位 SPARC 和 64 位 x86 仅使用 &lt;code&gt;Elf64_Rela&lt;/code&gt; 重定位项。因此，&lt;code&gt;r_addend&lt;/code&gt; 成员用作重定位加数。x86 仅使用 &lt;code&gt;Elf32_Rel&lt;/code&gt; 重定位项。要重定位的字段包含该加数。在所有情况下，加数和计算所得的结果使用相同的字节顺序。&lt;/p&gt;
&lt;p&gt;重定位节可以引用其他两个节：符号表（由 &lt;code&gt;sh_link&lt;/code&gt; 节头项标识）和要修改的节（由 &lt;code&gt;sh_info&lt;/code&gt; 节头项标识）。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#scrolltoc&#34;&gt;节&lt;/a&gt;中指定了这些关系。如果可重定位目标文件中存在重定位节，则需要 &lt;code&gt;sh_info&lt;/code&gt; 项，但对于可执行文件和共享目标文件，该项是可选的。重定位偏移满足执行重定位的要求。&lt;/p&gt;
&lt;p&gt;在所有情况下，&lt;code&gt;r_offset&lt;/code&gt; 值都会指定受影响存储单元的第一个字节的偏移或虚拟地址。重定位类型可指定要更改的位以及计算这些位的值的方法。&lt;/p&gt;
&lt;h3 id=&#34;重定位计算&#34;&gt;重定位计算&lt;/h3&gt;
&lt;p&gt;以下表示法用于说明重定位计算。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;A&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于计算可重定位字段的值的加数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;B&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行过程中将共享目标文件装入内存的基本地址。通常，生成的共享目标文件的基本虚拟地址为 &lt;code&gt;0&lt;/code&gt;。但是，共享目标文件的执行地址不相同。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-83432.html#scrolltoc&#34;&gt;程序头&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;G&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行过程中，重定位项的符号地址所在的全局偏移表中的偏移。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-74186.html#scrolltoc&#34;&gt;全局偏移表（特定于处理器）&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;GOT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;全局偏移表的地址。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-74186.html#scrolltoc&#34;&gt;全局偏移表（特定于处理器）&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;L&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号的过程链接表项的节偏移或地址。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-1235.html#scrolltoc&#34;&gt;过程链接表（特定于处理器）&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;P&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;r_offset&lt;/code&gt; 计算出的重定位的存储单元的节偏移或地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;S&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;索引位于重定位项中的符号的值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Z&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;索引位于重定位项中的符号的大小。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;sparc-重定位&#34;&gt;SPARC: 重定位&lt;/h3&gt;
&lt;p&gt;在 SPARC 平台上，重定位项适用于字节 (&lt;code&gt;byte8&lt;/code&gt;)、半字 (&lt;code&gt;half16&lt;/code&gt;)、字 (&lt;code&gt;word32&lt;/code&gt;) 和扩展字 (&lt;code&gt;xword64&lt;/code&gt;)。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocSparcBasic.png&#34; alt=&#34;image:SPARC 基本重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;重定位字段 (&lt;code&gt;disp19&lt;/code&gt;, &lt;code&gt;disp22&lt;/code&gt;, &lt;code&gt;disp30&lt;/code&gt;) 的 &lt;code&gt;dispn&lt;/code&gt; 系列都是字对齐、带符号扩展的 PC 相对位移。全部将值编码为其最低有效位都位于字的位置 0，仅在分配给值的位数方面有所不同。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocSparcDisp.png&#34; alt=&#34;image:SPARC disp 重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;d2/disp8&lt;/code&gt; 和 &lt;code&gt;d2/disp14&lt;/code&gt; 变体使用两个非连续位字段 &lt;code&gt;d2&lt;/code&gt; 和 &lt;code&gt;disp n&lt;/code&gt; 对 16 位和 10 位位移值进行编码。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocSparcD2Disp.png&#34; alt=&#34;image:SPARC d2/disp 重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;重定位字段的 &lt;code&gt;immn&lt;/code&gt; 系列（&lt;code&gt;imm5&lt;/code&gt;、&lt;code&gt;imm6&lt;/code&gt;、&lt;code&gt;imm7&lt;/code&gt;、&lt;code&gt;imm10&lt;/code&gt;、&lt;code&gt;imm13&lt;/code&gt; 和 &lt;code&gt;imm22&lt;/code&gt;）表示无符号整型常数。全部将值编码为其最低有效位都位于字的位置 0，仅在分配给值的位数方面有所不同。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocSparcImm.png&#34; alt=&#34;image:SPARC imm 重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;重定位字段的 &lt;code&gt;simmn&lt;/code&gt; 系列（&lt;code&gt;simm10&lt;/code&gt;、&lt;code&gt;simm11&lt;/code&gt;、&lt;code&gt;simm13&lt;/code&gt; 和 &lt;code&gt;simm22&lt;/code&gt;）表示带符号的整型常数。全部将值编码为其最低有效位都位于字的位置 0，仅在分配给值的位数方面有所不同。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocSparcSimm.png&#34; alt=&#34;image:SPARC simm 重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;sparc-重定位类型&#34;&gt;SPARC: 重定位类型&lt;/h4&gt;
&lt;p&gt;下表中的字段名称可确定重定位类型是否会检查 &lt;code&gt;overflow&lt;/code&gt;。计算出的重定位值可以大于预期的字段，并且重定位类型可以验证 (&lt;code&gt;V&lt;/code&gt;) 值是适合结果还是将结果截断 (&lt;code&gt;T&lt;/code&gt;)。例如，&lt;code&gt;V-simm13&lt;/code&gt; 表示计算出的值不能包含 &lt;code&gt;simm13&lt;/code&gt; 字段外有意义的非零位。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-13 SPARC: ELF 重定位类型&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;名称值字段计算&lt;code&gt;R_SPARC_NONE``0&lt;/code&gt;无无&lt;code&gt;R_SPARC_8``1``V-byte8``S + A``R_SPARC_16``2``V-half16``S + A``R_SPARC_32``3``V-word32``S + A``R_SPARC_DISP8``4``V-byte8``S + A - P``R_SPARC_DISP16``5``V-half16``S + A - P``R_SPARC_DISP32``6``V-disp32``S + A - P``R_SPARC_WDISP30``7``V-disp30``(S + A - P) &amp;gt;&amp;gt; 2``R_SPARC_WDISP22``8``V-disp22``(S + A - P) &amp;gt;&amp;gt; 2``R_SPARC_HI22``9``T-imm22``(S + A) &amp;gt;&amp;gt; 10``R_SPARC_22``10``V-imm22``S + A``R_SPARC_13``11``V-simm13``S + A``R_SPARC_LO10``12``T-simm13``(S + A) &amp;amp; 0x3ff``R_SPARC_GOT10``13``T-simm13``G &amp;amp; 0x3ff``R_SPARC_GOT13``14``V-simm13``G``R_SPARC_GOT22``15``T-simm22``G &amp;gt;&amp;gt; 10``R_SPARC_PC10``16``T-simm13``(S + A - P) &amp;amp; 0x3ff``R_SPARC_PC22``17``V-disp22``(S + A - P) &amp;gt;&amp;gt; 10``R_SPARC_WPLT30``18``V-disp30``(L + A - P) &amp;gt;&amp;gt; 2``R_SPARC_COPY``19&lt;/code&gt;无请参阅此表后面的说明。&lt;code&gt;R_SPARC_GLOB_DAT``20``V-word32``S + A``R_SPARC_JMP_SLOT``21&lt;/code&gt;无请参阅此表后面的说明。&lt;code&gt;R_SPARC_RELATIVE``22``V-word32``B + A``R_SPARC_UA32``23``V-word32``S + A``R_SPARC_PLT32``24``V-word32``L + A``R_SPARC_HIPLT22``25``T-imm22``(L + A) &amp;gt;&amp;gt; 10``R_SPARC_LOPLT10``26``T-simm13``(L + A) &amp;amp; 0x3ff``R_SPARC_PCPLT32``27``V-word32``L + A - P``R_SPARC_PCPLT22``28``V-disp22``(L + A - P) &amp;gt;&amp;gt; 10``R_SPARC_PCPLT10``29``V-simm13``(L + A - P) &amp;amp; 0x3ff``R_SPARC_10``30``V-simm10``S + A``R_SPARC_11``31``V-simm11``S + A``R_SPARC_HH22``34``V-imm22``(S + A) &amp;gt;&amp;gt; 42``R_SPARC_HM10``35``T-simm13``((S + A) &amp;gt;&amp;gt; 32) &amp;amp; 0x3ff``R_SPARC_LM22``36``T-imm22``(S + A) &amp;gt;&amp;gt; 10``R_SPARC_PC_HH22``37``V-imm22``(S + A - P) &amp;gt;&amp;gt; 42``R_SPARC_PC_HM10``38``T-simm13``((S + A - P) &amp;gt;&amp;gt; 32) &amp;amp; 0x3ff``R_SPARC_PC_LM22``39``T-imm22``(S + A - P) &amp;gt;&amp;gt; 10``R_SPARC_WDISP16``40``V-d2/disp14``(S + A - P) &amp;gt;&amp;gt; 2``R_SPARC_WDISP19``41``V-disp19``(S + A - P) &amp;gt;&amp;gt; 2``R_SPARC_7``43``V-imm7``S + A``R_SPARC_5``44``V-imm5``S + A``R_SPARC_6``45``V-imm6``S + A``R_SPARC_HIX22``48``V-imm22``((S + A) ^ 0xffffffffffffffff) &amp;gt;&amp;gt; 10``R_SPARC_LOX10``49``T-simm13``((S + A) &amp;amp; 0x3ff) | 0x1c00``R_SPARC_H44``50``V-imm22``(S + A) &amp;gt;&amp;gt; 22``R_SPARC_M44``51``T-imm10``((S + A) &amp;gt;&amp;gt; 12) &amp;amp; 0x3ff``R_SPARC_L44``52``T-imm13``(S + A) &amp;amp; 0xfff``R_SPARC_REGISTER``53``V-word32``S + A``R_SPARC_UA16``55``V-half16``S + A``R_SPARC_GOTDATA_HIX22``80``V-imm22``((S + A - GOT) &amp;gt;&amp;gt; 10) ^ ((S + A - GOT) &amp;gt;&amp;gt; 31)``R_SPARC_GOTDATA_LOX10``81``T-imm13``((S + A - GOT) &amp;amp; 0x3ff) | (((S + A - GOT) &amp;gt;&amp;gt; 31) &amp;amp; 0x1c00)``R_SPARC_GOTDATA_OP_HIX22``82``T-imm22``(G &amp;gt;&amp;gt; 10) ^ (G &amp;gt;&amp;gt; 31)``R_SPARC_GOTDATA_OP_LOX10``83``T-imm13``(G &amp;amp; 0x3ff) | ((G &amp;gt;&amp;gt; 31) &amp;amp; 0x1c00)``R_SPARC_GOTDATA_OP``84``Word32&lt;/code&gt;请参阅此表后面的说明。&lt;code&gt;R_SPARC_SIZE32``86``V-word32``Z + A``R_SPARC_WDISP10``88``V-d2/disp8``(S + A - P) &amp;gt;&amp;gt; 2&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 其他重定位类型可用于线程局部存储引用。这些重定位类型将在&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;中介绍。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;一些重定位类型的语义不只是简单的计算：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_GOT10&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_LO10&lt;/code&gt; 类似，不同的是此重定位指向符号的 &lt;code&gt;GOT&lt;/code&gt; 项的地址。此外，&lt;code&gt;R_SPARC_GOT10&lt;/code&gt; 还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_GOT13&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_13&lt;/code&gt; 类似，不同的是此重定位指向符号的 &lt;code&gt;GOT&lt;/code&gt; 项的地址。此外，&lt;code&gt;R_SPARC_GOT13&lt;/code&gt; 还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_GOT22&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_22&lt;/code&gt; 类似，不同的是此重定位指向符号的 &lt;code&gt;GOT&lt;/code&gt; 项的地址。此外，&lt;code&gt;R_SPARC_GOT22&lt;/code&gt; 还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_WPLT30&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_WDISP30&lt;/code&gt; 类似，不同的是此重定位指向符号的过程链接表项的地址。此外，&lt;code&gt;R_SPARC_WPLT30&lt;/code&gt; 还指示链接编辑器创建过程链接表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_COPY&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态可执行文件创建，用于保留只读文本段。此重定位偏移成员指向可写段中的位置。符号表索引指定应在当前目标文件和共享目标文件中同时存在的符号。执行过程中，运行时链接程序将与共享目标文件的符号关联的数据复制到偏移所指定的位置。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/glmti.html#glmvo&#34;&gt;复制重定位&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_GLOB_DAT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_32&lt;/code&gt; 类似，不同的是此重定位会将 &lt;code&gt;GOT&lt;/code&gt; 项设置为所指定符号的地址。使用特殊重定位类型，可以确定符号和 &lt;code&gt;GOT&lt;/code&gt; 项之间的对应关系。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_JMP_SLOT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态目标文件创建，用于提供延迟绑定。此重定位偏移成员可指定过程链接表项的位置。运行时链接程序会修改过程链接表项，以将控制权转移到指定的符号地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_RELATIVE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态目标文件创建。此重定位偏移成员可指定共享目标文件中包含表示相对地址的值的位置。运行时链接程序通过将装入共享目标文件的虚拟地址与相对地址相加，计算对应的虚拟地址。此类型的重定位项必须为符号表索引指定值零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_UA32&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_32&lt;/code&gt; 类似，不同的是此重定位指向未对齐的字。必须将要重定位的字作为任意对齐的四个独立字节进行处理，而不是作为根据体系结构要求对齐的字进行处理。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_LM22&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_HI22&lt;/code&gt; 类似，不同的是此重定位会进行截断而不是验证。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_PC_LM22&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_PC22&lt;/code&gt; 类似，不同的是此重定位会进行截断而不是验证。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_HIX22&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_LOX10&lt;/code&gt; 一起用于可执行文件，这些可执行文件在 64 位地址空间中的上限为 4 GB。与 &lt;code&gt;R_SPARC_HI22&lt;/code&gt; 类似，但会提供链接值的补码。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_LOX10&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_HIX22&lt;/code&gt; 一起使用。与 &lt;code&gt;R_SPARC_LO10&lt;/code&gt; 类似，但始终设置链接值的位 10 到 12。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_L44&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_H44&lt;/code&gt; 和 &lt;code&gt;R_SPARC_M44&lt;/code&gt; 重定位类型一起使用，以生成 44 位的绝对寻址模型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_REGISTER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于初始化寄存器符号。此重定位偏移成员包含要初始化的寄存器编号。对于此寄存器必须存在对应的寄存器符号。该符号必须为 &lt;code&gt;SHN_ABS&lt;/code&gt; 类型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_GOTDATA_OP_HIX22&lt;/code&gt;、&lt;code&gt;R_SPARC_GOTDATA_OP_LOX10&lt;/code&gt; 和 &lt;code&gt;R_SPARC_GOTDATA_OP&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些重定位类型用于代码转换。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;64-位-sparc-重定位类型&#34;&gt;64 位 SPARC: 重定位类型&lt;/h4&gt;
&lt;p&gt;重定位计算中使用的以下表示法是特定于 64 位 SPARC 的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;O&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于计算重定位字段的值的辅助加数。此加数通过应用 &lt;code&gt;ELF64_R_TYPE_DATA&lt;/code&gt; 宏从 &lt;code&gt;r_info&lt;/code&gt; 字段中提取。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下表中列出的重定位类型是扩展或修改针对 32 位 SPARC 定义的重定位类型所得的。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-54839.html#chapter6-24&#34;&gt;SPARC: 重定位类型&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-14 64 位 SPARC: ELF 重定位类型&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;名称值字段计算&lt;code&gt;R_SPARC_HI22``9``V-imm22``(S + A) &amp;gt;&amp;gt; 10``R_SPARC_GLOB_DAT``20``V-xword64``S + A``R_SPARC_RELATIVE``22``V-xword64``B + A``R_SPARC_64``32``V-xword64``S + A``R_SPARC_OLO10``33``V-simm13``((S + A) &amp;amp; 0x3ff) + O``R_SPARC_DISP64``46``V-xword64``S + A - P``R_SPARC_PLT64``47``V-xword64``L + A``R_SPARC_REGISTER``53``V-xword64``S + A``R_SPARC_UA64``54``V-xword64``S + A``R_SPARC_H34``85``V-imm22``(S + A) &amp;gt;&amp;gt; 12``R_SPARC_SIZE64``87``V-xword64``Z + A&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;以下重定位类型的语义不只是简单的计算：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_SPARC_OLO10&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_SPARC_LO10&lt;/code&gt; 类似，不同的是会添加额外的偏移，以充分利用 13 位带符号的直接字段。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;x86-重定位&#34;&gt;x86: 重定位&lt;/h3&gt;
&lt;p&gt;在 x86 上，重定位项应用于字 (&lt;code&gt;word32&lt;/code&gt;) 和扩展字 (&lt;code&gt;xword64&lt;/code&gt;)。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/RelocIaBasic.png&#34; alt=&#34;image:x86 基本重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;word32&lt;/code&gt; 指定一个占用 4 个字节的 32 位字段，此字段以任意字节对齐。这些值使用与 x86 体系结构中的其他字值相同的字节顺序。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/Ia2RelEnt.png&#34; alt=&#34;image:x86 重定位项。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;32-位-x86-重定位类型&#34;&gt;32 位 x86: 重定位类型&lt;/h3&gt;
&lt;p&gt;下表中列出的重定位类型是针对 32 位 x86 定义的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-15 32 位 x86: ELF 重定位类型&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;字段&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;计算&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_NONE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_PC32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_GOT32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;G + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_PLT32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;L + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_COPY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参阅此表后面的说明。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_GLOB_DAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_JMP_SLOT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;7&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_RELATIVE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;B + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_GOTOFF&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;9&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - GOT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_GOTPC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;GOT + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_32PLT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;L + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;20&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_PC16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;21&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;22&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_PC8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;23&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_386_SIZE32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;38&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Z + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 其他重定位类型可用于线程局部存储引用。这些重定位类型将在&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;中介绍。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;一些重定位类型的语义不只是简单的计算：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_GOT32&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;计算 &lt;code&gt;GOT&lt;/code&gt; 的基本地址与符号的 &lt;code&gt;GOT&lt;/code&gt; 项之间的距离。此重定位还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_PLT32&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;计算符号的过程链接表项的地址，并指示链接编辑器创建一个过程链接表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_COPY&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态可执行文件创建，用于保留只读文本段。此重定位偏移成员指向可写段中的位置。符号表索引指定应在当前目标文件和共享目标文件中同时存在的符号。执行过程中，运行时链接程序将与共享目标文件的符号关联的数据复制到偏移所指定的位置。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/glmti.html#glmvo&#34;&gt;复制重定位&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_GLOB_DAT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于将 &lt;code&gt;GOT&lt;/code&gt; 项设置为所指定符号的地址。使用特殊重定位类型，可以确定符号和 &lt;code&gt;GOT&lt;/code&gt; 项之间的对应关系。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_JMP_SLOT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态目标文件创建，用于提供延迟绑定。此重定位偏移成员可指定过程链接表项的位置。运行时链接程序会修改过程链接表项，以将控制权转移到指定的符号地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_RELATIVE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由链接编辑器为动态目标文件创建。此重定位偏移成员可指定共享目标文件中包含表示相对地址的值的位置。运行时链接程序通过将装入共享目标文件的虚拟地址与相对地址相加，计算对应的虚拟地址。此类型的重定位项必须为符号表索引指定值零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_GOTOFF&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;计算符号的值与 &lt;code&gt;GOT&lt;/code&gt; 的地址之间的差值。此重定位还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_386_GOTPC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;与 &lt;code&gt;R_386_PC32&lt;/code&gt; 类似，不同的是它在其计算中会使用 &lt;code&gt;GOT&lt;/code&gt; 的地址。此重定位中引用的符号通常是 &lt;code&gt;_GLOBAL_OFFSET_TABLE_&lt;/code&gt;，该符号还指示链接编辑器创建全局偏移表。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;x64-重定位类型&#34;&gt;x64: 重定位类型&lt;/h3&gt;
&lt;p&gt;下表中列出的重定位是针对 x64 定义的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-16 x64: ELF 重定位类型&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;字段&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;计算&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_NONE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_PC32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_GOT32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;G + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_PLT32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;L + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_COPY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;请参阅此表后面的说明。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_GLOB_DAT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_JUMP_SLOT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;7&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_RELATIVE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;B + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_GOTPCREL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;9&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;G + GOT + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_32S&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;12&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_PC16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;13&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;14&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_PC8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;15&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word8&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_PC64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;24&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_GOTOFF64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;25&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;S + A - GOT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_GOTPC32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;26&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;GOT + A + P&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_SIZE32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word32&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Z + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;R_AMD64_SIZE64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;33&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;word64&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Z + A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 其他重定位类型可用于线程局部存储引用。这些重定位类型将在&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;中介绍。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;大多数重定位类型的特殊语义与用于 x86 的语义相同。一些重定位类型的语义不只是简单的计算：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_AMD64_GOTPCREL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此重定位类型具有与 &lt;code&gt;R_AMD64_GOT32&lt;/code&gt; 或等效 &lt;code&gt;R_386_GOTPC&lt;/code&gt; 重定位类型不同的语义。x64 体系结构提供了相对于指令指针的寻址模式。因此，可以使用单个指令从 &lt;code&gt;GOT&lt;/code&gt; 装入地址。针对 &lt;code&gt;R_AMD64_GOTPCREL&lt;/code&gt; 重定位类型进行的计算提供了 &lt;code&gt;GOT&lt;/code&gt; 中指定了符号地址的位置与应用重定位的位置之间的差值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_AMD64_32&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;计算出的值会截断为 32 位。链接编辑器可验证为重定位生成的值是否会使用零扩展为初始的 64 位值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_AMD64_32S&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;计算出的值会截断为 32 位。链接编辑器可验证为重定位生成的值是否会使用符号扩展为初始的 64 位值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_AMD64_8&lt;/code&gt;、&lt;code&gt;R_AMD64_16&lt;/code&gt;、&lt;code&gt;R_AMD64_PC16&lt;/code&gt; 和 &lt;code&gt;R_AMD64_PC8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些重定位类型不适用于 x64 ABI，在此列出是为了说明。&lt;code&gt;R_AMD64_8&lt;/code&gt; 重定位类型会将计算出的值截断为 8 位。&lt;code&gt;R_AMD64_16&lt;/code&gt; 重定位类型会将所计算的值截断为 16 位。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;字符串表节&#34;&gt;字符串表节&lt;/h2&gt;
&lt;p&gt;字符串表节包含以空字符结尾的字符序列，通常称为字符串。目标文件使用这些字符串表示符号和节的名称。可以将字符串作为字符串表节的索引进行引用。&lt;/p&gt;
&lt;p&gt;第一个字节（索引零）包含空字符。同样，字符串表的最后一个字节也包含空字符，从而确保所有字符串都以空字符结尾。根据上下文，索引为零的字符串不会指定任何名称或指定空名称。&lt;/p&gt;
&lt;p&gt;允许使用空字符串表节。节头的 &lt;code&gt;sh_size&lt;/code&gt; 成员值为零。对于空字符串表，非零索引无效。&lt;/p&gt;
&lt;p&gt;节头的 &lt;code&gt;sh_name&lt;/code&gt; 成员包含节头字符串表的节索引。节头字符串表由 ELF 头的 &lt;code&gt;e_shstrndx&lt;/code&gt; 成员指定。下图显示了具有 &lt;code&gt;25&lt;/code&gt; 个字节的字符串表，并且其字符串与各种索引关联。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;图 12-7 ELF 字符串表&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/figures/StrTbl.png&#34; alt=&#34;image:ELF 字符串表示例。&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;下表显示了上图所示的字符串表中的字符串。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-17 ELF 字符串表索引&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;索引&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;字符串&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;7&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;Variable&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;able&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;16&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;able&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;24&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;空字符串&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如示例所示，字符串表索引可以指向节中的任何字节。一个字符串可以出现多次。可以存在对子字符串的引用。一个字符串可以多次引用。另外，还允许使用未引用的字符串。&lt;/p&gt;
&lt;h2 id=&#34;符号表节&#34;&gt;符号表节&lt;/h2&gt;
&lt;p&gt;目标文件的符号表包含定位和重定位程序的符号定义和符号引用所需的信息。符号表索引是此数组的下标。索引 &lt;code&gt;0&lt;/code&gt; 指定表中的第一项并用作未定义的符号索引。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#chapter6-tbl-23&#34;&gt;表 12-21&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;符号表项具有以下格式。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Word      st_name;
        Elf32_Addr      st_value;
        Elf32_Word      st_size;
        unsigned char   st_info;
        unsigned char   st_other;
        Elf32_Half      st_shndx;
} Elf32_Sym;

typedef struct {
        Elf64_Word      st_name;
        unsigned char   st_info;
        unsigned char   st_other;
        Elf64_Half      st_shndx;
        Elf64_Addr      st_value;
        Elf64_Xword     st_size;
} Elf64_Sym;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;目标文件的符号字符串表的索引，其中包含符号名称的字符表示形式。如果该值为非零，则表示指定符号名称的字符串表索引。否则，符号表项没有名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_value&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;关联符号的值。根据上下文，该值可以是绝对值或地址。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#chapter6-35166&#34;&gt;符号值&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_size&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;许多符号具有关联大小。例如，数据目标文件的大小是目标文件中包含的字节数。如果符号没有大小或大小未知，则此成员值为零。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_info&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号的类型和绑定属性。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#chapter6-tbl-21&#34;&gt;表 12-18&lt;/a&gt; 中显示了值和含义的列表。以下代码说明了如何处理这些值。请参见 &lt;code&gt;sys/elf.h&lt;/code&gt;。&lt;code&gt;#define ELF32_ST_BIND(info)          ((info) &amp;gt;&amp;gt; 4) #define ELF32_ST_TYPE(info)          ((info) &amp;amp; 0xf) #define ELF32_ST_INFO(bind, type)    (((bind)&amp;lt;&amp;lt;4)+((type)&amp;amp;0xf)) #define ELF64_ST_BIND(info)          ((info) &amp;gt;&amp;gt; 4) #define ELF64_ST_TYPE(info)          ((info) &amp;amp; 0xf) #define ELF64_ST_INFO(bind, type)    (((bind)&amp;lt;&amp;lt;4)+((type)&amp;amp;0xf))&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_other&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;符号的可见性。&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#chapter7-27&#34;&gt;表 12-20&lt;/a&gt; 中显示了值和含义的列表。以下代码说明了如何处理 32 位目标文件和 64 位目标文件的值。其他位设置为零，并且未定义任何含义。&lt;code&gt;#define ELF32_ST_VISIBILITY(o)       ((o)&amp;amp;0x3) #define ELF64_ST_VISIBILITY(o)       ((o)&amp;amp;0x3)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;st_shndx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;所定义的每一个符号表项都与某节有关。此成员包含相关节头表索引。部分节索引会表示特殊含义。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#chapter6-tbl-16&#34;&gt;表 12-4&lt;/a&gt;。如果此成员包含 &lt;code&gt;SHN_XINDEX&lt;/code&gt;，则实际节头索引会过大而无法放入此字段中。实际值包含在 &lt;code&gt;SHT_SYMTAB_SHNDX&lt;/code&gt; 类型的关联节中。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;根据符号的 &lt;code&gt;st_info&lt;/code&gt; 字段确定的符号绑定可确定链接可见性和行为。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-18 ELF 符号绑定 &lt;code&gt;ELF32_ST_BIND&lt;/code&gt; 和 &lt;code&gt;ELF64_ST_BIND&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_LOCAL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_GLOBAL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_WEAK&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_LOOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_HIOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;12&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_LOPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;13&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STB_HIPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;15&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STB_LOCAL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;局部符号。这些符号在包含其定义的目标文件的外部不可见。名称相同的局部符号可存在于多个文件中而不会相互干扰。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STB_GLOBAL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;全局符号。这些符号对于合并的所有目标文件都可见。一个文件的全局符号定义满足另一个文件对相同全局符号的未定义引用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STB_WEAK&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;弱符号。这些符号与全局符号类似，但其定义具有较低的优先级。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STB_LOOS&lt;/code&gt; - &lt;code&gt;STB_HIOS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于操作系统的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STB_LOPROC&lt;/code&gt; - &lt;code&gt;STB_HIPROC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于处理器的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;全局符号和弱符号主要在以下两个方面不同：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;链接编辑器合并多个可重定位目标文件时，不允许多次定义相同名称的 &lt;code&gt;STB_GLOBAL&lt;/code&gt; 符号。但是，如果存在已定义的全局符号，则出现相同名称的弱符号不会导致错误。链接编辑器会接受全局定义，并忽略弱定义。&lt;/p&gt;
&lt;p&gt;同样，如果存在通用符号，则出现相同名称的弱符号也不会导致错误。链接编辑器将使用通用定义，并忽略弱定义。通用符号具有包含 &lt;code&gt;SHN_COMMON&lt;/code&gt; 的 &lt;code&gt;st_shndx&lt;/code&gt; 字段。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-90421.html#chapter2-93321&#34;&gt;符号解析&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;链接编辑器搜索归档库时，将会提取包含未定义全局符号或暂定全局符号的定义的归档成员。此成员的定义可以是全局符号或弱符号。&lt;/p&gt;
&lt;p&gt;缺省情况下，链接编辑器不会提取归档成员来解析未定义的弱符号。未解析的弱符号的值为零。使用 &lt;code&gt;-z weakextract&lt;/code&gt; 可覆盖此缺省行为。使用此选项，弱引用可提取归档成员。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;注 -&lt;/strong&gt; 弱符号主要适用于系统软件。建议不要在应用程序中使用弱符号。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;在每个符号表中，具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定的所有符号都优先于弱符号和全局符号。如&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-94076.html#scrolltoc&#34;&gt;节&lt;/a&gt;中所述，符号表节的 &lt;code&gt;sh_info&lt;/code&gt; 节头成员包含第一个非局部符号的符号表索引。&lt;/p&gt;
&lt;p&gt;根据符号的 &lt;code&gt;st_info&lt;/code&gt; 字段确定的符号类型用于对关联实体进行一般等级划分。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-19 ELF 符号类型 &lt;code&gt;ELF32_ST_TYPE&lt;/code&gt; 和 &lt;code&gt;ELF64_ST_TYPE&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_NOTYPE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_OBJECT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_FUNC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_SECTION&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_FILE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_COMMON&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_TLS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_LOOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_HIOS&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;12&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_LOPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;13&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_SPARC_REGISTER&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;13&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STT_HIPROC&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;15&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_NOTYPE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;未指定符号类型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_OBJECT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号与变量、数组等数据目标文件关联。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_FUNC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号与函数或其他可执行代码关联。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_SECTION&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号与节关联。此类型的符号表各项主要用于重定位，并且通常具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_FILE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通常，符号的名称会指定与目标文件关联的源文件的名称。文件符号具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定和节索引 &lt;code&gt;SHN_ABS&lt;/code&gt;。此符号（如果存在）位于文件的其他 &lt;code&gt;STB_LOCAL&lt;/code&gt; 符号前面。符号索引为 1 的 &lt;code&gt;SHT_SYMTAB&lt;/code&gt; 是表示目标文件的 &lt;code&gt;STT_FILE&lt;/code&gt; 符号。通常，此符号后跟文件的 &lt;code&gt;STT_SECTION&lt;/code&gt; 符号。这些节符号又后跟已降为局部符号的任何全局符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_COMMON&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号标记未初始化的通用块。此符号的处理与 &lt;code&gt;STT_OBJECT&lt;/code&gt; 的处理完全相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_TLS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号指定线程局部存储实体。定义后，此符号可为符号指明指定的偏移，而不是实际地址。线程局部存储重定位只能引用 &lt;code&gt;STT_TLS&lt;/code&gt; 类型的符号。从可分配节中引用 &lt;code&gt;STT_TLS&lt;/code&gt; 类型的符号只能通过使用特殊线程局部存储重定位来实现。有关详细信息，请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter8-1.html#scrolltoc&#34;&gt;第 14 章&lt;/a&gt;。从非可分配节中引用 &lt;code&gt;STT_TLS&lt;/code&gt; 类型的符号没有此限制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_LOOS&lt;/code&gt; - &lt;code&gt;STT_HIOS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于操作系统的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STT_LOPROC&lt;/code&gt; - &lt;code&gt;STT_HIPROC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此范围内包含的值（包括这两个值）保留用于特定于处理器的语义。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;符号的可见性根据其 &lt;code&gt;st_other&lt;/code&gt; 字段确定。此可见性可以在可重定位目标文件中指定。此可见性定义了在符号成为可执行文件或共享目标文件的一部分后访问该符号的方式。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-20 ELF 符号可见性&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_INTERNAL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_HIDDEN&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_PROTECTED&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_EXPORTED&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;4&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_SINGLETON&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;5&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STV_ELIMINATE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;6&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_DEFAULT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;具有 &lt;code&gt;STV_DEFAULT&lt;/code&gt; 属性的符号的可见性与符号的绑定类型指定的可见性相同。全局符号和弱符号在其定义组件（可执行文件或共享目标文件）外部可见。局部符号处于隐藏状态。另外，还可以替换全局符号和弱符号。可以在另一个组件中通过定义相同的名称插入这些符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_PROTECTED&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果当前组件中定义的符号在其他组件中可见，但不能被替换，则该符号处于受保护状态。定义组件中对这类符号的任何引用都必须解析为该组件中的定义。即使在另一个组件中存在按缺省规则插入的符号定义，也必须进行此解析。具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定的符号将没有 &lt;code&gt;STV_PROTECTED&lt;/code&gt; 可见性。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_HIDDEN&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果当前组件中定义的符号的名称对于其他组件不可见，则该符号处于隐藏状态。必须对这类符号进行保护。此属性用于控制组件的外部接口。由这样的符号命名的目标文件仍可以在另一个组件中引用（如果将目标文件的地址传到外部）。如果可执行文件或共享目标文件中包括可重定位目标文件，则该目标文件中包含的隐藏符号将会删除或转换为使用 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_INTERNAL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此可见性属性以与 &lt;code&gt;STV_HIDDEN&lt;/code&gt; 相同的方式进行解释。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_EXPORTED&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此可见性属性确保符号保持为全局。不能使用任何其他符号可见性技术对此可见性进行降级或消除。具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定的符号将没有 &lt;code&gt;STV_EXPORTED&lt;/code&gt; 可见性。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_SINGLETON&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此可见性属性确保符号保持为全局，并且符号定义的一个实例绑定到一个进程中的所有引用。不能使用任何其他符号可见性技术对此可见性进行降级或消除。具有 &lt;code&gt;STB_LOCAL&lt;/code&gt; 绑定的符号将没有 &lt;code&gt;STV_SINGLETON&lt;/code&gt; 可见性。不能直接绑定到 &lt;code&gt;STV_SINGLETON&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;STV_ELIMINATE&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此可见性属性扩展 &lt;code&gt;STV_HIDDEN&lt;/code&gt;。当前组件中定义为要消除的符号对其他组件不可见。该符号未写入使用该组件的动态可执行文件或共享目标文件的任何符号表中。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;STV_SINGLETON&lt;/code&gt; 可见性属性可以影响链接编辑过程中可执行文件或共享目标文件中的符号的解析。从一个进程中的任意引用只能绑定到单件的一个实例。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;STV_SINGLETON&lt;/code&gt; 可以与 &lt;code&gt;STV_DEFAULT&lt;/code&gt; 可见性属性组合，其中 &lt;code&gt;STV_SINGLETON&lt;/code&gt; 优先级较高。&lt;code&gt;STV_EXPORT&lt;/code&gt; 可以与 &lt;code&gt;STV_DEFAULT&lt;/code&gt; 可见性属性组合使用，其中 &lt;code&gt;STV_EXPORT&lt;/code&gt; 优先级较高。&lt;code&gt;STV_SINGLETON&lt;/code&gt; 或 &lt;code&gt;STV_EXPORT&lt;/code&gt; 可见性不能与任何其他可见性属性组合。链接编辑会将此类事件视为致命错误。&lt;/p&gt;
&lt;p&gt;在链接编辑过程中，其他可见性属性不会影响可执行文件或共享目标文件中符号的解析。这样的解析由绑定类型控制。一旦链接编辑器选定了其解析，这些属性即会强加两种要求。两种要求都基于以下事实，即所链接的代码中的引用可能已优化，从而可利用这些属性。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所有非缺省可见性属性在应用于符号引用时都表示，在链接的目标文件中必须提供满足该引用的定义。如果在链接的目标文件中没有定义此类型的符号引用，则该引用必须具有 &lt;code&gt;STB_WEAK&lt;/code&gt; 绑定。在此情况下，引用将解析为零。&lt;/li&gt;
&lt;li&gt;如果任何名称的引用或定义是具有非缺省可见性属性的符号，则该可见性属性将传播给链接的目标文件中的解析符号。如果针对符号的不同实例指定不同的可见性属性，则最具约束的可见性属性将传播给链接的目标文件中的解析符号。这些属性按最低到最高约束进行排序，依次为 &lt;code&gt;STV_PROTECTED&lt;/code&gt;、&lt;code&gt;STV_HIDDEN&lt;/code&gt; 和 &lt;code&gt;STV_INTERNAL&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果符号的值指向节中的特定位置，则符号的节索引成员 &lt;code&gt;st_shndx&lt;/code&gt; 会包含节头表的索引。节在重定位过程中移动时，符号的值也会更改。符号的引用仍然指向程序中的相同位置。一些特殊节索引值会具有其他语义：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_ABS&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号具有不会由于重定位而发生更改的绝对值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_COMMON&lt;/code&gt; 和 &lt;code&gt;SHN_AMD64_LCOMMON&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此符号标记尚未分配的通用块。与节的 &lt;code&gt;sh_addralign&lt;/code&gt; 成员类似，符号的值也会指定对齐约束。链接编辑器在值为 &lt;code&gt;st_value&lt;/code&gt; 的倍数的地址位置为符号分配存储空间。符号的大小会指明所需的字节数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SHN_UNDEF&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此节表索引表示未定义符号。链接编辑器将此目标文件与用于定义所表示的符号的另一目标文件合并时，此文件中对该符号的引用将与该定义绑定。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如之前所述，索引 &lt;code&gt;0&lt;/code&gt; (&lt;code&gt;STN_UNDEF&lt;/code&gt;) 的符号表项会保留。此项具有下表中列出的值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-21 ELF 符号表项：索引 &lt;code&gt;0&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;附注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_name&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_value&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;零值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_size&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无大小&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_info&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无类型，局部绑定&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_other&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_shndx&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHN_UNDEF&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无节&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;符号值&#34;&gt;符号值&lt;/h3&gt;
&lt;p&gt;不同目标文件类型的符号表的各项对于 &lt;code&gt;st_value&lt;/code&gt; 成员的解释稍有不同。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在可重定位文件中，&lt;code&gt;st_value&lt;/code&gt; 包含节索引为 &lt;code&gt;SHN_COMMON&lt;/code&gt; 的符号的对齐约束。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在可重定位文件中，&lt;code&gt;st_value&lt;/code&gt; 包含所定义符号的节偏移。&lt;code&gt;st_value&lt;/code&gt; 表示从 &lt;code&gt;st_shndx&lt;/code&gt; 所标识的节的起始位置的偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在可执行文件和共享目标文件中，&lt;code&gt;st_value&lt;/code&gt; 包含虚拟地址。为使这些文件的符号更适用于运行时链接程序，节偏移（文件解释）会替换为与节编号无关的虚拟地址（内存解释）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;尽管符号表值对于不同的目标文件具有类似含义，但通过适当的程序可以有效地访问数据。&lt;/p&gt;
&lt;h3 id=&#34;符号表布局和约定&#34;&gt;符号表布局和约定&lt;/h3&gt;
&lt;p&gt;按照以下顺序将符号写入符号表。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;任何符号表中的索引 &lt;code&gt;0&lt;/code&gt; 用于表示未定义的符号。符号表中的第一项始终完全为零。因此符号类型为 &lt;code&gt;STT_NOTYPE&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;如果符号表包含任何局部符号，符号表中的第二项是提供文件名的 &lt;code&gt;STT_FILE&lt;/code&gt; 符号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STT_SECTION&lt;/code&gt; 类型的节符号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STT_REGISTER&lt;/code&gt; 类型的寄存器符号。&lt;/li&gt;
&lt;li&gt;缩减到局部作用域的全局符号。&lt;/li&gt;
&lt;li&gt;对于提供局部符号的每个输入文件，提供输入文件名称的 &lt;code&gt;STT_FILE&lt;/code&gt; 符号，后跟相关符号。&lt;/li&gt;
&lt;li&gt;在符号表中，全局符号紧跟局部符号。第一个全局符号由符号表 &lt;code&gt;sh_info&lt;/code&gt; 值标识。局部符号和全局符号始终以这种方式保持彼此独立，不能混合。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些符号表是 Oracle Solaris OS 中的特殊内容。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.symtab&lt;/code&gt; (&lt;code&gt;SHT_SYMTAB&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;此符号表包含说明关联的 ELF 文件的每个符号。此符号表通常是不可分配的，因此在进程的内存映像中不可用。通过使用 &lt;code&gt;mapfile&lt;/code&gt; 和 &lt;code&gt;ELIMINATE&lt;/code&gt; 关键字可以从 &lt;code&gt;.symtab&lt;/code&gt; 中消除全局符号。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter2-90421.html#chapter2-17&#34;&gt;删除符号&lt;/a&gt;和&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/gjpky.html#gdzmc&#34;&gt;SYMBOL_SCOPE / SYMBOL_VERSION 指令&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.dynsym&lt;/code&gt; (&lt;code&gt;SHT_DYNSYM&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;此表包含 &lt;code&gt;.symtab&lt;/code&gt; 表中支持动态链接所需的符号的子集。此符号表可供分配，因此在进程的内存映像中可用。&lt;code&gt;.dynsym&lt;/code&gt; 表以标准 NULL 符号开始，后跟文件全局符号。&lt;code&gt;STT_FILE&lt;/code&gt; 符号通常不包含在此符号表中。如果重定位项需要，可能会包含 &lt;code&gt;STT_SECTION&lt;/code&gt; 符号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt; (&lt;code&gt;SHT_SUNW_LDYNSYM&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;扩充 &lt;code&gt;.dynsym&lt;/code&gt; 表中包含的信息的可选符号表。&lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 表包含局部函数符号。此符号表可供分配，因此在进程的内存映像中可用。当不可分配的 &lt;code&gt;.symtab&lt;/code&gt; 不可用，或已从文件中剥离时，调试器通过使用此节可在运行时上下文中产生精确的栈跟踪。此节还可以为运行时环境提供其他符号信息，以便与 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN3Adladdr-3c&#34;&gt;&lt;code&gt;dladdr&lt;/code&gt;(3C)&lt;/a&gt; 一起使用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;仅当 &lt;code&gt;.dynsym&lt;/code&gt; 表存在时，才存在 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 表。当 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 节和 &lt;code&gt;.dynsym&lt;/code&gt; 节同时存在时，链接编辑器会将其数据区域紧邻彼此放置，其中 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 放置在前面。这种放置方式可以使两个表看起来像是一个更大的连续符号表。此符号表遵从先前枚举的标准布局规则。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 表可以通过使用链接编辑器的 &lt;code&gt;-z noldynsym&lt;/code&gt; 选项进行消除。&lt;/p&gt;
&lt;h3 id=&#34;符号排序节&#34;&gt;符号排序节&lt;/h3&gt;
&lt;p&gt;由相邻的 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 节和 &lt;code&gt;.dynsym&lt;/code&gt; 节构成的动态符号表可用于将内存地址映射到其对应的符号。这种映射可用于确定给定地址表示哪个函数或变量。但是，按照符号写入符号表的顺序分析符号表以确定映射是很复杂的。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-79797.html#stlac&#34;&gt;符号表布局和约定&lt;/a&gt;。此布局使地址与符号名称之间的关联变得复杂，具体表现在以下几个方面。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;符号不是按地址排序的，这将强制对整个表进行线性搜索，从而增大开销。&lt;/li&gt;
&lt;li&gt;可能有多个符号指向给定地址。尽管这些符号均有效且正确，但调试工具应选择使用这些等效名称中的哪一个可能并不明确。不同的工具可能会使用不同的备用名称。这些问题可能会给用户带来困惑。&lt;/li&gt;
&lt;li&gt;许多符号提供无地址信息。搜索时不应考虑这类符号。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;符号排序节就是用于解决这些问题的。符号排序节是 &lt;code&gt;Elf32_Word&lt;/code&gt; 或 &lt;code&gt;Elf64_Word&lt;/code&gt; 目标文件的数组。此数组中的每个元素都是 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; – &lt;code&gt;.dynsym&lt;/code&gt; 组合符号表的索引。对数组中的元素进行排序，从而使引用的符号也按照排好的顺序提供。其中仅包含表示函数或变量的符号。使用 &lt;a href=&#34;http://www.oracle.com/pls/topic/lookup?ctx=E26505&amp;amp;id=REFMAN1elfdump-1&#34;&gt;&lt;code&gt;elfdump&lt;/code&gt;(1)&lt;/a&gt; 和 &lt;code&gt;-S&lt;/code&gt; 选项来显示与排序数组关联的符号。&lt;/p&gt;
&lt;p&gt;不能同时排序常规符号和线程局部存储符号。常规符号的值是符号所引用的函数或变量的地址。线程局部存储符号的值是变量的线程偏移。因此，常规符号和线程局部存储符号使用两种不同的排序节。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_dynsymsort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_SYMSORT&lt;/code&gt; 类型的节，其中包含 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; – &lt;code&gt;.dynsym&lt;/code&gt; 组合符号表中常规符号的索引，该索引按地址排序。不表示变量或函数的符号不包括在内。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.SUNW_dyntlssort&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SHT_SUNW_TLSSORT&lt;/code&gt; 类型的节，其中包含 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; – &lt;code&gt;.dynsym&lt;/code&gt; 组合符号表中 TLS 符号的索引，该索引按偏移排序。仅当目标文件包含 TLS 符号时会生成此节。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;链接编辑器按照显示的顺序使用以下规则来选择排序节引用的符号。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;符号必须具有函数或变量类型：&lt;code&gt;STT_FUNC&lt;/code&gt;、&lt;code&gt;STT_OBJECT&lt;/code&gt;、&lt;code&gt;STT_COMMON&lt;/code&gt; 或 &lt;code&gt;STT_TLS&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;以下符号如果存在，则始终包含在内：&lt;code&gt;_DYNAMIC&lt;/code&gt;、&lt;code&gt;_end&lt;/code&gt;、&lt;code&gt;_fini&lt;/code&gt;、&lt;code&gt;_GLOBAL_OFFSET_TABLE_&lt;/code&gt;、&lt;code&gt;_init&lt;/code&gt;、&lt;code&gt;_PROCEDURE_LINKAGE_TABLE_&lt;/code&gt; 和 &lt;code&gt;_start&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;如果全局符号和弱符号引用同一个项，则会包含弱符号而排除全局符号。&lt;/li&gt;
&lt;li&gt;符号必须已定义。&lt;/li&gt;
&lt;li&gt;符号的大小不得为零。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些规则可筛选出由编译器自动生成以及由链接编辑器生成的符号。所选择的符号是用户关注的符号。然而，在两种情况下可能需要手动干预来改进选择过程。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;规则未能选择所需的特殊符号。例如，某些特殊符号大小为零。&lt;/li&gt;
&lt;li&gt;选择了不需要的多余符号。例如，共享目标文件可以定义引用相同地址并且大小相同的多个符号。这些别名符号均有效地引用相同的项。您可能希望在排序节中仅包含多符号系列中的一个。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;mapfile&lt;/code&gt; 的关键字 &lt;code&gt;DYNSORT&lt;/code&gt; 和 &lt;code&gt;NODYNSORT&lt;/code&gt; 可以为符号选择提供更多的控制。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/gjpky.html#gdzmc&#34;&gt;SYMBOL_SCOPE / SYMBOL_VERSION 指令&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;DYNSORT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识应包含在排序节中的符号。符号类型必须为 &lt;code&gt;STT_FUNC&lt;/code&gt;、&lt;code&gt;STT_OBJECT&lt;/code&gt;、&lt;code&gt;STT_COMMON&lt;/code&gt; 或 &lt;code&gt;STT_TLS&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;NODYNSORT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;标识不应包含在排序节中的符号。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如，目标文件可能会提供以下符号表定义。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ elfdump -sN.symtab foo.so.1 | egrep &amp;quot;foo$|bar$&amp;quot;
      [37]  0x000004b0 0x0000001c  FUNC GLOB  D   0 .text      bar
      [38]  0x000004b0 0x0000001c  FUNC WEAK  D   0 .text      foo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;符号 &lt;code&gt;foo&lt;/code&gt; 和 &lt;code&gt;bar&lt;/code&gt; 表示一个别名对。缺省情况下，创建排序数组时，仅表示符号 &lt;code&gt;foo&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cc -o foo.so.1 -G foo.c
$ elfdump -S foo.so.1 | egrep &amp;quot;foo$|bar$&amp;quot;
      [13]  0x000004b0 0x0000001c  FUNC WEAK  D   0 .text      foo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果链接编辑器发现一个全局符号和一个弱符号引用同一个项，通常会保留弱符号。排序数组中忽略符号 &lt;code&gt;bar&lt;/code&gt; 是因为与弱符号 &lt;code&gt;foo&lt;/code&gt; 之间的关联。&lt;/p&gt;
&lt;p&gt;以下 &lt;code&gt;mapfile&lt;/code&gt; 会导致在排序数组中表示符号 &lt;code&gt;bar&lt;/code&gt;。忽略了符号 &lt;code&gt;foo&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cat mapfile
{
    global:
        bar = DYNSORT;
        foo = NODYNSORT;
};
$ cc -M mapfile -o foo.so.2 -Kpic -G foo.c
$ elfdump -S foo.so.2 | egrep &amp;quot;foo$|bar$&amp;quot;
      [13]  0x000004b0 0x0000001c  FUNC GLOB  D   0 .text      bar
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;.SUNW_dynsymsort&lt;/code&gt; 节和 &lt;code&gt;.SUNW_dyntlssort&lt;/code&gt; 节，要求 &lt;code&gt;.SUNW_ldynsym&lt;/code&gt; 节存在。因此，使用 &lt;code&gt;-z noldynsym&lt;/code&gt; 选项还会阻止创建任何排序节。&lt;/p&gt;
&lt;h3 id=&#34;寄存器符号&#34;&gt;寄存器符号&lt;/h3&gt;
&lt;p&gt;SPARC 体系结构支持寄存器符号，这些符号用于初始化全局寄存器。下表中列出了寄存器符号的符号表项包含的各项。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-22 SPARC: ELF 符号表项：寄存器符号&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;字段&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_name&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号名称的字符串表的索引；若其值为 &lt;code&gt;0&lt;/code&gt; 则代表临时寄存器。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_value&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;寄存器编号。有关整数寄存器赋值的信息，请参见 ABI 手册。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_size&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;未使用 (&lt;code&gt;0&lt;/code&gt;)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_info&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;绑定通常为 &lt;code&gt;STB_GLOBAL&lt;/code&gt;，类型必须是 &lt;code&gt;STT_SPARC_REGISTER&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_other&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;未使用 (&lt;code&gt;0&lt;/code&gt;)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;st_shndx&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;如果该目标文件初始化此寄存器符号，则为 &lt;code&gt;SHN_ABS&lt;/code&gt;，否则为 &lt;code&gt;SHN_UNDEF&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;下表中列出了为 SPARC 定义的寄存器值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-23 SPARC: ELF 寄存器编号&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STO_SPARC_REGISTER_G2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;%g2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;STO_SPARC_REGISTER_G3&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x3&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;%g3&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果缺少特定全局寄存器的项，则意味着目标文件根本没有使用特定全局寄存器。&lt;/p&gt;
&lt;h2 id=&#34;syminfo-表节&#34;&gt;Syminfo 表节&lt;/h2&gt;
&lt;p&gt;syminfo 节包含多个类型为 &lt;code&gt;Elf32_Syminfo&lt;/code&gt; 或 &lt;code&gt;Elf64_Syminfo&lt;/code&gt; 的项。&lt;code&gt;.SUNW_syminfo&lt;/code&gt; 节中包含与关联符号表 (&lt;code&gt;sh_link&lt;/code&gt;) 中的每一项对应的项。&lt;/p&gt;
&lt;p&gt;如果目标文件中存在此节，则可通过采用关联符号表的符号索引，并使用该索引在此节中查找对应的 &lt;code&gt;Elf32_Syminfo&lt;/code&gt; 项或 &lt;code&gt;Elf64_Syminfo&lt;/code&gt; 项，从而找到其他符号信息。关联的符号表和 &lt;code&gt;Syminfo&lt;/code&gt; 表的项数将始终相同。&lt;/p&gt;
&lt;p&gt;索引 &lt;code&gt;0&lt;/code&gt; 用于存储 &lt;code&gt;Syminfo&lt;/code&gt; 表的当前版本，即 &lt;code&gt;SYMINFO_CURRENT&lt;/code&gt;。由于符号表项 &lt;code&gt;0&lt;/code&gt; 始终保留用于 &lt;code&gt;UNDEF&lt;/code&gt; 符号表项，因此该用法不会造成任何冲突。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Syminfo&lt;/code&gt; 项具有以下格式。请参见 &lt;code&gt;sys/link.h&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Half      si_boundto;
        Elf32_Half      si_flags;
} Elf32_Syminfo;

typedef struct {
        Elf64_Half      si_boundto;
        Elf64_Half      si_flags;
} Elf64_Syminfo;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;si_boundto&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_BT_SELF&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0xffff&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号与自身绑定。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_BT_PARENT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0xfffe&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号与父级绑定。父级是指导致此动态目标文件被装入的第一个目标文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_BT_NONE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0xfffd&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号没有任何特殊的符号绑定。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_BT_EXTERN&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;0&lt;code&gt;xfffc&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号定义是外部的。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;si_flags&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此位字段可以设置标志，如下表所示。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_DIRECT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x01&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号引用与包含定义的目标文件直接关联。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_FILTER&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x02&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号定义可用作标准过滤器。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_COPY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x04&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号定义通过副本重定位生成。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_LAZYLOAD&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x08&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号引用应延迟装入的目标文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_DIRECTBIND&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x10&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号引用应与定义直接绑定。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_NOEXTDIRECT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x20&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;不允许将外部引用与此符号定义直接绑定。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_AUXILIARY&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x40&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号定义可用作辅助过滤器。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_INTERPOSE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x80&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号定义可用作插入项。此属性仅适用于动态可执行文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_CAP&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x100&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号与功能相关联。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SYMINFO_FLG_DEFERRED&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x200&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号不应包含在 &lt;code&gt;BIND_NOW&lt;/code&gt; 重定位中。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;版本控制节&#34;&gt;版本控制节&lt;/h2&gt;
&lt;p&gt;链接编辑器创建的目标文件可以包含以下两种类型的版本控制信息：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;版本定义&lt;/strong&gt;，用于提供全局符号关联，并使用类型为 &lt;code&gt;SHT_SUNW_verdef&lt;/code&gt; 和 &lt;code&gt;SHT_SUNW_versym&lt;/code&gt; 的节实现。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;版本依赖性&lt;/strong&gt;，用于表示其他目标文件依赖性的版本定义要求，并使用类型为 &lt;code&gt;SHT_SUNW_verneed``SHT_SUNW_versym&lt;/code&gt; 的节实现。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sys/link.h&lt;/code&gt; 中定义了这些节的组成结构。包含版本控制信息的节名为 &lt;code&gt;.SUNW_version&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&#34;版本定义章节&#34;&gt;版本定义章节&lt;/h3&gt;
&lt;p&gt;此节由 &lt;code&gt;SHT_SUNW_verdef&lt;/code&gt; 类型定义。如果此节存在，则必须同时存在 &lt;code&gt;SHT_SUNW_versym&lt;/code&gt; 节。这两种结构在文件中提供符号与版本定义之间的关联。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter5-1.html#chapter5-38290&#34;&gt;创建版本定义&lt;/a&gt;。此节中的元素具有以下结构：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Half      vd_version;
        Elf32_Half      vd_flags;
        Elf32_Half      vd_ndx;
        Elf32_Half      vd_cnt;
        Elf32_Word      vd_hash;
        Elf32_Word      vd_aux;
        Elf32_Word      vd_next;
} Elf32_Verdef;
 
typedef struct {
        Elf32_Word      vda_name;
        Elf32_Word      vda_next;
} Elf32_Verdaux;

typedef struct {
        Elf64_Half      vd_version;
        Elf64_Half      vd_flags;
        Elf64_Half      vd_ndx;
        Elf64_Half      vd_cnt;
        Elf64_Word      vd_hash;
        Elf64_Word      vd_aux;
        Elf64_Word      vd_next;
} Elf64_Verdef;
 
typedef struct {
        Elf64_Word      vda_name;
        Elf64_Word      vda_next;
} Elf64_Verdaux;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员标识该结构的版本，如下表中所列。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_DEF_NONE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无效版本。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_DEF_CURRENT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;&amp;gt;=1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;当前版本。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_flags&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员包含特定于版本定义的信息，如下表中所列。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_FLG_BASE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;文件的版本定义。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_FLG_WEAK&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;弱版本标识符。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_ndx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;版本索引。每个版本定义都有一个唯一的索引，用于将 &lt;code&gt;SHT_SUNW_versym&lt;/code&gt; 项与相应的版本定义关联。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_cnt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Elf32_Verdaux&lt;/code&gt; 数组中的元素数目。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_hash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;版本定义名称的散列值。该值是通过使用&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-48031.html#scrolltoc&#34;&gt;散列表节&lt;/a&gt;中介绍的同一散列函数生成的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_aux&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从此 &lt;code&gt;Elf32_Verdef&lt;/code&gt; 项的开头到版本定义名称的 &lt;code&gt;Elf32_Verdaux&lt;/code&gt; 数组的字节偏移。该数组中的第一个元素必须存在。此元素指向该结构定义的版本定义字符串。也可以存在其他元素。元素数目由 &lt;code&gt;vd_cnt&lt;/code&gt; 值表示。这些元素表示此版本定义的依赖项。每种依赖项都会具有各自的版本定义结构。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vd_next&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从此 &lt;code&gt;Elf32_Verdef&lt;/code&gt; 结构的开头到下一个 &lt;code&gt;Elf32_Verdef&lt;/code&gt; 项的字节偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vda_name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;以空字符结尾的字符串的字符串表偏移，用于提供版本定义的名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vda_next&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从此 &lt;code&gt;Elf32_Verdaux&lt;/code&gt; 项的开头到下一个 &lt;code&gt;Elf32_Verdaux&lt;/code&gt; 项的字节偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;版本依赖性节&#34;&gt;版本依赖性节&lt;/h3&gt;
&lt;p&gt;版本依赖性节由 &lt;code&gt;SHT_SUNW_verneed&lt;/code&gt; 类型定义。此节通过指明动态依赖项所需的版本定义，对文件的动态依赖性要求进行补充。仅当依赖项包含版本定义时，才会在此节中进行记录。此节中的元素具有以下结构：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef struct {
        Elf32_Half      vn_version;
        Elf32_Half      vn_cnt;
        Elf32_Word      vn_file;
        Elf32_Word      vn_aux;
        Elf32_Word      vn_next;
} Elf32_Verneed;
 
typedef struct {
        Elf32_Word      vna_hash;
        Elf32_Half      vna_flags;
        Elf32_Half      vna_other;
        Elf32_Word      vna_name;
        Elf32_Word      vna_next;
} Elf32_Vernaux;

typedef struct {
        Elf64_Half      vn_version;
        Elf64_Half      vn_cnt;
        Elf64_Word      vn_file;
        Elf64_Word      vn_aux;
        Elf64_Word      vn_next;
} Elf64_Verneed;
 
typedef struct {
        Elf64_Word      vna_hash;
        Elf64_Half      vna_flags;
        Elf64_Half      vna_other;
        Elf64_Word      vna_name;
        Elf64_Word      vna_next;
} Elf64_Vernaux;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vn_version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此成员标识该结构的版本，如下表中所列。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_NEED_NONE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;无效版本。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_NEED_CURRENT&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;&amp;gt;=1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;当前版本。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vn_cnt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Elf32_Vernaux&lt;/code&gt; 数组中的元素数目。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vn_file&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;以空字符结尾的字符串的字符串表偏移，用于提供版本依赖性的文件名。此名称与文件中找到的 &lt;code&gt;.dynamic&lt;/code&gt; 依赖项之一匹配。请参见&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-42444.html#scrolltoc&#34;&gt;动态节&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vn_aux&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;字节偏移，范围从此 &lt;code&gt;Elf32_Verneed&lt;/code&gt; 项的开头到关联文件依赖项所需的版本定义的 &lt;code&gt;Elf32_Vernaux&lt;/code&gt; 数组。必须存在至少一种版本依赖性。也可以存在其他版本依赖性，具体数目由 &lt;code&gt;vn_cnt&lt;/code&gt; 值表示。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vn_next&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从此 &lt;code&gt;Elf32_Verneed&lt;/code&gt; 项的开头到下一个 &lt;code&gt;Elf32_Verneed&lt;/code&gt; 项的字节偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vna_hash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;版本依赖性名称的散列值。该值是通过使用&lt;a href=&#34;https://docs.oracle.com/cd/E38902_01/html/E38861/chapter6-48031.html#scrolltoc&#34;&gt;散列表节&lt;/a&gt;中介绍的同一散列函数生成的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vna_flags&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;版本依赖性特定信息，如下表中所列。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_FLG_WEAK&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;弱版本标识符。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_FLG_INFO&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0x4&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;SHT_SUNW_versym&lt;/code&gt; 引用用于提供信息，在运行时无需进行验证。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vna_other&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果为非零，则会向此依赖项版本指定版本索引。此索引用于在 &lt;code&gt;SHT_SUNW_versym &lt;/code&gt;内向此版本指定全局符号引用。在 Oracle Solaris 10 发行版及更低 Solaris 版本中，不向依赖项版本指定版本符号索引。在这些目标文件中，&lt;code&gt;vna_other&lt;/code&gt; 的值为 &lt;code&gt;0&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vna_name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;以空字符结尾的字符串的字符串表偏移，用于提供版本依赖性的名称。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vna_next&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从此 &lt;code&gt;Elf32_Vernaux&lt;/code&gt; 项的开头到下一个 &lt;code&gt;Elf32_Vernaux&lt;/code&gt; 项的字节偏移。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;版本符号节&#34;&gt;版本符号节&lt;/h3&gt;
&lt;p&gt;版本符号节由 &lt;code&gt;SHT_SUNW_versym&lt;/code&gt; 类型定义。此节由具有以下结构的元素数组构成。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef Elf32_Half      Elf32_Versym;
typedef Elf64_Half      Elf64_Versym;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;数组元素的数量必须等于关联的符号表中包含的符号表项的数量。此数量由节的 &lt;code&gt;sh_link&lt;/code&gt; 值确定。数组的每个元素都包含一个索引，该索引可以包含下表中显示的值。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表 12-24 ELF 版本依赖性索引&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;名称&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;值&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_NDX_LOCAL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号具有局部作用域。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;VER_NDX_GLOBAL&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号具有全局作用域，并指定给基版本定义。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;&amp;gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;符号具有全局作用域，并指定给用户定义的版本定义 &lt;code&gt;SHT_SUNW_verdef&lt;/code&gt; 或版本依赖性 &lt;code&gt;SHT_SUNW_verneed&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;可以为符号指定特殊的保留索引 &lt;code&gt;0&lt;/code&gt;。可以出于以下任意原因指定此索引。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;始终为非全局符号指定 &lt;code&gt;VER_NDX_LOCAL&lt;/code&gt;。然而，这在实际操作中很少见。版本控制节通常仅与只包含全局符号的动态符号表 &lt;code&gt;.dynsym&lt;/code&gt; 一起创建。&lt;/li&gt;
&lt;li&gt;没有 &lt;code&gt;SHT_SUNW_verdef&lt;/code&gt; 版本定义节的目标文件中定义的全局符号。&lt;/li&gt;
&lt;li&gt;没有 &lt;code&gt;SHT_SUNW_verneed&lt;/code&gt; 版本依赖性节的目标文件中定义的未定义全局符号。或者，其中的版本依赖性节未指定版本索引的目标文件中定义的未定义全局符号。&lt;/li&gt;
&lt;li&gt;符号表的第一项始终为 &lt;code&gt;NULL&lt;/code&gt;。此项始终接收 &lt;code&gt;VER_NDX_LOCAL&lt;/code&gt;，但该值没有任何特定意义。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目标文件所定义的版本指定从 &lt;code&gt;1&lt;/code&gt; 开始的版本索引，并且随版本变化每次增加 &lt;code&gt;1&lt;/code&gt;。索引 &lt;code&gt;1&lt;/code&gt; 保留用于第一个全局版本。如果该目标文件没有 &lt;code&gt;SHT_SUNW_verdef&lt;/code&gt; 版本定义节，则该目标文件定义的所有全局符号均接收索引 &lt;code&gt;1&lt;/code&gt;。如果目标文件具有版本定义节，则 &lt;code&gt;VER_NDX_GLOBAL&lt;/code&gt; 将仅指向第一个此类版本。&lt;/p&gt;
&lt;p&gt;其他 &lt;code&gt;SHT_SUNW_verneed&lt;/code&gt; 依赖项中目标文件所需的版本将指定从 &lt;code&gt;1&lt;/code&gt; 到最终版本定义索引之间的版本索引。这些索引也随版本变化每次增加 &lt;code&gt;1&lt;/code&gt;。由于索引 &lt;code&gt;1&lt;/code&gt; 始终保留用于 &lt;code&gt;VER_NDX_GLOBAL&lt;/code&gt;，依赖项版本可用的第一个索引为 &lt;code&gt;2&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;在 Oracle Solaris 10 发行版及更低 Solaris 版本中，不向 &lt;code&gt;SHT_SUNW_verneed&lt;/code&gt; 依赖项版本指定版本索引。在此类目标文件中，任何符号引用都具有版本索引 &lt;code&gt;0&lt;/code&gt;，这表示该符号没有可用的版本控制信息。&lt;/p&gt;
">ELF文件</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/c-yu-yan-ke-bian-can-shu-ying-yong/"" data-c="
          &lt;p&gt;由Linux的ioctl函数想到使用可变参数可以固定一些功能的接口，简化封装API的难度。&lt;/p&gt;
&lt;h2 id=&#34;11-实现可变参数的原理&#34;&gt;1.1 实现可变参数的原理&lt;/h2&gt;
&lt;p&gt;可变参数的原理很简单，首先要知道3个概念：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;栈的地址是由高向低分配&lt;/li&gt;
&lt;li&gt;函数的参数是从右往左取出，并依次压入栈中&lt;/li&gt;
&lt;li&gt;压栈时会进行sizeof(int)字节对齐&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;从上面3个概念可以发现，只要知道一个参数的压栈后的地址，以及该参数占用地址大小，就可以通过减法推算出下一个参数的地址，可变参数实现就是这样。由于需要知道第一个参数的数据结构大小，所以要实现可变参数就必须有一个固定参数。&lt;/p&gt;
&lt;p&gt;这里有一组宏专门用来简化可变参数的实现，&lt;code&gt;va_start(ap, A)&lt;/code&gt; &lt;code&gt;va_arg(ap, T)&lt;/code&gt; &lt;code&gt;va_end(ap)&lt;/code&gt;,一般使用方法如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;stdarg.h&amp;quot;

void test(int arg, ...)
{
    va_list ap;         // 声明一个参数列表
    va_start(ap, arg);  // 初始化ap，将参数arg右边第一个参数的地址赋给ap

    int a = va_arg(ap, int);            // 声明当前参数为int类型，并获得第一个可变参数的值
    double b = va_arg(ap, double);      // 声明当前参数为double类型，并获得第二个可变参数的值
    void *c = va_arg(ap, void*);        // 声明当前参数为void *类型，并获得第三个可变参数的值

    // 依次轮询所有的可变参数
    // ...

    va_end(ap);         // 注释掉ap指针
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;PS:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;黑客就是在堆栈中修改函数返回地址,执行自己的代码来达到执行自己插入的代码段的目的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;12-编写可变参数函数&#34;&gt;1.2 编写可变参数函数&lt;/h2&gt;
&lt;p&gt;测试案例一&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编写可变参数函数&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;stdarg.h&amp;quot;
static int test_ctl1(char *fmt, ...)
{
    va_list ap;
    va_start(ap, fmt);

    printf(&amp;quot;%d &amp;quot;, va_arg(ap, int));
    printf(&amp;quot;%d &amp;quot;, va_arg(ap, int));
    printf(&amp;quot;%s\n&amp;quot;, va_arg(ap, char*));

    va_end(ap);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;调用可变参数函数&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;test_ctl1(&amp;quot;%d %d %s\n&amp;quot;, (int)1, (int)2, &amp;quot;hello&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;输出结果&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;1 2 hello
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;测试案例二&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编写可变参数函数&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;下面的可变参数测试了传入两个int类型，或两个double类型、或两个void*类型可变参数的情况&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;stdarg.h&amp;quot;

typedef struct
{
    int a;
    double b;
    char str[30];
}test_type_t;

static int test_ctl2(char *obj, int cmd, ...)   // 这里cmd其实没有用到
{
    va_list ap;
    va_start(ap, cmd);

    if (!strcmp(obj, &amp;quot;int&amp;quot;))
    {
        printf(&amp;quot;%d &amp;quot;, va_arg(ap, int));
        printf(&amp;quot;%d\n&amp;quot;, va_arg(ap, int));
    }
    else if (!strcmp(obj, &amp;quot;double&amp;quot;))
    {
        printf(&amp;quot;%f &amp;quot;, va_arg(ap, double));
        printf(&amp;quot;%f\n&amp;quot;, va_arg(ap, double));
    }
    else if (!strcmp(obj, &amp;quot;string&amp;quot;))
    {
        printf(&amp;quot;%s &amp;quot;, va_arg(ap, char*));
        printf(&amp;quot;%s\n&amp;quot;, va_arg(ap, char*));
    }
    else if (!strcmp(obj, &amp;quot;void&amp;quot;))
    {
        test_type_t *test1 = va_arg(ap, void*);
        printf(&amp;quot;%d  %f  %s\n&amp;quot;, test1-&amp;gt;a, test1-&amp;gt;b, test1-&amp;gt;str);

        test_type_t *test2 = va_arg(ap, void*);
        printf(&amp;quot;%d  %f  %s\n&amp;quot;, test2-&amp;gt;a, test2-&amp;gt;b, test2-&amp;gt;str);
    }

    va_end(ap);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;调用可变参数函数&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;test_ctl2(&amp;quot;int&amp;quot;, 0, 1, 2);
test_ctl2(&amp;quot;double&amp;quot;, 0, 3.4, 5.6);
test_ctl2(&amp;quot;string&amp;quot;, 0, &amp;quot;123&amp;quot;, &amp;quot;456&amp;quot;);

test_type_t test1 = 
{
    .a = 10,
    .b = 13.14,
    .str = &amp;quot;PASS&amp;quot;
};

test_type_t test2 = 
{
    .a = 3,
    .b = 3.14,
    .str = &amp;quot;FAIL&amp;quot;
};
test_ctl2(&amp;quot;void&amp;quot;, 0, &amp;amp;test1, &amp;amp;test2);
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;输出结果&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;1 2                     
3.400000 5.600000
123 456
10  13.140000  PASS
3  3.140000  FAIL
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;参考文章：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cloud.tencent.com/developer/article/1769446&#34;&gt;C语言可变参数的原理和应用&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://zhuanlan.zhihu.com/p/26712052&#34;&gt;C语言中可变参数函数实现原理&lt;/a&gt;&lt;/p&gt;
">C语言-可变参数应用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/autoconf-he-automake-de-ying-yong/"" data-c="
          &lt;p&gt;​	对于想做开放源代码软件的开发人员，使用autoconf和automake工具可以帮助我们自动的生成符合自由软件惯例的Makefile，实现使用&lt;code&gt;./configure&lt;/code&gt;，&lt;code&gt;make&lt;/code&gt;，&lt;code&gt;make install&lt;/code&gt;来编译和安装程序。&lt;/p&gt;
&lt;p&gt;安装依赖&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo apt install autoconf automake libtool
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个过程中会使用到命令有：autoscan(autoconf)，aclocal(automake)，autoheader(autoconf)，autoconf，automake命令，下面先介绍这些命令&lt;/p&gt;
&lt;h2 id=&#34;简介&#34;&gt;简介&lt;/h2&gt;
&lt;h4 id=&#34;autoscanautoconf&#34;&gt;autoscan(autoconf)&lt;/h4&gt;
&lt;p&gt;autoscan是用来扫描源码目录来生成一个configure.scan文件，这个文件在后续步骤中会被改名为configure.ac（或configure.in）。默认源码目录为当前目录。&lt;/p&gt;
&lt;p&gt;关于configure.ac的配置项可以参考下面内容：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;标签&lt;/th&gt;
&lt;th&gt;功能&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AC_PREREQ&lt;/td&gt;
&lt;td&gt;声明autoconf要求的版本号。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_INIT&lt;/td&gt;
&lt;td&gt;定义软件名称、版本号、联系方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AM_INIT_AUTOMAKE&lt;/td&gt;
&lt;td&gt;必须要的&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_CONFIG_SCRDIR&lt;/td&gt;
&lt;td&gt;宏用来侦测所指定的源码文件是否存在, 来确定源码目录的有效性.。此处为当前目录下main.c&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_CONFIG_HEADER&lt;/td&gt;
&lt;td&gt;宏用于生成config.h文件，以便autoheader命令使用。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_PROG_CC&lt;/td&gt;
&lt;td&gt;指定编译器，默认是GCC&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_CONFIG_FILES&lt;/td&gt;
&lt;td&gt;生成相应的Makefile文件，不同文件夹下的Makefile通过空格分隔。例如：AC_CONFIG_FILES([Makefile, src/Makefile])&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AC_OUTPUT&lt;/td&gt;
&lt;td&gt;用来设定 configure 所要产生的文件，如果是makefile，configure 会把它检查出来的结果带入makefile.in文件产生合适的makefile。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;aclocalautomake&#34;&gt;aclocal(automake)&lt;/h4&gt;
&lt;p&gt;该命令根据用户定义的宏和acinclude.m4文件的宏，将configure.ac文件所需要的宏定义到文件aclocal.m4中&lt;/p&gt;
&lt;h4 id=&#34;autoheaderautoconf&#34;&gt;autoheader(autoconf)&lt;/h4&gt;
&lt;p&gt;该命令根据configure.ac和acconfig.h文件生成config.h.in文件，其中acconfig.h由用户定义&lt;/p&gt;
&lt;h4 id=&#34;automake&#34;&gt;automake&lt;/h4&gt;
&lt;p&gt;该命令会根据Makefile.am中的配置建立Makefile.in，然后执行configure将生成的Makefile.in转换为Makefile，一般使用&lt;code&gt;automake --add-missing&lt;/code&gt;，它会补全软件需要的必须文件。&lt;/p&gt;
&lt;p&gt;关于Makefile.am文件，这个文件由用户手动创建，配置内容见下文：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 标准检查
AUTOMAKE_OPTIONS = foreign

# 定义子目录
SUBDIRS = .

# 定义可执行文件名（有多个可执行文件时，用空格隔开）
bin_PROGRAMS = hello_bin

# 指定可执行文件依赖的文件，与bin_PROGRAMS定义的执行文件对应
hello_bin_SOURCES = main.c

# 定义依赖的库
# xxx_DEPENDENCIES = 
# xxx_LDADD = 

# 定义依赖库的源文件
# xxx_SOURCES = 

# 定义install时不被导出的库
noinst_LTLIBRARIES = 

# 定义install时不被导出的文件
noinst_HEADERS = 
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;autoconf&#34;&gt;autoconf&lt;/h4&gt;
&lt;p&gt;该命令会将configure.ac的宏展开来生成configure。&lt;/p&gt;
&lt;h2 id=&#34;编写简单的程序&#34;&gt;编写简单的程序&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;编写一个c文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;vim main.c
    
// 内容
#include &amp;lt;stdio.h&amp;gt;

int main(int argc, char *argv[])
{
    printf(&amp;quot;Hellor autotools\n&amp;quot;);

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;autoscan&lt;/code&gt;，运行后会生成configure.scan，将文件名改为configure.ac，并修改文件内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;autoscan
mv configute.scan configure.ac
vim configure.ac

# 修改内容
#                                               -*- Autoconf -*-
# Process this file with autoconf to produce a configure script.

AC_PREREQ([2.69])
AC_INIT([my-test-pack], [0.0.1], [lxowalle@outlook.com])
AC_CONFIG_SRCDIR([main.c])
AC_CONFIG_HEADERS([config.h])		# 存在这行内容时，必须执行autoheader命令
AM_INIT_AUTOMAKE					# 必须添加
# Checks for programs.
AC_PROG_CC

# Checks for libraries.

# Checks for header files.

# Checks for typedefs, structures, and compiler characteristics.

# Checks for library functions.

AC_CONFIG_FILES([Makefile])
AC_OUTPUT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;aclocal&lt;/code&gt;，运行后成aclocal.m4文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;autoheader&lt;/code&gt;，运行后生成config.h.in，这个文件会在./configure时被引用&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;autoconf&lt;/code&gt;，运行后生成configure文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建并编写Makefile.am文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 标准检查
AUTOMAKE_OPTIONS = foreign

# 定义自目录
SUBDIRS = .

# 定义可执行文件名（有多个可执行文件时，用空格隔开）
bin_PROGRAMS = hello_bin

# 指定可执行文件依赖的文件，与bin_PROGRAMS定义的执行文件对应
hello_bin_SOURCES = main.c

# 定义依赖的库
# xxx_DEPENDENCIES = 
# xxx_LDADD = 

# 定义依赖库的源文件
# xxx_SOURCES = 

# 定义install时不被导出的库
noinst_LTLIBRARIES = 

# 定义install时不被导出的文件
noinst_HEADERS = 
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;automake --add-missing&lt;/code&gt;，运行后生成Makefile.in和一些必要文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;./configure&lt;/code&gt;，运行后生成Makefile&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行&lt;code&gt;make &amp;amp;&amp;amp; ./hello_bin&lt;/code&gt;执行程序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;完成&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;运行autoconf出现&lt;code&gt;possibly undefined macro: AM_INIT_AUTOMAKE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;运行autoreconf --install
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;使用autogen脚本&#34;&gt;使用autogen脚本&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;准备文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir autogen_test
cd autogen_test
touch autogen.sh &amp;amp;&amp;amp; chmod +x autogen.sh
touch configure.ac
touch Makefile.am

mkdir src
cd src
touch auto_test.c
touch Makefile.am

# 当前目录结构
~/app/gunmake_test/autogen_test » tree                                   
.
├── autogen.sh
├── configure.ac
├── Makefile.am
└── src
    ├── auto_test.c
    └── Makefile.am
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加autogen_test/src/auto_test.c内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;lt;stdio.h&amp;gt;

int main(int argc, char *argv[])
{
    printf(&amp;quot;Hello autogen\n&amp;quot;);

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加Makefile.am内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# autogen_test/Makefile.am
SUBDIRS = src

.PHONY: auto_clean
 
auto_clean: distclean
	find . -name Makefile.in -exec rm -f {} \;
	rm -rf autom4te.cache
	rm -f missing aclocal.m4 config.h.in config.guess config.sub ltmain.sh install-sh configure depcomp compile

# autogen_test/src/Makefile.am
bin_PROGRAMS=auto_test
auto_test_SOURCES=auto_test.c
auto_test_LDADD=
LIBS=
INCLUDES=
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加configure.ac内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#                     -*- Autoconf -*-
# Process this file with autoconf to produce a configure script.
 
AC_PREREQ([2.69])
AC_INIT([auto_test],[1.1.0],[lxowalle@outlook.com])
 
AC_SUBST([PACKAGE_RELEASE],[1.1.0],[lxowalle@outlook.com])
 
AM_INIT_AUTOMAKE(auto_test,1.0)
AC_CONFIG_SRCDIR([src/auto_test.c])
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([Makefile
               src/Makefile])
 
# Checks for programs.
AC_PROG_CC
AC_PROG_LIBTOOL
 
# Checks for libraries.
 
# Checks for header files.
AC_CHECK_HEADERS([stddef.h string.h])
 
# Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_STDBOOL
AC_TYPE_SIZE_T
 
# Checks for library functions.
AC_FUNC_REALLOC
AC_CHECK_FUNCS([memset socket])
 
AC_OUTPUT

&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加autogen.sh内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/sh
 
echo
echo ... auto_test autogen ...
echo
 
## Check all dependencies are present
MISSING=&amp;quot;&amp;quot;
 
# Check for aclocal
env aclocal --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -eq 0 ]; then
  ACLOCAL=aclocal
else
  MISSING=&amp;quot;$MISSING aclocal&amp;quot;
fi
 
# Check for autoconf
env autoconf --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -eq 0 ]; then
  AUTOCONF=autoconf
else
  MISSING=&amp;quot;$MISSING autoconf&amp;quot;
fi
 
# Check for autoheader
env autoheader --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -eq 0 ]; then
  AUTOHEADER=autoheader
else
  MISSING=&amp;quot;$MISSING autoheader&amp;quot;
fi
 
# Check for automake
env automake --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -eq 0 ]; then
  AUTOMAKE=automake
else
  MISSING=&amp;quot;$MISSING automake&amp;quot;
fi
 
# Check for libtoolize or glibtoolize
env libtoolize --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -eq 0 ]; then
  # libtoolize was found, so use it
  TOOL=libtoolize
else
  # libtoolize wasn&#39;t found, so check for glibtoolize
  env glibtoolize --version &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
  if [ $? -eq 0 ]; then
    TOOL=glibtoolize
  else
    MISSING=&amp;quot;$MISSING libtoolize/glibtoolize&amp;quot;
  fi
fi
 
# Check for tar
env tar -cf /dev/null /dev/null &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
if [ $? -ne 0 ]; then
  MISSING=&amp;quot;$MISSING tar&amp;quot;
fi
 
## If dependencies are missing, warn the user and abort
if [ &amp;quot;x$MISSING&amp;quot; != &amp;quot;x&amp;quot; ]; then
  echo &amp;quot;Aborting.&amp;quot;
  echo
  echo &amp;quot;The following build tools are missing:&amp;quot;
  echo
  for pkg in $MISSING; do
    echo &amp;quot;  * $pkg&amp;quot;
  done
  echo
  echo &amp;quot;Please install them and try again.&amp;quot;
  echo
  exit 1
fi
 
## Do the autogeneration
echo Running ${ACLOCAL}...
$ACLOCAL 
echo Running ${AUTOHEADER}...
$AUTOHEADER
echo Running ${TOOL}...
$TOOL --automake --copy --force
echo Running ${AUTOCONF}...
$AUTOCONF
echo Running ${AUTOMAKE}...
$AUTOMAKE --add-missing --force-missing --copy --foreign
 
# Run autogen in the argp-standalone sub-directory
#echo &amp;quot;Running autogen.sh in argp-standalone ...&amp;quot;
#( cd contrib/argp-standalone;./autogen.sh )
 
# Instruct user on next steps
echo
echo &amp;quot;Please proceed with configuring, compiling, and installing.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;执行autogen.sh&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 运行结果
~/app/gunmake_test/autogen_test » ./autogen.sh                           liuxo@liuxo

... auto_test autogen ...

Running aclocal...
Running autoheader...
Running libtoolize...
Running autoconf...
Running automake...
configure.ac:9: warning: AM_INIT_AUTOMAKE: two- and three-arguments forms are deprecated.  For more info, see:
configure.ac:9: https://www.gnu.org/software/automake/manual/automake.html#Modernize-AM_005fINIT_005fAUTOMAKE-invocation
configure.ac:16: installing &#39;./compile&#39;
configure.ac:17: installing &#39;./config.guess&#39;
configure.ac:17: installing &#39;./config.sub&#39;
configure.ac:9: installing &#39;./install-sh&#39;
configure.ac:9: installing &#39;./missing&#39;
src/Makefile.am:5: warning: &#39;INCLUDES&#39; is the old name for &#39;AM_CPPFLAGS&#39; (or &#39;*_CPPFLAGS&#39;)
src/Makefile.am: installing &#39;./depcomp&#39;

Please proceed with configuring, compiling, and installing.
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;执行&lt;code&gt;./configure &amp;amp;&amp;amp; make&lt;/code&gt;，可以看到src目录下出现可执行文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;执行./src/auto_test&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;完成&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;关于makefileam文件的配置&#34;&gt;关于Makefile.am文件的配置&lt;/h2&gt;
&lt;p&gt;通过Makefile.am文件能自定义目标文件的编译策略，实现灵活的搭建自己的工程。&lt;/p&gt;
&lt;h3 id=&#34;makefileam的常用全局变量&#34;&gt;Makefile.am的常用全局变量&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;$(top_builddir) 生成目标文件的最上层目录，也就是添加了xxx_PROGRAMS的Makefile.am所在的目录&lt;/li&gt;
&lt;li&gt;$(top_srcdir) 工程的最顶层目录，也就是第一个Makefile.am所在的目录&lt;/li&gt;
&lt;li&gt;$(prefix) 安装路径，执行./configure --prefix=xxx可以更新这个变量的值&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;makefileam的常用内容&#34;&gt;Makefile.am的常用内容&lt;/h3&gt;
&lt;p&gt;我总结了一部分，但是因为实战还没有用到，所以解释简略，等待后续补充更多命令和说明&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-make&#34;&gt;## 
#   这是一个Makefile.am的模板，只在开发时作为参考使用
##
# noinst_PROGRAMS       = template              #   编译为可执行文件(不安装)
# bin_PROGRAMS          =                       #   编译为可执行文件(安装到bin目录)

# noinst_LIBRARIES      =                       #   编译为库文件(不安装)
# template_LIBRARIES    =                       #   编译为库文件(安装目录与可执行文件相同)
# template_LTLIBRARIES  =                       #   编译为库文件(libtool)(安装目录与可执行文件相同)

# template_SOURCES      = src/main.c \
#                         src/hello1.c \
#                         src/hello2.c \
#                         src/hello3.c          #   目标文件依赖的所有源文件
# noinst_HEADERS        = include/main.h \
#                         include/hello.h       #   目标文件依赖的所有头文件(不安装)
# template_HEADERS      =                       #   目标文件依赖的所有头文件(安装目录与可执行文件相同)

# template_LIBADD       =                       #   编译时需要加载的其他的库
# template_LDADD        =                       #   链接时需要的所有库文件

# template_CPPFLAGS     = -Iinclude             #   c预处理参数
# template_CFLAGS       =                       #   c编译选项
# template_CXXFLAGS     =                       #   c++编译选项

# template_LDFLAGS      =                       #   链接库标志位

# templatedir           =                       #   数据文件的安装目录
# template_DATA         =                       #   数据文件

# EXTRA_DIST            =                       #   需要打包的所有文件
# SUBDIR                =                       #   需要递归处理的目录(会找到Makefile.am并执行，注意先后顺序)

# AUTOMAKE_OPTIONS      = subdir-objects        #   AUTOMAKE编译选项,详情见(https://www.gnu.org/software/automake/manual/html_node/List-of-Automake-options.html)

# 编译动态库的方式
# projectlibdir=$(libdir)           //新建一个目录，就是该目录就是lib目录
# projectlib_PROGRAMS=project.so
# project_so_SOURCES=xxx.C
# project_so_LDFLAGS=-shared -fpic //GCC编译动态库的选项
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;遇到的问题&#34;&gt;遇到的问题&lt;/h3&gt;
&lt;p&gt;问题1：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apps/template/Makefile.am:11: warning: source file &#39;src/main.c&#39; is in a subdirectory,
apps/template/Makefile.am:11: but option &#39;subdir-objects&#39; is disabled
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;检查生成的库文件名是否正确，例如配置为&lt;code&gt;noinst_PROGRAM = template&lt;/code&gt;和&lt;code&gt;template_SOURCES = src/main.c&lt;/code&gt;，则检查txxx_SOURCES中的xxx是否正确&lt;/p&gt;
&lt;p&gt;问题2:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apps/template/Makefile.am:11: warning: source file &#39;src/main.c&#39; is in a subdirectory,
apps/template/Makefile.am:11: but option &#39;subdir-objects&#39; is disabled
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;生成Makefile时添加参数&lt;code&gt;./configure  --disable-dependency-tracking&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参考文章：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.laruence.com/2009/11/18/1154.html&#34;&gt;Linux下autoconf和automake使用&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://tw511.com/a/01/9109.html&#34;&gt;Linux | C語言開發 | 自動編譯工具autoconf、automake | MakeFile&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/smilejiasmile/article/details/115423035&#34;&gt;autotools 自动编译系列简介&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/zmxiangde_88/article/details/8024223&#34;&gt;Makefile.am文件的实例讲解&lt;/a&gt;&lt;/p&gt;
">Autoconf和Automake的应用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/zai-wsl-shang-shi-yong-adb/"" data-c="
          &lt;p&gt;在WSL上安装后是不能直接连接adb设备，需要保证Linux子系统与Windows都安装了相同版本的adb工具&lt;/p&gt;
&lt;p&gt;工具下载链接：&lt;br&gt;
&lt;a href=&#34;https://dl.google.com/android/repository/platform-tools-latest-windows.zip&#34;&gt;Windows ADB工具&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://dl.google.com/android/repository/platform-tools-latest-linux.zip&#34;&gt;Linux ADB工具&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;windows安装过程&#34;&gt;Windows安装过程&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载压缩包并解压&lt;/li&gt;
&lt;li&gt;将解压后的路径添加到环境变量PATH中&lt;/li&gt;
&lt;li&gt;检查adb是否成功安装，命令:adb --version&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linux安装过程&#34;&gt;Linux安装过程&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载压缩包并解压(可以用wget命令下载)&lt;/li&gt;
&lt;li&gt;将解压的路径添加到环境变量PATH中；如果Linux本身带有adb命令，则可以将解压的platform-tools文件替换到路径/usr/lib/android-adk/下&lt;/li&gt;
&lt;li&gt;检查adb是否成功安装，命令:adb --version&lt;/li&gt;
&lt;/ul&gt;
">在WSL上使用adb</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/zai-linux-shang-da-jian-lwip-ce-shi-huan-jing/"" data-c="
          &lt;h2 id=&#34;一-搭建lwip开发环境&#34;&gt;一、搭建lwip开发环境&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;下载lwip仓库&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 个人仓库
git clone git@github.com:lxowalle/lwip.git

# 官网仓库
git clone https://github.com/lwip-tcpip/lwip.git
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;编译和运行&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 复制一份默认的配置文件(默认配置文件保存路径lwip/contrib/examples/example_app/lwipcfg.h.example)
cp lwip/contrib/examples/example_app/lwipcfg.h.example lwip/contrib/ports/unix/example_app/lwipcfg.h

# 修改lwip默认ip为tap0的地址（如果没有tap0设备见下文创建）,应用程序的main函数位于lwip/contrib/ports/unix/example_app/test.c
# 1. 打开初始化函数
code lwip/contrib/ports/unix/example_app/test.c
# 2. 设置固件的ip地址。这里的环境是(tap0 ip: 192.168.5.1 gw:255.255.255.0)
IP4_ADDR(&amp;amp;ipaddr, 192, 168, 5, 5);
IP4_ADDR(&amp;amp;netmask, 255, 255, 255, 0);
IP4_ADDR(&amp;amp;gw, 192, 168, 5, 1);

# 编译运行
cd lwip/contrib/ports/unix/example_app
make &amp;amp;&amp;amp; ./example_app
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对于没有tap设备的解决方法&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;方法1：&lt;br&gt;
尝试执行lwip自带的更新tapif脚本&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 执行lwip自带脚本来配置tapif
./contrib/ports/unix/setup-tapif
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# setup-tapif脚本内容
export PRECONFIGURED_TAPIF=tap0
sudo ip tuntap add dev $PRECONFIGURED_TAPIF mode tap user `whoami`
sudo ip link set $PRECONFIGURED_TAPIF up
sudo brctl addbr lwipbridge
sudo brctl addif lwipbridge $PRECONFIGURED_TAPIF
sudo ip addr add 192.168.1.1/24 dev lwipbridge
sudo ip link set dev lwipbridge up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;方法2：&lt;/p&gt;
&lt;p&gt;手动创建tap0&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 安装uml工具
sudo apt install uml-utilities

# 2. 创建一个tap设备给指定用户使用
sudo tunctl -u sipeed       # sipeed是用户名

# 3. 分配IP地址并启动tap0
sudo ifconfig tap0 192.168.100.1 up

# 4. 将使用eth0的设备设置为需要通过tap0
sudo route add -host 192.168.0.1 dev tap0     # 10.42.0.1 是本地wifi的地址

# 5. （可选）删除tap0设备
sudo tunctl -d tap0
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;找不到doxygen&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;-- Could NOT find Doxygen (missing: DOXYGEN_EXECUTABLE) 
Doxygen needs to be installed to generate the doxygen documentation
-- Configuring done
CMake Error at CMakeLists.txt:20 (add_dependencies):
  The dependency target &amp;quot;lwipdocs&amp;quot; of target &amp;quot;dist&amp;quot; does not exist.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;尝试安装doxygen. &lt;code&gt;sudo apt install doxygen&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;二-搭建本地mqtt服务端和客户端&#34;&gt;二、搭建本地MQTT服务端和客户端&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;安装mosquitto&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 安装mosquitto服务和客户端
sudo apt-get install mosquitto
sudo apt-get install mosquitto-clients

# 查询/启动/停止mosquitto服务
sudo service mosquitto status       # 查看mosquitto服务状态
sudo service mosquitto start        # 启动服务
sudo service mosquitto stop         # 关闭服务

# mosquitto服务的默认配置文件在/etc/mosquitto/mosquitto.conf
# 停止mosquitto服务后，手动启动来使用自定义的配置文件
mosquitto -c my.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;本地环境测试&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 关闭mosquitto服务
sudo service mosquitto stop
# 新开一个终端，手动启动mqtt服务
mosquitto -c /etc/mosquitto/mosquitto.conf -v
# 新开一个终端，模拟订阅主题topic1
mosquitto_sub -v -t topic1
# 新开一个终端，模拟向主题topic1发布消息
mosquitto_pub -v -t topic1 -m 123456
mosquitto_pub -v -t topic1 -m &amp;quot;hello world&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;作为参考的mosquitto配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# =================================================================
# General configuration
# =================================================================
# 客户端心跳的间隔时间
#retry_interval 20

# 系统状态的刷新时间
#sys_interval 10

# 系统资源的回收时间，0表示尽快处理
#store_clean_interval 10

# 服务进程的PID
#pid_file /var/run/mosquitto.pid

# 服务进程的系统用户
#user mosquitto

# 客户端心跳消息的最大并发数
#max_inflight_messages 10

# 客户端心跳消息缓存队列
#max_queued_messages 100

# 用于设置客户端长连接的过期时间，默认永不过期
#persistent_client_expiration

# =================================================================
# Default listener
# =================================================================

# 监听1883端口的任何IP
listener 1883

# 服务绑定的IP地址
#bind_address

# 服务绑定的端口号
#port 1883

# 允许的最大连接数，-1表示没有限制
#max_connections -1

# cafile：CA证书文件
# capath：CA证书目录
# certfile：PEM证书文件
# keyfile：PEM密钥文件
#cafile
#capath
#certfile
#keyfile

# 必须提供证书以保证数据安全性
#require_certificate false

# 若require_certificate值为true，use_identity_as_username也必须为true
#use_identity_as_username false

# 启用PSK（Pre-shared-key）支持
#psk_hint

# SSL/TSL加密算法，可以使用“openssl ciphers”命令获取
# as the output of that command.
#ciphers

# =================================================================
# Persistence
# =================================================================

# 消息自动保存的间隔时间
#autosave_interval 1800

# 消息自动保存功能的开关
#autosave_on_changes false

# 持久化功能的开关
persistence true

# 持久化DB文件
#persistence_file mosquitto.db

# 持久化DB文件目录
#persistence_location /var/lib/mosquitto/

# =================================================================
# Logging
# =================================================================

# 4种日志模式：stdout、stderr、syslog、topic
# none 则表示不记日志，此配置可以提升些许性能
log_dest none

# 选择日志的级别（可设置多项）
#log_type error
#log_type warning
#log_type notice
#log_type information

# 是否记录客户端连接信息
#connection_messages true

# 是否记录日志时间
#log_timestamp true

# =================================================================
# Security
# =================================================================

# 客户端ID的前缀限制，可用于保证安全性
#clientid_prefixes

# 允许匿名用户
allow_anonymous true

# 用户/密码文件，默认格式：username:password
#password_file

# PSK格式密码文件，默认格式：identity:key
#psk_file

# pattern write sensor/%u/data
# ACL权限配置，常用语法如下：
# 用户限制：user &amp;lt;username&amp;gt;
# 话题限制：topic [read|write] &amp;lt;topic&amp;gt;
# 正则限制：pattern write sensor/%u/data
#acl_file

# =================================================================
# Bridges
# =================================================================

# 允许服务之间使用“桥接”模式（可用于分布式部署）
#connection &amp;lt;name&amp;gt;
#address &amp;lt;host&amp;gt;[:&amp;lt;port&amp;gt;]
#topic &amp;lt;topic&amp;gt; [[[out | in | both] qos-level] local-prefix remote-prefix]

# 设置桥接的客户端ID
#clientid

# 桥接断开时，是否清除远程服务器中的消息
#cleansession false

# 是否发布桥接的状态信息
#notifications true

# 设置桥接模式下，消息将会发布到的话题地址
# $SYS/broker/connection/&amp;lt;clientid&amp;gt;/state
#notification_topic

# 设置桥接的keepalive数值
#keepalive_interval 60

# 桥接模式，目前有三种：automatic、lazy、once
#start_type automatic

# 桥接模式automatic的超时时间
#restart_timeout 30

# 桥接模式lazy的超时时间
#idle_timeout 60

# 桥接客户端的用户名
#username

# 桥接客户端的密码
#password

# bridge_cafile：桥接客户端的CA证书文件
# bridge_capath：桥接客户端的CA证书目录
# bridge_certfile：桥接客户端的PEM证书文件
# bridge_keyfile：桥接客户端的PEM密钥文件
#bridge_cafile
#bridge_capath
#bridge_certfile
#bridge_keyfile
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-配置lwip的mqtt测试环境&#34;&gt;三、配置lwip的mqtt测试环境&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;下载和编译lwip&lt;/p&gt;
&lt;p&gt;见搭建lwip开发环境&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载、安装和配置mosquitto&lt;/p&gt;
&lt;p&gt;见搭建本地MQTT服务端和客户端&lt;/p&gt;
&lt;p&gt;配置mosquitto&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 修改配置文件/etc/mosquitto/mosquitto.conf，添加以下内容，否则mosquitto可能只支持通过地址127.0.0.1访问
listener 1883
allow_anonymous true
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置lwip&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;配置固定IP地址&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// 1. 在mqtt_example.c文件添加MQTT的目标服务器地址
static ip_addr_t mqtt_ip = IPADDR4_INIT_BYTES(10, 42, 0, 1);	// 这里10.42.0.1是本机地址，如果eth0地址为192.168.1.23，也可以填写192.168.1.23
// 2. 在test.c文件添加本地地址
#define LWIP_PORT_INIT_IPADDR(addr)   IP4_ADDR((addr), 10,42,0,204)
#define LWIP_PORT_INIT_GW(addr)       IP4_ADDR((addr), 10,42,0,1)
#define LWIP_PORT_INIT_NETMASK(addr)  IP4_ADDR((addr), 255,255,255,0)
LWIP_PORT_INIT_GW(&amp;amp;gw);
LWIP_PORT_INIT_IPADDR(&amp;amp;ipaddr);		# 注：该地址会被DHCP改变
LWIP_PORT_INIT_NETMASK(&amp;amp;netmask);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在配置文件lwipcfg.h中添加和使能宏LWIP_MQTT_APP&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#define LWIP_MQTT_APP 1
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建虚拟网卡&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 找到本地路由的地址。以下命令基于路由地址10.42.0.1
# 2. 创建一个tap设备给指定用户使用
sudo tunctl -u sipeed       # sipeed是用户名
# 3. 分配IP地址并启动tap0
sudo ifconfig tap0 10.42.0.1 up
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编译运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd lwip/contrib/ports/unix/example_app
make &amp;amp;&amp;amp; ./example_app

# lwip打印的日志应当如下：
status_callback==UP, local interface IP is 10.42.0.204
MQTT client &amp;quot;test&amp;quot; connection cb: status 0
MQTT client &amp;quot;test&amp;quot; request cb: err 0
MQTT client &amp;quot;test&amp;quot; request cb: err 0
status_callback==UP, local interface IP is 10.42.0.204
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过mosquitto_pub发布消息&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# lwip的mqtt示例程序默认订阅了两个主题topic_qos1和topic_qos0,可以按需选择主题测试
mosquitto_pub -t topic_qos1 -m 12

# lwip打印的日志应当如下：
MQTT client &amp;quot;test&amp;quot; publish cb: topic topic_qos1, len 3
MQTT client &amp;quot;test&amp;quot; data cb: len 3, flags 1MQTT client &amp;quot;test&amp;quot; publish cb: topic topic_qos1, len 3
MQTT client &amp;quot;test&amp;quot; data cb: len 3, flags 1
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
">在linux上搭建lwip测试环境</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/zai-linux-shang-da-jian-lvgl-ce-shi-huan-jing/"" data-c="
          &lt;p&gt;为了防止折腾，下面直接用已经测试好的环境&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装依赖&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt-get install -y build-essential libsdl2-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;下载测试仓库&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载测试代码，二选一
git clone git@github.com:lxowalle/lvgl_test_project.git
git clone https://github.com/lxowalle/lv_port_pc_vscode.git
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;下载子模块&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd lvgl_test_project    # or cd lv_port_pc_vscode
git submodule update --init --recursive
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;编译运行&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd lvgl_test_project    # or cd lv_port_pc_vscode
make &amp;amp;&amp;amp; ./build/bin/demo
&lt;/code&gt;&lt;/pre&gt;
">在linux上搭建lvgl测试环境</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/tong-guo-ren-lian-5-guan-jian-dian-ji-suan-ou-la-jiao/"" data-c="
          &lt;p&gt;注：&lt;br&gt;
pitch 俯仰角 绕x轴旋转&lt;br&gt;
yaw 偏航角 绕y轴旋转&lt;br&gt;
roll 摆动角 绕z轴旋转&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;static float get_roll(int l_eye_x, int l_eye_y, int r_eye_x, int r_eye_y) {
    float a = r_eye_x - l_eye_x;
    float b = r_eye_y - l_eye_y;

    if (fabs(a) &amp;lt; 0.0000001f)   return 0.f;
    else {
        float res = atanf(1 - a / b) * 180.0f / 3.1415926;
        return res &amp;gt;= 0 ? res - 90 : res + 90;        
    }
}

static float get_yaw(int nose_x, int face_x, int face_w) {
    float a = nose_x - face_x;
    float b = a / (face_w &amp;gt;&amp;gt; 1) - 1;
    return asinf(b) * 180 / 3.1415926;
}

static float get_pitch(int nose_y, int face_y, int face_h)
{
	float a = nose_y - face_y;
	float b = a / (face_h * 0.6f) - 1;
	return asinf(b) * 180 / 3.1415926;
}
&lt;/code&gt;&lt;/pre&gt;
">通过人脸5关键点计算欧拉角</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/shi-yong-pjsip-ku-jian-jie-yu-shi-xian-yu-yin-he-shi-pin-tong-hua/"" data-c="
          &lt;h2 id=&#34;一-简单介绍&#34;&gt;一、简单介绍&lt;/h2&gt;
&lt;p&gt;​		pjsip库是一个用C写的多媒体通信库，核心功能就是实现语音和视频通话，围绕这两个功能添加了很多协议支持。SIP信令协议实现会话的创建、修改和终止，SDP协议用来双方描述自身会话信息。RTP协议实现单播和多播网络中实时传输提供时间信息和流同步。STUN用于协助NAT穿越等等。&lt;/p&gt;
&lt;h3 id=&#34;11-sip信令协议&#34;&gt;1.1 SIP信令协议&lt;/h3&gt;
&lt;p&gt;参考自：&lt;a href=&#34;https://www.rfc-editor.org/rfc/inline-errata/rfc3261.html&#34;&gt;RFC3261&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面描述中atlanta.com和biloxi.com是用于SIP电话(可以称为softpthoe或软电话)通信的服务器。Alice和Bob是两个SIP电话。下面的示例是Alice向Bob播出电话的示例:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;                     atlanta.com  . . . biloxi.com
                 .      proxy              proxy     .
               .                                       .
       Alice&#39;s  . . . . . . . . . . . . . . . . . . . .  Bob&#39;s
      softphone                                        SIP Phone
         |                |                |                |
         |    INVITE F1   |                |                |
         |---------------&amp;gt;|    INVITE F2   |                |
         |  100 Trying F3 |---------------&amp;gt;|    INVITE F4   |
         |&amp;lt;---------------|  100 Trying F5 |---------------&amp;gt;|
         |                |&amp;lt;-------------- | 180 Ringing F6 |
         |                | 180 Ringing F7 |&amp;lt;---------------|
         | 180 Ringing F8 |&amp;lt;---------------|     200 OK F9  |
         |&amp;lt;---------------|    200 OK F10  |&amp;lt;---------------|
         |    200 OK F11  |&amp;lt;---------------|                |
         |&amp;lt;---------------|                |                |
         |                       ACK F12                    |
         |-------------------------------------------------&amp;gt;|
         |                   Media Session                  |
         |&amp;lt;================================================&amp;gt;|
         |                       BYE F13                    |
         |&amp;lt;-------------------------------------------------|
         |                     200 OK F14                   |
         |-------------------------------------------------&amp;gt;|
         |                                                  |
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上面的示例中：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在通话前，Alice会提前注册到atlanta.com服务器，Bob会提前注册到biloxi.com服务器。&lt;/li&gt;
&lt;li&gt;现在开始通话，首先是Alice向Bob发起通话，但是由于不知道biloxi.com服务器和Bob的位置，所以将邀请发送给代理服务器atlanta.com，atlanta.com服务器会转发INVITE请求并返回一个100(trying)来响应Alice，Alice会将响应的文本与INVITE文本关联。注意：Alice发起INVITE时会附带SDP信息&lt;/li&gt;
&lt;li&gt;atlanta.com代理服务器会通过特定类型的DNS来找到为biloxi.com提供服务的SIP服务器，并获取到biloxi.com的IP地址，然后在Alice的INVITE请求文本前添加保存了自己IP地址的Via头字段并向biloxi.com服务器转发请求。biloxi.com服务器接收到INVATE请求后会返回一个100 (Trying)来响应atlanta.com服务器，随后通过查询数据库（定位服务）找到Bob的地址，biloxi.com服务器将带有自己地址的Via头字段添加到INVITE并代理到Bob的电话。&lt;/li&gt;
&lt;li&gt;Bob接受到INVITE后会提醒Bob有来自Alice的电话，并返回180 (Ring)来表示正在响铃。返回的180 (Ringing)会根据之前添加的Via字段依次返回到biloxi.com服务器，atlanta.com服务器和Alice（每次返回都会先删除自己添加的Via头字段），Alice此时也能收到回铃音的反馈。&lt;/li&gt;
&lt;li&gt;如果Bob接受了电话，则会返回200 (OK)并附带SDP消息来描述会话信息。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;发起邀请的文本：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;INVITE sip:bob@biloxi.com SIP/2.0
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bK776asdhds
Max-Forwards: 70
To: Bob &amp;lt;sip:bob@biloxi.com&amp;gt;
From: Alice &amp;lt;sip:alice@atlanta.com&amp;gt;;tag=1928301774
Call-ID: a84b4c76e66710@pc33.atlanta.com
CSeq: 314159 INVITE
Contact: &amp;lt;sip:alice@pc33.atlanta.com&amp;gt;
Content-Type: application/sdp
Content-Length: 142
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接受邀请的文本：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;SIP/2.0 200 OK
Via: SIP/2.0/UDP server10.biloxi.com				# biloxi.com
;branch=z9hG4bKnashds8;received=192.0.2.3
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com			# atlanta.com添加
;branch=z9hG4bK77ef4c2312983.1;received=192.0.2.2	
Via: SIP/2.0/UDP pc33.atlanta.com					# Alice添加
;branch=z9hG4bK776asdhds ;received=192.0.2.1
To: Bob &amp;lt;sip:bob@biloxi.com&amp;gt;;tag=a6c85cf
From: Alice &amp;lt;sip:alice@atlanta.com&amp;gt;;tag=1928301774
Call-ID: a84b4c76e66710@pc33.atlanta.com
CSeq: 314159 INVITE
Contact: &amp;lt;sip:bob@192.0.2.4&amp;gt;
Content-Type: application/sdp
Content-Length: 131
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-sdp协议&#34;&gt;1.2 SDP协议&lt;/h3&gt;
&lt;p&gt;参考自：&lt;a href=&#34;https://www.rfc-editor.org/rfc/rfc8866.html&#34;&gt;RFC8866&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;121-描述&#34;&gt;1.2.1 描述&lt;/h4&gt;
&lt;p&gt;​	SDP与SIP一起使用时，SDP被用来格式化SIP创建会话的消息中携带会话描述。这些SDP描述包括以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;会话名称和目的&lt;/li&gt;
&lt;li&gt;会话处于活动状态的时间&lt;/li&gt;
&lt;li&gt;包含会话的媒体&lt;/li&gt;
&lt;li&gt;接受这些媒体所需的信息
&lt;ul&gt;
&lt;li&gt;媒体类型（video,audio）&lt;/li&gt;
&lt;li&gt;媒体传输协议（RTP/UDP/IP,H.320）&lt;/li&gt;
&lt;li&gt;媒体格式（H.261 video,MPEG video）&lt;/li&gt;
&lt;li&gt;媒体多组播地址&lt;/li&gt;
&lt;li&gt;媒体传输端口&lt;/li&gt;
&lt;li&gt;媒体远程地址（单播IP会话）&lt;/li&gt;
&lt;li&gt;媒体的远程传输端口（单播IP会话）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;会话使用的带宽信息&lt;/li&gt;
&lt;li&gt;会议负责人的联系方式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;​	SDP必须传达足够的信息以使应用程序能够加入会话，并向可能需要知道的任何非参与者宣布要使用的资源&lt;/p&gt;
&lt;h4 id=&#34;122-规范&#34;&gt;1.2.2 规范&lt;/h4&gt;
&lt;h5 id=&#34;基本格式&#34;&gt;基本格式&lt;/h5&gt;
&lt;p&gt;SDP协议由多行文本信息组成，基本格式如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;type&amp;gt;=&amp;lt;value&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;说明：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;type:是一个区分大小写的字符。&lt;/p&gt;
&lt;p&gt;=：等号两侧不使用空格分割符。如果有空格，那么这个空格代表value的一部分&lt;/p&gt;
&lt;p&gt;value:是一个取决于type的结构化文本，由单个空格字符或自由格式字符串分隔的多个子字段，除非特定字段另有定义，否则区分大小写&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&#34;sdp描述说明&#34;&gt;SDP描述说明&lt;/h5&gt;
&lt;p&gt;​	SDP描述中某些行必须存在，某些行可选。下面的格式中带*号表示可选行。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;   会话描述
      v=（会话描述协议的版本）
      o=（发起者和会话标识符）
      s=（会话名称）
      i=*（会话信息）
      u=*（描述的URI）
      e=*（电子邮件地址）
      p=*（电话号码）
      c=*（连接信息——如果包含在所有媒体描述）
      b=*（零个或多个带宽信息行）
      一个或多个时间描述：
        （“t=”、“r=”和“z=”行；见下文）
      k=*（已过时）
      a=*（零个或多个会话属性行）
      零个或多个媒体描述

   时间说明
      t=（会话处于活动状态的时间）
      r=*（零次或多次重复）
      z=*（可选时区偏移线）

   媒体描述（如果有）
      m=（媒体名称和传输地址）
      i=*（媒体标题）
      c=*（连接信息——可选，如果包含在
           会话级别）
      b=*（零个或多个带宽信息行）
      k=*（已过时）
      a=*（零个或多个媒体属性行）
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;sdp描述的实例&#34;&gt;SDP描述的实例&lt;/h5&gt;
&lt;pre&gt;&lt;code class=&#34;language-sdp&#34;&gt;v=0
o=jdoe 3724394400 3724394405 IN IP4 198.51.100.1
s=Call to John Smith
i=SDP Offer #1
u=http://www.jdoe.example.com/home.html
e=Jane Doe &amp;lt;jane@jdoe.example.com&amp;gt;
p=+1 617 555-6011
c=IN IP4 198.51.100.1
t=0 0
m=audio 49170 RTP/AVP 0
m=audio 49180 RTP/AVP 0
m=video 51372 RTP/AVP 99
c=IN IP6 2001:db8::2
a=rtpmap:99 h263-1998/90000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对上面实例的注释：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 会话描述协议的版本，没有次版本号
v=0
# o=&amp;lt;username&amp;gt; &amp;lt;sess-id&amp;gt; &amp;lt;sess-version&amp;gt; &amp;lt;nettype&amp;gt; &amp;lt;addrtype&amp;gt; &amp;lt;unicast-address&amp;gt;
# 会话发起者jdoe,会话id：3724394400，会话版本：3724394405，网络类型：IN(IN表示Internet)，地址类型：IP4,单播地址：198.51.100.1
o=jdoe 3724394400 3724394405 IN IP4 198.51.100.1
# s=&amp;lt;会话名称&amp;gt;
s=Call to John Smith
# i=&amp;lt;会话信息&amp;gt;
i=SDP Offer #1
# u=&amp;lt;uri&amp;gt;
# 指向与会话有关的可读信息的指针
u=http://www.jdoe.example.com/home.html
# e=&amp;lt;电子邮件地址&amp;gt; 
e=Jane Doe &amp;lt;jane@jdoe.example.com&amp;gt;
# p=&amp;lt;电话号码&amp;gt;
p=+1 617 555-6011
# c=&amp;lt;nettype&amp;gt; &amp;lt;addrtype&amp;gt; &amp;lt;connection-address&amp;gt;
# 连接信息
c=IN IP4 198.51.100.1
# t=&amp;lt;开始时间&amp;gt; &amp;lt;停止时间&amp;gt;
# 开始时间为0表示立即开始，停止时间为0表示会话永不停止
t=0 0
# m=&amp;lt;media&amp;gt; &amp;lt;port&amp;gt; &amp;lt;proto&amp;gt; &amp;lt;fmt&amp;gt; ...
# 媒体为audio，端口49170，协议为RTP/AVP，格式0
m=audio 49170 RTP/AVP 0
m=audio 49180 RTP/AVP 0
# 媒体为vedio，端口51372，协议为RTP/AVP，格式99
m=video 51372 RTP/AVP 99
# 这里c=表示地址映射
c=IN IP6 2001:db8::2
# a=表示某个属性，这里属性是rtpmap
a=rtpmap:99 h263-1998/90000
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;RTP,STUN,TURN,ICE协议暂时用不到，先不关注。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;二-pjsip库&#34;&gt;二、pjsip库&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.pjsip.org/&#34;&gt;pjsip官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;pjsip库的主要有7个文件目录，在每个目录都对应一类功能，并且可以编译为单独的库，每个目录内都有对应的测试程序。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;+---pjlib			# 基础库，所有库的基础库
+---pjlib-util		# 辅助库，包含XML、STUN、MD5算法等
+---pjmedia			# 媒体库，包含各种媒体的编解码器
+---pjnath			# 网络相关库，包含STUN、TURN、ICE的实现
+---pjsip			# SIP协议栈
+---pjsip-apps		# 示例程序的实现，可以在这里参考一些API的使用
+---third_party		# 第三方库的源码，Speex、iLBC 和 GSM 编解码器
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;21-编译&#34;&gt;2.1 编译&lt;/h3&gt;
&lt;p&gt;​	pjsip库最新版是2.11.1版，在github上&lt;a href=&#34;https://github.com/pjsip/pjproject&#34;&gt;获取源码&lt;/a&gt;。基本编译方法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 安装依赖
sudo apt-get install build-essential git-core checkinstall yasm texi2html libvorbis-dev libx11-dev libvpx-dev libxfixes-dev zlib1g-dev pkg-config netcat libncurses5-dev nasm libx264-dev libv4l-dev libasound2-dev libsdl2-dev libxext-dev ffmpeg libavutil-dev libavcodec-dev libavformat-dev libswscale-dev

# 拉取代码
git clone https://github.com/pjsip/pjproject.git

# 更改配置文件`pjproject/pjlib/include/pj/config_site.h`的内容(没有该文件就新建一个)
#include &amp;lt;pj/config_site_sample.h&amp;gt;
#define PJMEDIA_AUDIO_DEV_HAS_ALSA	        1

#define PJMEDIA_HAS_VIDEO		            1
#define PJMEDIA_HAS_FFMPEG		            1
#define PJMEDIA_HAS_FFMPEG_CODEC_H264       1
#define PJMEDIA_VIDEO_DEV_HAS_V4L2	        1

# 编译代码，方法1（运行在本地）
cd pjproject
git checkout 2.11.1
make distclean
./configure --prefix=$PWD/install --disable-libwebrtc --disable-libyuv --enable-shared --disable-static
make dep
make -j8
make install

# 编译代码，方法2（交叉编译）
cd pjproject
git checkout 2.11.1
make distclean
PATH=$PATH:/opt/toolchain-sunxi-musl/toolchain/bin
./configure --host=arm-openwrt-linux-muslgnueabi --prefix=$PWD/install --disable-libwebrtc --disable-libyuv --enable-shared --disable-static LDFLAGS=&amp;quot;-L/home/liuxo/third_party/FFmpeg/install/lib&amp;quot; LIBS=&amp;quot;-lavutil -lswresample -lavformat -lavcodec -lswscale&amp;quot;    # ps:好像并不能关掉静态库生成
make dep
make -j8
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;FFMPEG交叉编译：&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 拉取代码
git clone https://github.com/FFmpeg/FFmpeg.git
cd FFmpeg
checkout n4.2.5
PATH=$PATH:/opt/toolchain-sunxi-musl/toolchain/bin
./configure --cross-prefix=arm-openwrt-linux-muslgnueabi- --enable-cross-compile --prefix=$PWD/install --enable-shared --arch=arm --target-os=linux
make -j8
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;tips:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;出现错误&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;arm-openwrt-linux-muslgnueabi/bin/ld: cannot find -lasound
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将libasound.so复制到pjproject/pjlib/lib目录下,或者添加libasound的路径，例如:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./configure LDFLAGS=&amp;quot;-L/home/liuxo/sipeed/MF_SDK_v83x/components/libmaix/libmaix/components/libmaix/lib/arch/v833&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出现错误&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;main.c:(.text+0x14): undefined reference to `backtrace&#39;  
main.c:(.text+0x44): undefined reference to `backtrace_symbols_fd&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注释掉有关backtrace和backtrace_symbols_fd的函数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出现错误&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;交叉编译时出现编译平台错误
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在pjproject/pjlib/include/pj/config.h下定义宏PJ_AUTOCONF，例如&lt;code&gt;#define PJ_AUTOCONF&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出现错误&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;error: libavutil/avutil.h: No such file or directory
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看交叉编译工具的默认搜索目录：&lt;code&gt;echo &#39;main(){}&#39;|arm-linux-gcc -E -v -&lt;/code&gt;，并将缺少的头文件复制到交叉编译工具的搜索目录中&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出现错误&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/home/liuxo/third_party/pjproject/pjmedia/lib/libpjmedia-codec.so: undefined reference to `av_frame_unref&#39;
/home/liuxo/third_party/pjproject/pjmedia/lib/libpjmedia-codec.so: undefined reference to `avcodec_encode_video2&#39;
/home/liuxo/third_party/pjproject/pjmedia/lib/libpjmedia-codec.so: undefined reference to `av_opt_set&#39;
/home/liuxo/third_party/pjproject/pjmedia/lib/libpjmedia-codec.so: undefined reference to `av_opt_set_int&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;发现Makefile在编译动态库时默认是没有链接FFmpeg库，需要主动交叉编译FFMPEG并且通过LDFLAGS设置外部库的路径，LIBS设置需要链接的库，例如:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./configure LDFLAGS=&amp;quot;-L/home/liuxo/third_party/FFmpeg/install/lib&amp;quot; LIBS=&amp;quot;-lavutil -lswresample -lavformat -lavcodec -lswscale&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;22-pjsip库相关说明文档获取方法&#34;&gt;2.2 pjsip库相关说明文档获取方法&lt;/h3&gt;
&lt;p&gt;官网有很详细的资料，基本上所有说明都从官网获取&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PJSIP函数、结构体、变量查询：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;例如需要查询&lt;code&gt;pjsua_perror()&lt;/code&gt;函数的用法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;打开&lt;a href=&#34;https://www.pjsip.org/&#34;&gt;官网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;找到网页最上方的搜索栏，填入&lt;code&gt;pjsua_perror&lt;/code&gt;并点击Search，确认提交表单&lt;/li&gt;
&lt;li&gt;查看弹出的网页可以找到关于&lt;code&gt;pjsua_perror&lt;/code&gt;的说明&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ps：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1、可能需要科学上网&lt;br&gt;
2、函数、结构体、变量的说明都可以通过上述方式查到&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;PJSIP API使用方式参考&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可以通过运行和看test源码来快速应用。pjproject/pjsip-apps目录下有很多pjsip库的应用测试程序，如果用C编程可以参考pjproject/pjsip-apps/pjsua目录下的程序，该程序对应的可执行文件位于pjproject/pjsip-apps/bin目录下的pjsua可执行文件。&lt;/p&gt;
&lt;p&gt;通过应用pjsua程序测试，并观察源码的调用来快速掌握API的使用方法。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PJSIP Video使用方法参考(未成功)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;pjsip库的Video支持有专门的文档介绍，可以参考&lt;a href=&#34;https://trac.pjsip.org/repos/wiki/Video_Users_Guide&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;23-运行测试&#34;&gt;2.3 运行测试&lt;/h3&gt;
&lt;p&gt;编译完成后通过pjproject/pjsip-apps/bin/pjsua程序进行测试。pjsua是基于pjsip库编译得到的一个命令行sip用户代理。&lt;/p&gt;
&lt;h4 id=&#34;221-准备sip服务器&#34;&gt;2.2.1 准备SIP服务器&lt;/h4&gt;
&lt;p&gt;miniSIPServer作为SIP服务器，&lt;a href=&#34;http://www.portsip.cn/download-portsip-softphone/&#34;&gt;PortSIP&lt;/a&gt;软件作为手机端SIP客户端，Deepin编译出pjsua程序作为电脑端SIP客户端&lt;/p&gt;
&lt;h4 id=&#34;222-pjsua测试&#34;&gt;2.2.2 pjsua测试&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;语音通话测试：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;miniSIPServer设置ip地址(192.168.0.15)，从机地址(100,101)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;手机端打开PortSIP软件，输入用户名101，密码101，SIP Domain:192.168.0.15向SIP服务器注册&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;pjsua端执行命令&lt;code&gt;pjsua --config-file pjsua.cfg&lt;/code&gt;向SIP服务器注册&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# pjsua.cfg是用户创建的配置信息，内容如下
--id sip:100@192.168.0.15
--registrar sip:192.168.0.15
--realm *
--username 100
--password 100

--color
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;手机端拨号100，播出后应当能在pjsua端听到呼叫提示音&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;pjusa输入a并回车，再次输入200并回车，此时通话建立&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;正常通话&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;视频通话测试：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;使用cheese工具可以验证摄像头是否可用&lt;/p&gt;
&lt;p&gt;启动视频通话需要有以下支持&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;格式转换和视频需要：SDL(Version 2.0)&lt;/li&gt;
&lt;li&gt;H263编解码需要：libyuv 或 ffmpeg&lt;/li&gt;
&lt;li&gt;H264编解码需要：OpenH264或libx264或ffmpeg&lt;/li&gt;
&lt;li&gt;VP8或VP9编解码需要：libvpx&lt;/li&gt;
&lt;li&gt;Linux环境还需要支持：Video4Linux2(v4l2)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;执行命令&lt;code&gt;pjsua --config-file pjsua.cfg&lt;/code&gt;注册本机（参考步骤1）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在弹出的命令行输入：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vid enable           # 打开设备
vid acc autotx on    # 自动发送视频流
vid acc autorx on    # 自动接收视频流
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;拨号或接通电话&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;拨通后即可视频和语音通话&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(可选)在命令行输入：&lt;code&gt;vid dev prev on -1&lt;/code&gt; 可以打开采集的设备的预览窗口&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&#34;https://trac.pjsip.org/repos/wiki/Video_Users_Guide&#34;&gt;视频通话说明文档&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;附录&#34;&gt;附录&lt;/h2&gt;
&lt;h3 id=&#34;1-pjsua命令使用基本用法&#34;&gt;1. pjsua命令使用基本用法&lt;/h3&gt;
&lt;p&gt;基本用法：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pjsua [选项] [sip的url调用]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;一般选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;     --config-file=file     读取从文件的配置/参数；
     --help         显示此帮助屏幕；
     --version         显示版本信息，配置信息；
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;日志记录选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --log-file=fname    日志文件名（默认是stderr）；
    --log-level=N       设置日志的最大级别为N（0（无）6（跟踪））（默认值= 5）；
    --app-log-level=N   设置日志的最大水平为stdout显示（默认值= 4）；
    --color             运用丰富多彩的日志（在Win32默认开启）；
    --no-color          禁用丰富多彩的日志；
    --light-bg          使用白底黑字的颜色（默认是黑暗的背景）；
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;SIP帐户选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --use-ims           开启和这个账号相关的3GPP/IMS设置；
    --use-srtp=N        是否使用SRTP?  0:不使用, 1:可选, 2:强制使用 (默认:0)；
    --srtp-secure=N     SRTP 是否需要安全的SIP? 0:不需要, 1:tls方式, 2:sips (默认:1)；
    --registrar=url     设置注册服务器的URL；
    --id=url            设置本地账户的URL
    --contact=url       选择性的覆盖联系人信息
    --contact-params=S  给指定的联系URI添加S参数
    --proxy=url         可选择的访问代理服务器的URL                     
    --reg-timeout=SEC   注册时间间隔 (default 55)
    --realm=string      设置域
    --username=string   设置用户名
    --password=string   设置密码
    --publish           发PUBLISH
    --use-100rel        需要可靠的临时响应(100rel)
    --auto-update-nat=N n为0或1来启用/禁用SIP遍历后面对称NAT(默认1)
    --next-cred         添加其他凭据
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;SIP帐户控制：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;	--next-account      添加更多的账户
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;传输选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --ipv6              使用IPv6
    --local-port=port   端口
    --ip-addr=IP        ip地址
    --bound-addr=IP     绑定端口
    --no-tcp            禁用TCP传输
    --no-udp            禁用UDP传输
    --nameserver=NS     域名服务器
    --outbound=url      设置全局代理服务器的URL，可以指定多次
    --stun-srv=name     设置STUN服务器主机或域名
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TLS选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --use-tls           启用TLS传输（默认不开启）
    --tls-ca-file       指定TLS CA文件（默认为无）
    --tls-cert-file     指定TLS证书文件（默认为无）
    --tls-privkey-file  指定TLS私钥文件（默认值=无）
    --tls-password      指定TLS私钥文件密码（默认为无）
    --tls-verify-server 验证服务器的证书（默认=没有）
    --tls-verify-client 验证客户端的证书（默认=没有）
    --tls-neg-timeout   指定超时（默认值无）
    --tls-srv-name      指定TLS服务器名称为多宿主服务器（可选）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;媒体选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --add-codec=name    手工添加编解码(默认开启所有)
    --dis-codec=name    禁用某个编解码
    --clock-rate=N      覆盖会议桥时钟频率
    --snd-clock-rate=N  覆盖音频设备时钟频率
    --stereo            音频设备及会议桥开通立体声模式
    --null-audio        使用NULL音频设备
    --play-file=file    在会议桥中注册WAV文件
    --play-tone=FORMAT  向会议桥注册音调，格式是&#39;F1,F2,ON,OFF&#39;，其中F1,F2为频率，
            ON,OFF=on/off ,可以指定多次。
    --auto-play         自动播放文件（仅来电）
    --auto-loop         自动循环传入RTP到传出RTP
    --auto-conf         自动加入会议
    --rec-file=file     录音文件(扩展名可以使.wav 或者 .mp3）
    --auto-rec          自动记录通话
    --quality=N         指定媒介质量(0-10,默认6)
    --ptime=MSEC        覆盖编解码器ptime的毫秒的
    --no-vad            停用VAD方案/沉默探测器（默认启用VAD）
    --ec-tail=MSEC      设置回波抵消尾长度（默认值256）
    --ec-opt=OPT        选择回波抵消算法（0 =默认，1 = SPEEX，2 =抑制）
    --ilbc-mode=MODE    设置iLBC语音编解码器模式（20或30，默认是30）
    --capture-dev=id    音频捕获的设备ID（默认值= -1）
    --playback-dev=id   音频播放设备ID（默认值= -1）
    --capture-lat=N     音频捕获延迟（毫秒,默认值= 100）
    --playback-lat=N    音频播放延迟（毫秒,默认值= 100）
    --snd-auto-close=N  闲置N秒后自动关闭音频设备
                      指定n = -1（默认）禁用此功能。
                      指定即时关闭不使用时，N = 0。
    --no-tones          禁用听见音频
    --jb-max-size       指定最大值抖动缓冲(帧，默认= 1)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;媒体传输选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --use-ice           使用ICE（默认：不使用）
    --ice-no-host       禁用ICE主机候选（默认:no）
    --ice-no-rtcp       禁用RTCP组件（默认:no）
    --rtp-port=N        RTP尝试端口基数(默认4000)
    --rx-drop-pct=PCT   Drop PCT percent of RX RTP (for pkt lost sim, default: 0)
    --tx-drop-pct=PCT   Drop PCT percent of TX RTP (for pkt lost sim, default: 0)
    --use-turn          Enable TURN relay with ICE (default:no)
    --turn-srv          TURN服务器的域或主机名称
    --turn-tcp          使用TCP连接到TURN服务器（默认:no）
    --turn-user         TURN用户名
    --turn-passwd       TURN密码
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;好友名单（可以是多个）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --add-buddy url     添加指定的URL到好友列表中
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;用户代理选项：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    --auto-answer=code  自动接听来电的应答代码（如200）
    --max-calls=N       最大并发呼叫数（默认：4，最大：255）
    --thread-cnt=N      工作线程数目（默认：1）
    --duration=SEC      设置最大通话时间（默认是：没有限制）
    --norefersub        转接通话时禁止事件订阅
    --use-compact-form  最小的SIP消息大小
    --no-force-lr       允许使用严格路由
    --accept-redirect=N 指定如何处理呼叫重定向响应（3XX）。
                       0：拒绝，1：自动（默认），2：询问
&lt;/code&gt;&lt;/pre&gt;
">使用pjsip库-简介与实现语音和视频通话</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/shi-yong-pjsip-ku-hui-sheng-xiao-chu/"" data-c="
          &lt;p&gt;pjsip库内置了回声消除（Accoustic Echo Cancellation）的方法,参考&lt;a href=&#34;https://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__Echo__Cancel.htm&#34;&gt;这里&lt;/a&gt;获取API详细信息&lt;/p&gt;
&lt;h2 id=&#34;一-简述回声&#34;&gt;一、简述回声&lt;/h2&gt;
&lt;h3 id=&#34;21-简述&#34;&gt;2.1 简述&lt;/h3&gt;
&lt;p&gt;在电话环境中，当A和B正在通话中，A传给B的声音通过B的麦克风又传回给了A的扬声器，也就是说A说了一句话之后能在扬声器听到自己的声音，这就是回声。&lt;/p&gt;
&lt;h3 id=&#34;22-产生回声的条件&#34;&gt;2.2 产生回声的条件&lt;/h3&gt;
&lt;p&gt;回声的产生条件通常有两种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;声音信号从扬声器播放后又被麦克风捕获传递了回去&lt;/li&gt;
&lt;li&gt;通过发送线路传输的电信号被相邻的线路捕获（线路回波）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;23-处理回声的方法&#34;&gt;2.3 处理回声的方法&lt;/h3&gt;
&lt;p&gt;通用使用回声消除和回声抑制来解决回声&lt;/p&gt;
&lt;p&gt;**回声消除：**系统接收到传入的语音流后，会监视传出的语音流，如果在传出的语音流中检测到了传入语音流的副本，则会在返回流上通过数学减法来消除该副本的影响。&lt;/p&gt;
&lt;p&gt;**回声抑制：**系统在接收到传入语音流时将其他的流静音，这样就不会有语音流从接收者发送出去。&lt;/p&gt;
&lt;h2 id=&#34;二-pjsip内置的回声消除&#34;&gt;二、 pjsip内置的回声消除&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;pjmedia_echo_stat_default() // 初始化回声消除器统计
pjmedia_echo_create()       // 创建回声消除器
pjmedia_echo_create2()      // 创建回声消除器（多通道）
pjmedia_echo_destroy()      // 销毁回声消除器
pjmedia_echo_reset()        // 重置回声消除器
pjmedia_echo_get_stat()     // 获取回声消除器的统计信息
pjmedia_echo_playback()     // 通知回声消除器已经播放了一帧
pjmedia_echo_capture()      // 通知回声消除器已经捕获了一帧
pjmedia_echo_cancel()       // 回声消除器处理
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;需要快速启动内置的回声消除时，可以在pjsua_init()前修改media_cfg参数的ec_options选项即可，将该值设为PJMEDIA_ECHO_USE_SW_ECHO即可开启软件回声消除。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* 开启回声消除 */
app_config.media_cfg.ec_options |= PJMEDIA_ECHO_USE_SW_ECHO;
/* 初始化pjsua */
status = pjsua_init(&amp;amp;app_config.cfg, &amp;amp;app_config.log_cfg, &amp;amp;app_config.media_cfg);
&lt;/code&gt;&lt;/pre&gt;
">使用pjsip库-回声消除</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/chatgpt-shi-yong-ji-lu/"" data-c="
          &lt;h4 id=&#34;一-注册openai账号&#34;&gt;一、注册openai账号&lt;/h4&gt;
&lt;p&gt;所有chatgpt的操作都是需要一个openai账号，注册方法参考自&lt;a href=&#34;https://zblogs.top/how-to-register-openai-chatgpt-in-china/&#34;&gt;ChatGPT国内注册使用攻略&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;注册全称要保证有梯子，最好是美国节点&lt;/li&gt;
&lt;li&gt;openai的账号建议用谷歌账号注册&lt;/li&gt;
&lt;li&gt;国外手机验证码可以用&lt;a href=&#34;https://sms-activate.org/&#34;&gt;sms-activate&lt;/a&gt;获取&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;二-在openai提供界面上使用&#34;&gt;二、在openai提供界面上使用&lt;/h4&gt;
&lt;p&gt;点击&lt;a href=&#34;https://chat.openai.com/chat&#34;&gt;chat.openai.com/chat&lt;/a&gt;在openai提供的网页使用chatgpt&lt;/p&gt;
&lt;h4 id=&#34;三-使用python调用openai的api&#34;&gt;三、使用python调用openai的api&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;在&lt;a href=&#34;https://platform.openai.com/account/api-keys&#34;&gt;api-key&lt;/a&gt;界面创建密钥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;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&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;在&lt;a href=&#34;https://platform.openai.com/account/org-settings&#34;&gt;setting&lt;/a&gt;界面获取组织编号&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编写python脚本&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/env python
# -*- coding:utf-8 -*-

import os
import sys
import signal
import readline
import openai

os.environ[&amp;quot;HTTP_PROXY&amp;quot;] = &amp;quot;127.0.0.1:7890&amp;quot;
os.environ[&amp;quot;HTTPS_PROXY&amp;quot;] = &amp;quot;127.0.0.1:7890&amp;quot;

def exit_handler(signum, frame):
    print(&amp;quot;\r\n&amp;quot;)
    sys.exit(0)

def ask_gpt(prompt, model, temperature=0.5, max_tokens=100):
    response = openai.ChatCompletion.create(
        model=model,
        messages = [
            {&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;你会将回答结果按中英文混合的格式输出&#39;},
            {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: prompt}
        ],
        max_tokens=max_tokens,
        temperature=temperature,
        n = 1,
        stop=None
    )

    return response[&#39;choices&#39;][0][&#39;message&#39;][&#39;content&#39;]

class ChatGPT:
    def __init__(self):
        signal.signal(signal.SIGINT, exit_handler)
        openai.api_key = os.getenv(&#39;OPENAI_API_KEY&#39;)
        if not openai.api_key:
            print(&amp;quot;Please set your OPENAI_API_KEY environment variable.&amp;quot;)
            sys.exit(1)
        self.messages = [{&amp;quot;role&amp;quot;: &amp;quot;system&amp;quot;, &amp;quot;content&amp;quot;: &amp;quot;能够把回答同时翻译成中文和英文&amp;quot;}]

    def ask_gpt(self):
        response = openai.ChatCompletion.create(
            model=&#39;gpt-3.5-turbo&#39;,
            messages = self.messages,
            max_tokens=1024,
            temperature=0.5,
            n = 1,
            stop=None
        )
        return response[&#39;choices&#39;][0][&#39;message&#39;][&#39;content&#39;]
    
def main():
    chat = ChatGPT()
    while True:
        prompt = input(&amp;quot;&amp;gt; &amp;quot;)
        if prompt:
            print(&amp;quot;...&amp;quot;)
            chat.messages.append({&amp;quot;role&amp;quot;: &amp;quot;user&amp;quot;, &amp;quot;content&amp;quot;: prompt})
            response = chat.ask_gpt()
            print(response)

if __name__ == &amp;quot;__main__&amp;quot;:
    main()
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
">chatgpt使用记录</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/kuai-su-fu-li-xie-bian-huan-ku-fftw-ku/"" data-c="
          &lt;p&gt;&lt;a href=&#34;http://www.fftw.org/download.html&#34;&gt;FFTW官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/0d606acf97a0&#34;&gt;FFT的计算—（使用FFTW库）&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 编译安装到系统
./configure
make
make install

# 编译安装到指定目录
./configure --prefix=$PWD/install
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对比python的fft结果测试：&lt;/p&gt;
&lt;p&gt;fftw库：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void main_init(int *argc, char ***argv)
{
    int N = 32;
    fftw_complex *in, *out;
    fftw_plan p;
    
    in = (fftw_complex*)fftw_malloc(sizeof(fftw_complex) * N);
    out = (fftw_complex*)fftw_malloc(sizeof(fftw_complex) * N);

    for (int i = 0; i &amp;lt; N; i++)
    {
        in[i][0] = i;
        in[i][1] = 0;
    }

    p = fftw_plan_dft_1d(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);
    
    fftw_execute(p); /* repeat as needed */

    for (int i = 0; i &amp;lt; N; i++)
    {
		printf(&amp;quot;%f %f\r\n&amp;quot;, out[i][0], out[i][1]);
    }
    
    fftw_destroy_plan(p);
    fftw_free(in); 
    fftw_free(out);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;结果：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;496.000000 0.000000&lt;br&gt;
-16.000000 162.450726&lt;br&gt;
-16.000000 80.437432&lt;br&gt;
-16.000000 52.744931&lt;br&gt;
-16.000000 38.627417&lt;br&gt;
-16.000000 29.933895&lt;br&gt;
-16.000000 23.945692&lt;br&gt;
-16.000000 19.496056&lt;br&gt;
-16.000000 16.000000&lt;br&gt;
-16.000000 13.130861&lt;br&gt;
-16.000000 10.690858&lt;br&gt;
-16.000000 8.552178&lt;br&gt;
-16.000000 6.627417&lt;br&gt;
-16.000000 4.853547&lt;br&gt;
-16.000000 3.182598&lt;br&gt;
-16.000000 1.575862&lt;br&gt;
-16.000000 0.000000&lt;br&gt;
-16.000000 -1.575862&lt;br&gt;
-16.000000 -3.182598&lt;br&gt;
-16.000000 -4.853547&lt;br&gt;
-16.000000 -6.627417&lt;br&gt;
-16.000000 -8.552178&lt;br&gt;
-16.000000 -10.690858&lt;br&gt;
-16.000000 -13.130861&lt;br&gt;
-16.000000 -16.000000&lt;br&gt;
-16.000000 -19.496056&lt;br&gt;
-16.000000 -23.945692&lt;br&gt;
-16.000000 -29.933895&lt;br&gt;
-16.000000 -38.627417&lt;br&gt;
-16.000000 -52.744931&lt;br&gt;
-16.000000 -80.437432&lt;br&gt;
-16.000000 -162.450726&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;python:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import scipy.fftpack as fftpack
import numpy as np

x = np.arange(0, 32)

y = fftpack.fft(x, 32)    # fft方法1
# y = np.fft.rfft(x, 32)      # fft方法2

y_real = np.real(y)         # 输出实部
y_imag = np.imag(y)         # 输出虚部

print(&amp;quot;input&amp;quot;, x, &amp;quot;\r\n&amp;quot;)

for i in range(32):
    print(y_real[i], &amp;quot; &amp;quot;, y_imag[i])
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;结果:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;496.0   -0.0&lt;br&gt;
-15.999999999999998   162.45072620174176&lt;br&gt;
-16.0   80.43743187401355&lt;br&gt;
-16.000000000000004   52.74493134301312&lt;br&gt;
-15.999999999999998   38.62741699796952&lt;br&gt;
-16.0   29.93389458863023&lt;br&gt;
-16.0   23.945692202647827&lt;br&gt;
-15.999999999999995   19.496056409407622&lt;br&gt;
-16.0   16.0&lt;br&gt;
-16.000000000000004   13.130860653258559&lt;br&gt;
-16.0   10.690858206708782&lt;br&gt;
-16.0   8.552178175212667&lt;br&gt;
-16.0   6.627416997969519&lt;br&gt;
-15.999999999999996   4.8535469377174785&lt;br&gt;
-16.0   3.1825978780745245&lt;br&gt;
-15.999999999999998   1.5758624537146204&lt;br&gt;
-16.0   -0.0&lt;br&gt;
-15.999999999999998   -1.5758624537146204&lt;br&gt;
-16.0   -3.1825978780745245&lt;br&gt;
-15.999999999999996   -4.8535469377174785&lt;br&gt;
-16.0   -6.627416997969519&lt;br&gt;
-16.0   -8.552178175212667&lt;br&gt;
-16.0   -10.690858206708782&lt;br&gt;
-16.000000000000004   -13.130860653258559&lt;br&gt;
-16.0   -16.0&lt;br&gt;
-15.999999999999995   -19.496056409407622&lt;br&gt;
-16.0   -23.945692202647827&lt;br&gt;
-16.0   -29.93389458863023&lt;br&gt;
-15.999999999999998   -38.62741699796952&lt;br&gt;
-16.000000000000004   -52.74493134301312&lt;br&gt;
-16.0   -80.43743187401355&lt;br&gt;
-15.999999999999998   -162.45072620174176&lt;/p&gt;
&lt;/blockquote&gt;
">快速傅里叶变换库（FFTW库）</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/shi-xian-hong-ping-wu-dian-xiao-zhun/"" data-c="
          &lt;p&gt;触屏校准考虑到了共3类情况：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;触屏与显示屏有平移&lt;/li&gt;
&lt;li&gt;触屏与显示屏有旋转&lt;/li&gt;
&lt;li&gt;触屏与显示屏长宽的大小和比例不一致&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;根据上面三种情况分类讨论，并计算3类情况的误差，将误差修正的公式相加得到以下公式:&lt;br&gt;
&lt;code&gt;X = αx·X&#39; + βx·Y&#39; + ΔX&lt;/code&gt;&lt;br&gt;
&lt;code&gt;Y = αy·X&#39; + βy·Y&#39; + ΔY&lt;/code&gt;&lt;br&gt;
简化公式(简化只是方便后面推理，更详细的内容参考&lt;a href=&#34;https://blog.csdn.net/witnessiz/article/details/104741588?spm=1001.2101.3001.6650.4&amp;amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-4.no_search_link&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-4.no_search_link&#34;&gt;这里&lt;/a&gt;)：&lt;br&gt;
&lt;code&gt;X = AX&#39; + BY&#39; + C&lt;/code&gt;&lt;br&gt;
&lt;code&gt;Y = DX&#39; + EY&#39; + F&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;根据上面的公式中，X、Y表示显示屏的坐标，X&#39;、Y&#39;表示触屏的坐标，也就是说只要求得了A、B、C、D、E、F参数的值，便可以实现触屏校准。&lt;/p&gt;
&lt;p&gt;下面tslib库的函数，可以用这个函数来计算上面公式的6个参数：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;typedef struct {
	int x[5], xfb[5];
	int y[5], yfb[5];
	int a[7];
}calibration_t;

/**
 * @brief 计算触屏校准参数 
 * @details 五点触摸校准，X,Y表示LCD坐标，X&#39;,Y&#39;表示触屏坐标
 *          校准公式：
 *              X = αx * X&#39; + βx * Y&#39; + ΔX
 *              Y = αy * X&#39; + βy * Y&#39; + ΔY
 * @param [in/out]  cal     输入五个点的坐标，并输出校准公式的6个参数
 *                          cal.x[]保存五个触摸点的x坐标
 *                          cal.y[]保存五个触摸点的y坐标
 *                          cal.a[]保存计算后的校准参数，依次代表:ΔX αx βx ΔY αy βy scaling
 *                          注意：scaling固定为65536
 **/
static int perform_calibration(calibration_t *cal)
{
	int j;
	float n, x, y, x2, y2, xy, z, zx, zy;
	float det, a, b, c, e, f, i;
	float scaling = 65536.0;

	/* Get sums for matrix */
	n = x = y = x2 = y2 = xy = 0;
	for (j = 0; j &amp;lt; 5; j++) {
		n += 1.0;
		x += (float)cal-&amp;gt;x[j];
		y += (float)cal-&amp;gt;y[j];
		x2 += (float)(cal-&amp;gt;x[j]*cal-&amp;gt;x[j]);
		y2 += (float)(cal-&amp;gt;y[j]*cal-&amp;gt;y[j]);
		xy += (float)(cal-&amp;gt;x[j]*cal-&amp;gt;y[j]);
	}

	/* Get determinant of matrix -- check if determinant is too small */
	det = n*(x2*y2 - xy*xy) + x*(xy*y - x*y2) + y*(x*xy - y*x2);
	if (det &amp;lt; 0.1 &amp;amp;&amp;amp; det &amp;gt; -0.1) {
		printf(&amp;quot;ts_calibrate: determinant is too small -- %f\n&amp;quot;, det);
		return 0;
	}

	/* Get elements of inverse matrix */
	a = (x2*y2 - xy*xy)/det;
	b = (xy*y - x*y2)/det;
	c = (x*xy - y*x2)/det;
	e = (n*y2 - y*y)/det;
	f = (x*y - n*xy)/det;
	i = (n*x2 - x*x)/det;

	/* Get sums for x calibration */
	z = zx = zy = 0;
	for (j = 0; j &amp;lt; 5; j++) {
		z += (float)cal-&amp;gt;xfb[j];
		zx += (float)(cal-&amp;gt;xfb[j]*cal-&amp;gt;x[j]);
		zy += (float)(cal-&amp;gt;xfb[j]*cal-&amp;gt;y[j]);
	}

	/* Now multiply out to get the calibration for framebuffer x coord */
	cal-&amp;gt;a[0] = (int)((a*z + b*zx + c*zy)*(scaling));
	cal-&amp;gt;a[1] = (int)((b*z + e*zx + f*zy)*(scaling));
	cal-&amp;gt;a[2] = (int)((c*z + f*zx + i*zy)*(scaling));

	printf(&amp;quot;%f %f %f\n&amp;quot;, (a*z + b*zx + c*zy),
			     (b*z + e*zx + f*zy),
			     (c*z + f*zx + i*zy));

	/* Get sums for y calibration */
	z = zx = zy = 0;
	for (j = 0; j &amp;lt; 5; j++) {
		z += (float)cal-&amp;gt;yfb[j];
		zx += (float)(cal-&amp;gt;yfb[j]*cal-&amp;gt;x[j]);
		zy += (float)(cal-&amp;gt;yfb[j]*cal-&amp;gt;y[j]);
	}

	/* Now multiply out to get the calibration for framebuffer y coord */
	cal-&amp;gt;a[3] = (int)((a*z + b*zx + c*zy)*(scaling));
	cal-&amp;gt;a[4] = (int)((b*z + e*zx + f*zy)*(scaling));
	cal-&amp;gt;a[5] = (int)((c*z + f*zx + i*zy)*(scaling));

	printf(&amp;quot;%f %f %f\n&amp;quot;, (a*z + b*zx + c*zy),
			     (b*z + e*zx + f*zy),
			     (c*z + f*zx + i*zy));

	/* If we got here, we&#39;re OK, so assign scaling to a[6] and return */
	cal-&amp;gt;a[6] = (int)scaling;

	return 1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用方法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/** 声明一个变量来保存校验参数 */
calibration_t cal;

/** 获取五个点的显示屏坐标和对应的触摸屏坐标。下面示例分别在显示屏的左上、右上、右下、左下和中间设置了一个触点，并通过get_sample读取用户触摸触点时返回的显示屏坐标和触屏坐标，依次将读取的数据保存到cal变量中，显示屏坐标保存在cal.xfb[]和cal.yfb[]中，触屏坐标保存在cal.x[]和cal.y[]中 */
get_sample(&amp;amp;cal, 0, 50,        50,        &amp;quot;Top left&amp;quot;);
get_sample(&amp;amp;cal, 1, xres - 50, 50,        &amp;quot;Top right&amp;quot;);
get_sample(&amp;amp;cal, 2, xres - 50, yres - 50, &amp;quot;Bot right&amp;quot;);
get_sample(&amp;amp;cal, 3, 50,        yres - 50, &amp;quot;Bot left&amp;quot;);
get_sample(&amp;amp;cal, 4, xres / 2,  yres / 2,  &amp;quot;Center&amp;quot;);

/** 计算校准参数 */
perform_calibration(&amp;amp;cal);      // 返回1代表计算成功

/** 打印校准参数，cal.a数组中保存了计算的参数值 */
printf(&amp;quot;C:%d A:%d B:%d F:%d D:%d E:%d scaling:%d\n&amp;quot;, cal.a[0], cal.a[1], cal.a[2], cal.a[3], cal.a[4], cal.a[5], cal.a[6]);

/** 将校准参数带入公式，通过触屏坐标来计算显示屏坐标 */
int x0 = 100, y0 = 200; // 假设触屏坐标为(x0, y0)     
int x, y;               // 假设显示屏坐标为(x, y)
x = cal.a[1] * x0 + cal.a[2] * y0 + cal.a[0] &amp;gt;&amp;gt; 16;
y = cal.a[4] * x0 + cal.a[5] * y0 + cal.a[3] &amp;gt;&amp;gt; 16;

/** 得到坐标(x,y),完成 */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;参考资料：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/witnessiz/article/details/104741588?spm=1001.2101.3001.6650.4&amp;amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-4.no_search_link&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-4.no_search_link&#34;&gt;Tslib的触摸屏5点校准算法原理和实现&lt;/a&gt;&lt;/p&gt;
">实现触屏五点校准</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/qia-er-man-lu-bo-suan-fa-ying-yong/"" data-c="
          &lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/lihuibao/article/details/80784504?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1.nolandingword2&amp;amp;spm=1001.2101.3001.4242&#34;&gt;参考资料&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-需要提前了解些基础&#34;&gt;一、需要提前了解些基础&lt;/h2&gt;
&lt;h4 id=&#34;11-方差&#34;&gt;1.1 方差&lt;/h4&gt;
&lt;p&gt;方差是指一些随机变量与其均值的偏离程度。也可以说用来衡量一组变量相对于期望值（一般用平均值来表示期望值）的偏离程度。&lt;br&gt;
如果一组变量用X表示，则期望值(平均值)为：&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;E(X)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05764em;&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;,各数据于均值的差的平方为：&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;msup&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;[X-E(X)]^2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.064108em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05764em;&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8141079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;,最后对平方和求期望得到&lt;strong&gt;方差公式&lt;/strong&gt;：$$\sigma_x^2 = \frac{1}{n-1}\Sigma(x_i - \overline x)^2$$&lt;/p&gt;
&lt;h4 id=&#34;12-协方差&#34;&gt;1.2 协方差&lt;/h4&gt;
&lt;p&gt;协方差用来描述两个变量间的变化关系。如果有X,Y两个变量，每个时刻的“X值与其均值之差”乘以“Y值与其均值之差”得到一个乘积，再对这每时刻的乘积求和并求出均值，公式为：$$\sigma(x,y)=\frac{1}{n-1}\Sigma(x_i-\overline x)(y_i-\overline y)$$&lt;/p&gt;
&lt;h4 id=&#34;13-高斯分布&#34;&gt;1.3 高斯分布&lt;/h4&gt;
&lt;p&gt;高斯分布又称正态分布，是基于推论，基于统计学，又基于经验的一个公式,对于符合高斯分布的曲线，只需要更改公式的参数即可预测统计事件的分布情况。公式为：$$f(x) = \frac{1}{\sqrt{2\pi}\sigma}exp(-\frac{(x-\mu)&lt;sup&gt;2}{2\sigma&lt;/sup&gt;2}) $$&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如何判断曲线是否符合高斯分布？简单粗略的几个方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;画出数据的直方图，如果数据是中间高、两边低的趋势，那么可以认为是近似服从正态分布&lt;/li&gt;
&lt;li&gt;使用Q-Q图，如果Q-Q图的数据点近似分布在一条直线附近，那么可以认为是近似服从正态分布&lt;/li&gt;
&lt;li&gt;量化检测(&lt;a href=&#34;https://www.zhihu.com/question/62777236&#34;&gt;方法参考&lt;/a&gt;)&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;14-协方差矩阵&#34;&gt;1.4 协方差矩阵&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://www.datalearner.com/blog/1051485590815771&#34;&gt;参考1&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://zhuanlan.zhihu.com/p/37609917&#34;&gt;参考2&lt;/a&gt;&lt;br&gt;
对于多个变量来说，协方差矩阵是一个用来表达变量关系的方式。通常使用&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\Sigma&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.68333em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;表示协方差矩阵，它是&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;n \times n&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.66666em;vertical-align:-0.08333em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;×&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.43056em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;的矩阵，第&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;(i,j)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;位置表示&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;cov[X_i,X_j]&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.036108em;vertical-align:-0.286108em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.311664em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;。协方差矩阵定义：$$cov[X,Y]=E[(X-E(X))(Y-E(Y))]=E(XY)-E(X)E(Y)$$&lt;/p&gt;
&lt;p&gt;协方差矩阵是由协方差组成的矩阵，表示为：&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi&gt;σ&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mo&gt;⋯&lt;/mo&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi&gt;σ&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;⋮&lt;/mi&gt;&lt;mrow&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mo&gt;⋱&lt;/mo&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;⋮&lt;/mi&gt;&lt;mrow&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi&gt;σ&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mo&gt;⋯&lt;/mo&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi&gt;σ&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\left[\begin {matrix} 
\sigma(x_1,x_1) &amp;amp; \cdots &amp;amp; \sigma(x_1,x_j) \\
\vdots &amp;amp; \ddots &amp;amp; \vdots \\
\sigma(x_i,x_1) &amp;amp; \cdots &amp;amp; \sigma(x_i,x_j) \\
\end {matrix}\right]
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:4.260000000000001em;vertical-align:-1.8800000000000006em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen&#34;&gt;&lt;span class=&#34;delimsizing mult&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.351015em;&#34;&gt;&lt;span style=&#34;top:-1.9499950000000004em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.104995em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎢&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-4.351015em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎡&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.850025em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.3800000000000003em;&#34;&gt;&lt;span style=&#34;top:-5.2275em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;σ&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.3674999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;⋮&lt;/span&gt;&lt;span class=&#34;mord rule&#34; style=&#34;border-right-width:0em;border-top-width:1.5em;bottom:0em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.1674999999999995em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;σ&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.8800000000000006em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.3800000000000003em;&#34;&gt;&lt;span style=&#34;top:-5.04em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;minner&#34;&gt;⋯&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.1799999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;minner&#34;&gt;⋱&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.9799999999999995em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;minner&#34;&gt;⋯&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.8800000000000006em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.3800000000000003em;&#34;&gt;&lt;span style=&#34;top:-5.2275em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;σ&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.311664em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.3674999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;⋮&lt;/span&gt;&lt;span class=&#34;mord rule&#34; style=&#34;border-right-width:0em;border-top-width:1.5em;bottom:0em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.1674999999999995em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.6875em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;σ&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.311664em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.8800000000000006em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;&lt;span class=&#34;delimsizing mult&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.351015em;&#34;&gt;&lt;span style=&#34;top:-1.9499950000000004em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎦&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.104995em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎥&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-4.351015em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.1550000000000002em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size4&#34;&gt;&lt;span&gt;⎤&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.850025em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;协方差矩阵的数据都出自同一组数据集，因此&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;i=j&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.65952em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.85396em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;,可以看到在对角线上的元素为随机变量的方差，非对角线（对角线以外）的元素为两两随机变量的协方差。&lt;/p&gt;
&lt;h4 id=&#34;15-多元高斯分布&#34;&gt;1.5 多元高斯分布&lt;/h4&gt;
&lt;p&gt;没看懂，待看&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;扩展：&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;标准差(均方差)&lt;br&gt;
标准差又称均方差，是方差的平方根，即：$$\sqrt[2]{\frac{1}{n-1}\Sigma(x_i - \overline x)^2}$$&lt;/li&gt;
&lt;li&gt;均方误差&lt;br&gt;
均方误差是各数据偏离真实值的差值的平方和的平均数。例如检测结果的数据集为X，真实数据集为Y，则均方误差为：&amp;gt; $$\sqrt{\Sigma[(X-Y)^2]}$$&lt;/li&gt;
&lt;li&gt;均方误差根&lt;br&gt;
均方误差根就是均方误差的二次开方&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;二-卡尔曼滤波&#34;&gt;二、卡尔曼滤波&lt;/h2&gt;
&lt;p&gt;总结：&lt;br&gt;
step1:找到多个符合高斯分布的随机变量（例子为位置&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;p&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;和速度&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;v&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.43056em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;），每个变量都有一个均值&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;η&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\eta&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;η&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;表示最可能的状态，和方差&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mi&gt;σ&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\sigma^2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8141079999999999em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8141079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;表示不确定性。这里用&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\vec x&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.714em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.20772em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;来表示&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;p&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;和&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;v&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.43056em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;:&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\vec x = \left[\begin{matrix}
    p\\
    v
\end{matrix}\right]
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.714em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.20772em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;step2:使用矩阵来描述问题：1.使用矩阵表示k时刻的最佳估计&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat x_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;（即均值，其他地方用&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;η&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\eta&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;η&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;表示）2.使用协方差矩阵&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;P_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;表示变量的相关性&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat x_k = \left[ \begin{matrix}
\hat p\\
\hat v\\
\end{matrix} \right]
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.16666em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.19444em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;P_k = \left[ \begin{matrix}
\Sigma_{pp} &amp;amp; \Sigma_{pv}\\
\Sigma_{vp} &amp;amp; \Sigma_{vv}
\end{matrix} \right]
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15139200000000003em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15139200000000003em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15139200000000003em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.151392em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;step3:制作预测矩阵。根据实际规律来制作预测矩阵&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;F_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;:（示例会用基本的运动学公式来实现）&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;p_k = p_{k-1} + \Delta tv_{k-1} \\
v_k = v_{k-1} 
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.791661em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.891661em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.638891em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;换成矩阵表示：&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat{x}_k = \left[ \begin{matrix}
\hat p\\
\hat v\\
\end{matrix} \right] = \left[ \begin{matrix}
1 &amp;amp; \Delta t \\
0 &amp;amp; 1
\end{matrix} \right] \left[ \begin{matrix}
\hat p_{k-1}\\
\hat v_{k-1}\\
\end{matrix} \right] = \left[ \begin{matrix}
1 &amp;amp; \Delta t \\
0 &amp;amp; 1
\end{matrix} \right] \hat x_{k-1}
= F_k \hat x_{k-1}
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.16666em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.19444em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.16666em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.19444em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.40003em;vertical-align:-0.95003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.45em;&#34;&gt;&lt;span style=&#34;top:-3.61em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.4099999999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9500000000000004em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.902771em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;注意：示例中还没有引入加速度，所以速度保持不变&lt;/p&gt;
&lt;p&gt;step4:更新协方差矩阵。&lt;/p&gt;
&lt;p&gt;step5:添加外部控制量，制作控制矩阵&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;B_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05017em;&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;和控制向量&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\vec{u_k}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.864em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.2355em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;。由于运动时速度可能会改变，所以添加变量加速度a&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;p_k = p_{k-1} + \Delta{v_{k-1}} + \frac{1}{2}a\Delta t^2\\
v_k = v_{k-1} + a\Delta t
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.791661em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.891661em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.00744em;vertical-align:-0.686em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.32144em;&#34;&gt;&lt;span style=&#34;top:-2.314em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.677em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.686em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8641079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.791661em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.68333em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;换成矩阵表示：&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;[&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Δ&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat{x_k} = F_k \hat{x}_{k-1} + \left[ \begin{matrix}
\frac{\Delta t^2}{2} \\
\Delta t\\
\end{matrix} \right] a \\= F_k \hat{x_{k-1}} + B_k \hat{u_k}
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.902771em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.5779200000000007em;vertical-align:-1.0389600000000005em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.53896em;&#34;&gt;&lt;span style=&#34;top:-3.5389600000000003em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.01792em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.01792em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8913142857142857em;&#34;&gt;&lt;span style=&#34;top:-2.931em;margin-right:0.07142857142857144em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size3 size1 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.3389599999999997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.01792em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Δ&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.0389600000000005em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose delimcenter&#34; style=&#34;top:0em;&#34;&gt;&lt;span class=&#34;delimsizing size3&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.36687em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.902771em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05017em;&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;step6：添加噪声协方差&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;Q_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8777699999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;Q&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;。&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;Q_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8777699999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;Q&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;是新产生的高斯分布得到的协方差，用来作为噪声预测&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mtable side=&#34;right&#34;&gt;&lt;mlabeledtr&gt;&lt;mtd&gt;&lt;mtext&gt;(6)&lt;/mtext&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;msubsup&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msubsup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mlabeledtr&gt;&lt;/mtable&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat{x}_k = F_k \hat{x}_{k-1} + B_k \hat{u}_k\\
P_k = F_kP_{k-1}F_k^T + Q_k       \tag{6}
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.902771em;vertical-align:-0.208331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05017em;&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;u&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.138331em;vertical-align:-0.247em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8913309999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.13889em;&#34;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.247em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8777699999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;Q&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;tag&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.1413309999999999em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord text&#34;&gt;&lt;span class=&#34;mord&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;6&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;step7: 制作测量矩阵&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;H_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;。用测量值来修正估计值&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;η&lt;/mi&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;mrow&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msub&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;Σ&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msubsup&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msubsup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\vec \eta_{expected} = H_k \hat x_k\\
\Sigma_{expected} = H_kP_kH_l^T
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.000108em;vertical-align:-0.286108em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;η&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.17994em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.19444em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.969438em;vertical-align:-0.286108em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;Σ&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3361079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.286108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.138331em;vertical-align:-0.247em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8913309999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4530000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.01968em;&#34;&gt;l&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.13889em;&#34;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.247em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;step8: 获取传感器噪声矩阵&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;R_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;和传感器数据&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\vec z_k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.864em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.04398em;&#34;&gt;z&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.17994em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;。&lt;br&gt;
step9: 将传感器的实际值与通过前一状态得到的预估值的高斯分布相乘，得到的结果就是当前时刻的预测值。&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mtable side=&#34;right&#34;&gt;&lt;mlabeledtr&gt;&lt;mtd&gt;&lt;mtext&gt;(18)&lt;/mtext&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;/msup&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;K&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;’&lt;/mi&gt;&lt;/msup&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;⃗&lt;/mo&gt;&lt;/mover&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msubsup&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;/msubsup&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;K&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;’&lt;/mi&gt;&lt;/msup&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mspace linebreak=&#34;newline&#34;&gt;&lt;/mspace&gt;&lt;msup&gt;&lt;mi&gt;K&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;’&lt;/mi&gt;&lt;/msup&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msubsup&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msubsup&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msubsup&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/msubsup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;msup&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mlabeledtr&gt;&lt;/mtable&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat{x_k}^, =  \hat{x_k} + K^’(\vec{z_k} - H_k\hat{x}_k)  \\
P_k^, = P_k - K^’H_k P_k \\
K^’ = P_k H_k^T(H_kP_kH_k^T + R_k)^{-1}\tag{18}
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.5212319999999999em;&#34;&gt;&lt;span style=&#34;top:-3.1473400000000002em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mpunct mtight&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.149108em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07153em;&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8991079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;’&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.714em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.04398em;&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.2355em;&#34;&gt;&lt;span class=&#34;overlay&#34; style=&#34;height:0.714em;width:0.471em;&#34;&gt;&lt;svg width=&#39;0.471em&#39; height=&#39;0.714em&#39; style=&#39;width:0.471em&#39; viewBox=&#39;0 0 471 714&#39; preserveAspectRatio=&#39;xMinYMin&#39;&gt;&lt;path d=&#39;M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.22222em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.9846379999999999em;vertical-align:-0.3013079999999999em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.5547999999999998em;&#34;&gt;&lt;span style=&#34;top:-2.3986920000000005em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.180908em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mpunct mtight&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.3013079999999999em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.049108em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07153em;&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8991079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;’&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace newline&#34;&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8991079999999999em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.07153em;&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8991079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;’&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.1413309999999999em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8913309999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4530000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.13889em;&#34;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.247em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8913309999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4530000000000003em;margin-left:-0.08125em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.13889em;&#34;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.247em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.1141079999999999em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.864108em;&#34;&gt;&lt;span style=&#34;top:-3.113em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;−&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;tag&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.2004159999999997em;vertical-align:-0.3013079999999999em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord text&#34;&gt;&lt;span class=&#34;mord&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;根据公式6和公式18即可获取最优估计值&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mover accent=&#34;true&#34;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;^&lt;/mo&gt;&lt;/mover&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\hat{x_k}^,&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.84444em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord accent&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.69444em;&#34;&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.33610799999999996em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;accent-body&#34; style=&#34;left:-0.25em;&#34;&gt;^&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.5212319999999999em;&#34;&gt;&lt;span style=&#34;top:-3.1473400000000002em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mpunct mtight&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;，随后可以将它和&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msubsup&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;’&lt;/mi&gt;&lt;/msubsup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;P_k^’&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.132216em;vertical-align:-0.2831079999999999em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.849108em;&#34;&gt;&lt;span style=&#34;top:-2.4168920000000003em;margin-left:-0.13889em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;’&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.2831079999999999em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;放到下一个预测和更新方程中不断迭代。&lt;/p&gt;
">卡尔曼滤波算法应用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/da-jian-zellijalacritty-zhong-duan-huan-jing/"" data-c="
          &lt;h2 id=&#34;一-下载alacritty和zellij&#34;&gt;一、下载alacritty和zellij&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载rust工具包(如果不用cargo安装alacritty和zellij，则可以不用下载)
curl --proto &#39;=https&#39; --tlsv1.3 https://sh.rustup.rs -sSf | sh

# 安装依赖
sudo apt install make build-essential cmake libxcb1-dev

# 通过cargo安装alacritty和zellij（注：安装后默认路径为~/.cargo/bin）
cargo install alacritty
cargo install zellij

# 通过github的release版本下载
# 自行github搜索
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-配置alacritty&#34;&gt;二、配置alacritty&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;将alacritty设置为默认终端&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 查看alacritty的执行文件路径
whereis alacritty
# 将alacritty创建终端符号链接
sudo update-alternatives --install /usr/bin/x-terminal-emulator x-terminal-emulator ~/.cargo/bin/alacritty 1
# 选择要使用的默认终端编号
sudo update-alternatives --config x-terminal-emulator
# 删除终端符号
sudo update-alternatives --remove x-terminal-emulator ~/.cargo/bin/alacritty
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;为alacritty添加配置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;创建alacritty配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;vim ~/.config/alacritty/alacritty.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;alacritty.yml配置内容&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# Configuration for Alacritty, the GPU enhanced terminal emulator.

# 导入额外的配置文件
#
# 按照列表顺序进行加载，如果文件不存在，那么会跳过。如果和先前导入的配置存在相同的字段，那么会被替换。
# 所有的 import 路径要么使用以 `/` 开头的绝对路径，要么以用户的 HOME 目录开头 `~/`
# import:
#  - /path/to/alacritty.yml

# `env` 下的所有键值对将会被添加为环境变量
env:  
  # TERM variable
  #
  # This value is used to set the `$TERM` environment variable for
  # each instance of Alacritty. If it is not present, alacritty will
  # check the local terminfo database and use `alacritty` if it is
  # available, otherwise `xterm-256color` is used.
  TERM: xterm-256color

window:  
  # 窗口尺寸大小（配置变更需要重启生效）
  #
  # 终端显示的列和行的数量。列的数量至少是 2，如果设置为 0 那么会使用窗口管理器决定的大小。
  dimensions:
    columns: 80
    lines: 30

  # 窗口位置（配置变更需要重启生效）
  #
  # 单位是像素。如果不进行设置，那么由窗口管理器决定位置
  position:
   x: 300
   y: 300

  # 窗口内边距（配置变更需要重启生效）
  #
  # 调整窗口的内边距（单位为像素）。此填充由DPI缩放，并且始终在相对的两边添加指定的值。
  # 注解：内边距是窗口边框相对于终端显示内容的空白部分，可以参考 CSS
  padding:
   x: 5
   y: 5

  # 在终端内容周围平均分配额外的 padding。 
  dynamic_padding: true

  # 窗口的外边框
  #
  # 可以为如下的值:
  #     - full: 边框和标题栏
  #     - none: 边框和标题栏都没有
  #
  # macos 可以独占的配置:
  #     - transparent: 标题栏，透明背景和标题栏按钮
  #     - buttonless: 标题栏，透明背景，但没有标题栏按钮 
  decorations: full

  # 启动模式（配置变更需要重启生效）
  #
  # 可以为如下的值:
  #   - Windowed: 窗口化
  #   - Maximized: 最大化窗口
  #   - Fullscreen: 全屏
  #
  # macos 可以独占的配置:
  #   - SimpleFullscreen
  # startup_mode: SimpleFullscreen
  startup_mode: Windowed

  # 窗口标题
  title: Alacritty

  # 是否允许终端的应用更改窗口标题
  dynamic_title: true

  # Window class (Linux/BSD only):
  # class:
    # Application instance name
    # instance: Alacritty
    # General application class
    # general: Alacritty

  # GTK theme variant (Linux/BSD only)
  #
  # Override the variant of the GTK theme. Commonly supported values are `dark`
  # and `light`. Set this to `None` to use the default theme variant.
  # gtk_theme_variant: None

scrolling:  
  # 回滚缓冲区中的最大行数。 设置为 0 会禁用滚动
  history: 10000

  # 一次滚动几行
  multiplier: 3


# 字体配置
font:  
  # 常规字体
  normal:
    # family: Hack
    # family: &amp;quot;Sarasa Mono SC&amp;quot;
    # family: &amp;quot;Fira Code&amp;quot;  #目前的版本不支持连字
    # 字体风格
    style: Regular

  # 粗体
  # bold:
  #   family: &amp;quot;Fira Code&amp;quot;
  #   style: Bold

  # 斜体
  # italic:
  #   family: Hack
  #   style: Italic

  # 斜粗体
  # bold_italic:
    # family: monospace
    # style: Bold Italic

  # 字体大小
  size: 11

  # 每个字符的间的字间距。&amp;quot;offset.y&amp;quot; 可以控制行距，&amp;quot;offset.x&amp;quot; 可以改变字符间距。
  offset:
    x: 0
    y: 0

  # Glyph offset determines the locations of the glyphs within their cells with
  # the default being at the bottom. Increasing `x` moves the glyph to the
  # right, increasing `y` moves the glyph upward.
  # glyph_offset:
  #  x: 0
  #  y: 0

  # 细线字体渲染（仅适用于macOS）
  #
  # retina 可以设置为 true，非 retina 屏幕建议设置为 false
  # use_thin_strokes: true # 新版已移除

# If `true`, bold text is drawn using the bright color variants.
draw_bold_text_with_bright_colors: false


# 颜色配置，建议不要自己折腾，直接 https://github.com/eendroroy/alacritty-theme

colors:
  primary:
    background: &#39;0x000000&#39;
    foreground: &#39;0xFFFFFF&#39;

  normal:
    black:   &#39;0x1F2229&#39;
    red:     &#39;0xEC0101&#39;
    green:   &#39;0x47D4B9&#39;
    yellow:  &#39;0xFF8A18&#39;
    blue:    &#39;0x277FFF&#39;
    magenta: &#39;0xD71655&#39;
    cyan:    &#39;0x05A1F7&#39;
    white:   &#39;0xFFFFFF&#39;


  bright:
    black:   &#39;0x1F2229&#39;
    red:     &#39;0xD41919&#39;
    green:   &#39;0x5EBDAB&#39;
    yellow:  &#39;0xFEA44C&#39;
    blue:    &#39;0x367bf0&#39;
    magenta: &#39;0xBF2E5D&#39;
    cyan:    &#39;0x49AEE6&#39;
    white:   &#39;0xFFFFFF&#39;

# 终端响铃
#
# 配置接收到 BEL 控制字符后的
# 每当接收到BEL控制字符时，钟就会响起。
# bell:
  # 动画效果
  #
  # 可以为下面的值，可以设置后自己感受:
  #   - Ease
  #   - EaseOut
  #   - EaseOutSine
  #   - EaseOutQuad
  #   - EaseOutCubic
  #   - EaseOutQuart
  #   - EaseOutQuint
  #   - EaseOutExpo
  #   - EaseOutCirc
  #   - Linear
  # animation: EaseOutExpo

  # 动画闪烁的持续时间（以毫秒为单位）。设置为 0 表示禁用动画效果
  # duration: 0

  # 动画颜色.
  # color: &#39;#ffffff&#39;

  # 响铃后执行的命令， 配置为 None 则不执行任何命令
  #
  # Example:
  #   command:
  #     program: notify-send
  #     args: [&amp;quot;Hello, World!&amp;quot;]
  #
  # command: None


# 背景不透明度
#
# 窗口不透明度，区间为从0.0到1.0的浮点数。0.0 完全头名，1.0 则完全不透明
window_opacity: 0.95

selection:  
  # 分割语义化单词的分隔符，这个会影响到鼠标双击左键的单词选中。
  # 比如 @ 作为分割 username 和 password 的字符，默认配置里面竞是没有的。。。
  # 弊端是：选词粘贴的时候，会粘贴不需要的隐藏的字符
  # semantic_escape_chars: &amp;quot;,│`|:\&amp;quot;&#39; ()[]{}&amp;lt;&amp;gt;\t@=&amp;quot;

  # 选中文本后是否复制到主剪贴板，关于主剪贴板是啥可以参考 https://wiki.archlinux.org/index.php/clipboard
  save_to_clipboard: false


# 光标配置
cursor:  
  # 光标样式
  style:
    # 光标形状
    #
    # 可以为下面的值:
    #   - ▇ Block
    #   - _ Underline
    #   - | Beam
    shape: Block

    # 光标闪烁状态
    #
    # 可以为下面的值:
    #   - Never: Prevent the cursor from ever blinking
    #   - Off: Disable blinking by default
    #   - On: Enable blinking by default
    #   - Always: Force the cursor to always blink
    blinking: Off

  # Vi 模式下的光标样式
  # 同上面的配置项，如果设置为 None 那么会使用普通模式下的光标配置
  vi_mode_style: None

  # 毫秒为单位的光标闪烁间隔
  # blink_interval: 750

  # 如果为true，则当窗口未聚焦时，光标将显示为空心框。 
  # unfocused_hollow: true

  # Thickness of the cursor relative to the cell width as floating point number
  # from `0.0` to `1.0`.
  #thickness: 0.15

# 是否启用配置热更新
live_config_reload: true


# Shell
#
# 随终端打开时启动的 Shell
#
# Default:
#   - (macOS) /bin/bash --login
#   - (Linux/BSD) user login shell
#   - (Windows) powershell
shell:
 program: /bin/bash
 args:
   - -l
   - -c
   - &#39;zellij&#39;


# 启动时的目录
#
# 如果是 None 那么会使用父进程的工作目录
# working_directory: None

# Alt 和字符连按的时候发送 ESC (\x1b) 
# alt_send_esc: true


# 鼠标配置
mouse:  
  # 点击配置
  #
  # 双击和三击的判定等待时间，数值越小，需要快速的双击才能判定为双击操作
  # double_click: { threshold: 300 }
  # triple_click: { threshold: 300 }

  # 打字的时候临时隐藏鼠标
  hide_when_typing: false

  # hints:
    # 配置单击 URL 时的动作
    #
    # 单击被识别为URL的文本时，将执行所指定的程序。 URL始终作为最后一个参数添加到命令中。 
    # 如果设置为 None，那么禁用此功能
    #
    # Default:
    #   - (macOS) open
    #   - (Linux/BSD) xdg-open
    #   - (Windows) explorer
    # launcher:
    #  program: xdg-open
    #  args: []

    # URL modifiers
    #
    # 配置修饰键，Alacritty 默认单击就打开 URL，如果将此项配置为 Command，那么需要按住 Command 然后单击
    # modifiers: Command


# Mouse bindings
#
# 配置鼠标动作绑定，和键盘绑定类似。详细配置可以参考 Key bindings 一节
# 
# 为了在 Alacritty 中运行的应用程序捕获鼠标时触发鼠标绑定，会自动添加 Shift 修饰符。 
#
# - `mouse`:
#
#   - Middle
#   - Left
#   - Right
#   - Numeric identifier such as `5`
#
# - `action` (see key bindings)
#
# And optionally:
#
# - `mods` (see key bindings)
# mouse_bindings:
# - { mouse: Middle, action: PasteSelection } # 按鼠标中键粘贴选中内容


# Key bindings
#
# 按键绑定是对象列表。比如西面的是默认的粘贴的键位绑定
#
# `- { key: V, mods: Control|Shift, action: Paste }`
#
# Each key binding will specify a:
#
# - `key`: 需要按到的键盘码
#
#    - A-Z
#    - F1-F24
#    - Key0-Key9
#
#    键盘码可以从下面找到
#    https://docs.rs/glutin/*/glutin/event/enum.VirtualKeyCode.html#variants
#    这里对于不清楚键盘上每个键的英文名称的同学，可以参考
#    https://www.computerhope.com/jargon/b/backquot.htm
#
#    除了使用按键的名字之外，还支持使用所需键的 scancode。不过必须为十进制数字。下面的命令会显示十六进制的 scancode
#
#       `showkey --scancodes`.
#
# Then exactly one of:
#
# - `chars`: 发送字节序列到正在运行的应用程序 
#
#    char 字段可以将指定的字符串写入终端。这功能可以用在传递转义序列中。
#    想要找到诸如  `PageUp` (`&amp;quot;\x1b[5~&amp;quot;`) 这样的转义字符，可以通过 `showkey -a` 命令
#    `xxd -psd` 命令也可以做到
#
# - `action`: 执行预定义的操作
#
#   - ToggleViMode: 开启/关闭 Vi 模式
#   - SearchForward: 向前搜索
#   - SearchBackward: 向后搜索
#   - Copy: 复制
#   - Paste: 粘贴
#   - IncreaseFontSize: 增加字号
#   - DecreaseFontSize: 减小字号
#   - ResetFontSize: 重置字号
#   - ScrollPageUp: 向上翻一页
#   - ScrollPageDown: 向下翻一页
#   - ScrollHalfPageUp: 向上翻半页
#   - ScrollHalfPageDown: 向下翻半页
#   - ScrollLineUp: 向上滚动一行
#   - ScrollLineDown: 向下滚动一行
#   - ScrollToTop: 滚动到顶部
#   - ScrollToBottom: 滚动到底部
#   - ClearHistory: 清空滚动缓冲区
#   - Hide: 隐藏窗口
#   - Minimize: 最小化
#   - Quit: 退出
#   - ToggleFullscreen: 在全屏/当前模式下切换
#   - SpawnNewInstance: 启动一个新的 Alacritty
#   - ClearLogNotice: 清 UI 上的 warning 和 error 的 notice
#   - ClearSelection: 清空当前选中
#   - ReceiveChar: 不执行任何动作，将字符输入
#   - None: 不执行任何动作，并且拦截掉
#
# - Vi 模式下独占的操作
#
#   - Open: 打开一个链接，launcher 的配置参考 `url.launcher`
#   - ToggleNormalSelection: 切换到普通选中模式
#   - ToggleLineSelection: 切换到行选中模式
#   - ToggleBlockSelection: 切换到块选中模式
#   - ToggleSemanticSelection: 切换到语义选中模式，参考  `selection.semantic_escape_chars`.
#
# - Vi 模式下独占的光标操作:
#
#   - Up: 向上一行
#   - Down: 向下一行
#   - Left: 向左一个字符
#   - Right: 向右一个字符
#   - First: 第一列，如果已经在第一列，那么到起始行
#   - Last: 最后一列，如果已经在最后一列，那么到起始行
#   - FirstOccupied: 此终端行中的第一个非空单元格，如果已经位于该行的第一个单元格时，那么该行的第一个非空单元格
#   - High: 屏幕最上方
#   - Middle: 屏幕中间
#   - Low: 屏幕底部
#   - SemanticLeft: 前一个在被语义上分隔的单词的开头
#   - SemanticRight: 下一个在被语义上分隔的单词的开头
#   - SemanticLeftEnd:  前一个被语义上分隔的单词的结尾
#   - SemanticRightEnd: 下一个被语义上分隔的单词的结尾
#   - WordLeft: 前一个被空白符分隔的单词的开头
#   - WordRight: 下一个被空白符分隔的单词的开头
#   - WordLeftEnd: 前一个被空白符分隔的单词的结尾
#   - WordRightEnd: 下一个被空白符分隔的单词的结尾
#   - Bracket: 与光标所在位置的括号匹配的字符
#   - SearchNext: 向后搜索
#   - SearchPrevious: 向前搜索
#   - SearchStart: vi 模式光标左侧的首次匹配
#   - SearchEnd: vi 模式光标右侧的最后匹配
#
# - 搜索模式独占的操作:
#   - SearchFocusNext: 将焦点移到下一个搜索匹配项。
#   - SearchFocusPrevious: 将焦点移到上一个搜索匹配项。
#   - SearchConfirm: 确认搜索
#   - SearchCancel: 取消搜索
#   - SearchClear: 清空搜索内容
#   - SearchDeleteWord: 删除搜索内容的最后一个单词
#   - SearchHistoryPrevious: 跳转搜索内容历史的上一个
#   - SearchHistoryNext: 跳转搜索内容历史的下一个
#
# - macos 独占的操作:
#   - ToggleSimpleFullscreen: Enter fullscreen without occupying another space.
#
# - Linux/BSD 独占的操作:
#
#   - CopySelection: 从选中缓冲区中复制
#   - PasteSelection: 从选中缓冲区中粘贴
#
# - `command`: 执行命令
#
#    The `command` field must be a map containing a `program` string and an
#    `args` array of command line parameter strings. For example:
#       `{ program: &amp;quot;alacritty&amp;quot;, args: [&amp;quot;-e&amp;quot;, &amp;quot;vttest&amp;quot;] }`
#
# 可选的:
#
# - `mods`: 修饰键
#
#    - Command
#    - Control
#    - Option
#    - Super
#    - Shift
#    - Alt
#
#    多个修饰键使用 `|` 进行组合，像这样:
#       `mods: Control|Shift`.
#
# - `mode`: 对于指定的模式下进行绑定。用于在不同模式下向应用程序发送正确的转义序列
#    - AppCursor
#    - AppKeypad
#    - Search
#    - Alt
#    - Vi
#
#    A `~` 操作符，用于逻辑取反
#
# Alacritty 有默认的键位绑定，如果想要替换需要使用新的绑定进行覆盖。如果想取消默认的绑定，，可以映射到 `ReceiveChar`。
# 另外，如果不希望接收该绑定的输入字符，可以映射到 `None`。
# 如果相同的触发键位，有多个 action，那么会顺序执行

# 下面是我的键位绑定，使用 Tmux。通过转义序列触发 tmux 的 prefix 和快捷键位
# Tmux 和 Alacritty 集成可以参考 https://arslan.io/2018/02/05/gpu-accelerated-terminal-alacritty/
key_bindings:  
  - { key: LBracket,          mods: Command,                      chars: &amp;quot;\x1d\x5b&amp;quot;}
  - { key: Apostrophe,        mods: Command,                      chars: &amp;quot;\x1d\x22&amp;quot;}
  - { key: S,                 mods: Command,                      chars: &amp;quot;\x1d\x25&amp;quot;}
  - { key: J,                 mods: Command,                      chars: &amp;quot;\x1d\x6a&amp;quot;}
  - { key: K,                 mods: Command,                      chars: &amp;quot;\x1d\x6b&amp;quot;}
  - { key: H,                 mods: Command,                      chars: &amp;quot;\x1d\x68&amp;quot;}
  - { key: L,                 mods: Command,                      chars: &amp;quot;\x1d\x6c&amp;quot;}
  - { key: J,                 mods: Command|Shift,                chars: &amp;quot;\x1d\x4a&amp;quot;}
  - { key: K,                 mods: Command|Shift,                chars: &amp;quot;\x1d\x4b&amp;quot;}
  - { key: H,                 mods: Command|Shift,                chars: &amp;quot;\x1d\x48&amp;quot;}
  - { key: L,                 mods: Command|Shift,                chars: &amp;quot;\x1d\x4c&amp;quot;}
  - { key: W,                 mods: Command,                      chars: &amp;quot;\x1d\x77&amp;quot;}
  - { key: T,                 mods: Command,                      chars: &amp;quot;\x1d\x63&amp;quot;}
  - { key: D,                 mods: Command,                      chars: &amp;quot;\x1d\x26&amp;quot;}
  - { key: X,                 mods: Command,                      chars: &amp;quot;\x1d\x78&amp;quot;}
  - { key: Z,                 mods: Command,                      chars: &amp;quot;\x1d\x7a&amp;quot;}
  - { key: N,                 mods: Command,                      chars: &amp;quot;\x1d\x71&amp;quot;}
  - { key: Semicolon,         mods: Command|Shift,                chars: &amp;quot;\x1d\x3a&amp;quot;}
  - { key: Key1,              mods: Command,                      chars: &amp;quot;\x1d\x31&amp;quot;}
  - { key: Key2,              mods: Command,                      chars: &amp;quot;\x1d\x32&amp;quot;}
  - { key: Key3,              mods: Command,                      chars: &amp;quot;\x1d\x33&amp;quot;}
  - { key: Key4,              mods: Command,                      chars: &amp;quot;\x1d\x34&amp;quot;}
  - { key: Key5,              mods: Command,                      chars: &amp;quot;\x1d\x35&amp;quot;}
  - { key: Key6,              mods: Command,                      chars: &amp;quot;\x1d\x36&amp;quot;}
  - { key: Key7,              mods: Command,                      chars: &amp;quot;\x1d\x37&amp;quot;}
  - { key: Key8,              mods: Command,                      chars: &amp;quot;\x1d\x38&amp;quot;}
  - { key: Key9,              mods: Command,                      chars: &amp;quot;\x1d\x39&amp;quot;}


# 不使用 tmux 可以参考这份
# key_bindings:
  #- { key: LBracket,                    mods: Command,    action: ToggleViMode            }
  #- { key: U,      mods: Command,       mode: ~Vi|~Search,action: ScrollHalfPageUp        }
  #- { key: D,      mods: Command,       mode: ~Vi|~Search,action: ScrollHalfPageDown      }
  #- { key: LBracket,  mods: Control,mode: Vi|~Search,     action: ClearSelection          }
  #- { key: C,      mods: Control,       mode: Vi|~Search, action: ToggleViMode            }
  #- { key: G,                           mode: Vi|~Search, action: ScrollToTop             }
  #- { key: G,      mods: Shift,         mode: Vi|~Search, action: ScrollToBottom          }
  #- { key: U,      mods: Control,       mode: Vi|~Search, action: ScrollHalfPageUp        }
  #- { key: D,      mods: Control,       mode: Vi|~Search, action: ScrollHalfPageDown      }
  #- { key: Y,                           mode: Vi|~Search, action: Copy                    }
  #- { key: V,                           mode: Vi|~Search, action: ToggleNormalSelection   }
  #- { key: V,      mods: Shift,         mode: Vi|~Search, action: ToggleLineSelection     }
  #- { key: V,      mods: Control,       mode: Vi|~Search, action: ToggleBlockSelection    }
  #- { key: Return,                      mode: Vi|~Search, action: Open                    }
  #- { key: K,                           mode: Vi|~Search, action: Up                      }
  #- { key: J,                           mode: Vi|~Search, action: Down                    }
  #- { key: H,                           mode: Vi|~Search, action: Left                    }
  #- { key: L,                           mode: Vi|~Search, action: Right                   }
  #- { key: Key0,                        mode: Vi|~Search, action: First                   }
  #- { key: Key4,   mods: Shift,         mode: Vi|~Search, action: Last                    }
  #- { key: Key6,   mods: Shift,         mode: Vi|~Search, action: FirstOccupied           }
  #- { key: H,      mods: Shift,         mode: Vi|~Search, action: High                    }
  #- { key: M,      mods: Shift,         mode: Vi|~Search, action: Middle                  }
  #- { key: L,      mods: Shift,         mode: Vi|~Search, action: Low                     }
  #- { key: B,                           mode: Vi|~Search, action: SemanticLeft            }
  #- { key: W,                           mode: Vi|~Search, action: SemanticRight           }
  #- { key: E,                           mode: Vi|~Search, action: SemanticRightEnd        }
  #- { key: B,      mods: Shift,         mode: Vi|~Search, action: WordLeft                }
  #- { key: W,      mods: Shift,         mode: Vi|~Search, action: WordRight               }
  #- { key: E,      mods: Shift,         mode: Vi|~Search, action: WordRightEnd            }
  #- { key: Key5,   mods: Shift,         mode: Vi|~Search, action: Bracket                 }
  #- { key: Slash,                       mode: Vi|~Search, action: SearchForward           }
  #- { key: Slash,  mods: Shift,         mode: Vi|~Search, action: SearchBackward          }
  #- { key: N,                           mode: Vi|~Search, action: SearchNext              }
  #- { key: N,      mods: Shift,         mode: Vi|~Search, action: SearchPrevious          }


# 调试
# debug:
  # 显示没帧重绘所使用的时间
  # render_timer: false

  # 持久化日志
  #persistent_logging: false

  # 日志级别
  #
  # Values for `log_level`:
  #   - Off
  #   - Error
  #   - Warn
  #   - Info
  #   - Debug
  #   - Trace
  # log_level: Warn

  # 输出所有接收到的窗口事件
  # print_events: false
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-配置zellij&#34;&gt;三、配置zellij&lt;/h2&gt;
&lt;p&gt;将zellij设为默认启用(废弃！！！！直接在alacritty中通过shell配置直接启动zellij)&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 打开.bashrc文件
vim ~/.bashrc

# 在.bashrc文件末尾输入
eval &amp;quot;$(zellij setup --generate-auto-start bash)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
">搭建zellij+alacritty终端环境</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/da-jian-gitlab/"" data-c="
          &lt;h4 id=&#34;搭建gitlab&#34;&gt;搭建gitlab&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://about.gitlab.com/install/&#34;&gt;gitlab官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://mirrors.tuna.tsinghua.edu.cn/help/gitlab-ce/&#34;&gt;gitlab-ce清华源&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;需要注意gitlab有ce和ee两个版本，其中ce是社区版可以免费使用，ee是企业版会收费。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 安装依赖
sudo apt-get update
sudo apt-get install -y curl openssh-server ca-certificates tzdata perl

# 使用清华源安装,先安装证书
curl https://packages.gitlab.com/gpg.key 2&amp;gt; /dev/null | sudo apt-key add - &amp;amp;&amp;gt;/dev/null

# 再添加仓库源，把deb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu focal main写入到/etc/apt/sources.list.d/gitlab-ce.list中

# 开始安装
sudo apt-get update
sudo EXTERNAL_URL=&amp;quot;192.168.0.144:8083&amp;quot; apt-get install gitlab-ce

# 配置gitlab
sudo gitlab-ctl reconfigure

# 启动gitlab
sudo gitlab-ctl start

# 启动后可以开始登录了，网页端输入&amp;quot;http://192.168.0.144:8083/&amp;quot;即可登录
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;检查端口是否占用&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 使用lsof
lsof -i:端口号

# 使用netstat
netstat -tunlp | grep 8083
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果端口被占用，则修改gitlab配置文件&lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt;中的&lt;code&gt;external_url &#39;http://192.168.0.144:8083&#39;&lt;/code&gt;内容&lt;/p&gt;
&lt;p&gt;检查和修改sshd是否支持对应的ssh端口&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 查看ssh配置
sudo vim /etc/ssh/sshd_config
# 添加需要的Port xxx ,并保存
# 重启sshd
sudo /etc/init.d/ssh restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改gitlab端口号&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 打开/etc/gitlab/gitlab.rb
sudo vim /etc/gitlab/gitlab.rb
# 使能并配置ssh端口
gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 22111
# 重写配置
sudo gitlab-ctl reconfigure
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;基础命令&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 配置
gitlab-ctl reconfigure
# 启动
sudo gitlab-ctl start
# 停止
sudo gitlab-ctl stop
# 重启
sudo gitlab-ctl restart
# 开机启动
systemctl enable gitlab-runsvdir.service
# 禁止开机自启动
systemctl disable gitlab-runsvdir.service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取管理员密码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 进入/opt/gitlab/bin目录
cd /opt/gitlab/bin
# 2. 管理用户
sudo gitlab-rails console -e production
# 3. 在第2步出现的命令栏输入指令来管理用户
--------------------------------------------------------------------------------
 Ruby:         ruby 2.7.5p203 (2021-11-24 revision f69aeb8314) [x86_64-linux]
 GitLab:       15.2.2 (4ecb014a935) FOSS
 GitLab Shell: 14.9.0
 PostgreSQL:   13.6
------------------------------------------------------------[ booted in 24.62s ]
Loading production environment (Rails 6.1.4.7)
irb(main):001:0&amp;gt; u=User.where(id:1).first			# 获取第一个用户，即root
=&amp;gt; #&amp;lt;User id:1 @root&amp;gt;
irb(main):003:0&amp;gt; u.password=&#39;sipeed123&#39;				# 修改密码为&#39;sipeed123&#39;
=&amp;gt; &amp;quot;sipeed123&amp;quot;
irb(main):004:0&amp;gt; u.password_confirmation=&#39;sipeed123&#39;	# 确认密码为&#39;sipeed123&#39;
=&amp;gt; &amp;quot;sipeed123&amp;quot;
irb(main):005:0&amp;gt; u.save!							# 保存
=&amp;gt; true
irb(main):006:0&amp;gt; exit								# 退出
&lt;/code&gt;&lt;/pre&gt;
">搭建gitlab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/chuang-jian-hexo-bo-ke/"" data-c="
          &lt;h4 id=&#34;一-博客搭建过程&#34;&gt;一、 博客搭建过程&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;安装git和nodejs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo apt-get install git
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装/更新nodejs和npm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 安装
sudo apt-get install nodejs
sudo apt-get install npm

# 更新到nodejs最新版本
sudo npm cache clean -f
sudo npm install -g n
sudo n latest
PATH=&amp;quot;$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装hexo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo npm install hexo-cli -g
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tips:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;安装hexo过程中可卡在loadDep:use: sill install loadAllDepsIntoIdealTree时，删除博客目录下的package-lock.json后重试&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建hexo博客&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo init my_blog
cd my_blog
npm install
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装博客插件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo-deployer-git --save
npm install hexo-githubcalendar --save
npm install hexo-generator-search --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;生成和部署博客&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo clean &amp;amp;&amp;amp; hexo g -d
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在github创建一个仓库，仓库名&lt;code&gt;username.github.io&lt;/code&gt;，其中username表示github用户名。并为仓库创建一个分支hexo，设置分支hexo为默认分支。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将仓库&lt;code&gt;username.github.io&lt;/code&gt;克隆到本地，并将前面创建的博客文件全部复制到git中，添加.gitignore文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;### .gitignore的内容
.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更新分支&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git add .
git commit –m &amp;quot;add branch&amp;quot;
git push origin hexo
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;二-博客转移方法&#34;&gt;二、 博客转移方法&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;克隆博客的git仓库&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone git@xxx.github.io
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;部署博客环境&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 安装git、nodejs、npm、hexo
sudo apt-get install git
sudo apt-get install nodejs
sudo apt-get install npm

# 安装npm
sudo npm install

# 更新到nodejs最新版本
sudo npm cache clean -f
sudo npm install -g n
sudo n latest
PATH=&amp;quot;$PATH&amp;quot;

# 安装npm(重新执行)
sudo npm install

# 安装hexo
sudo npm install hexo-cli -g

# 更新博客插件
sudo npm install hexo-deployer-git --save
npm install hexo-githubcalendar --save
npm install hexo-generator-search --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;部署博客&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo clean &amp;amp;&amp;amp; hexo g -d
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Tips:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过该命令查看是否有git仓库的权限&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ssh -T git@github.com&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;每次写完最好把源文件上传以下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git add .
git commit –m &amp;quot;xxxx&amp;quot;
git push 
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;三-其他&#34;&gt;三、其他&lt;/h4&gt;
&lt;h5 id=&#34;31-域名绑定的方法&#34;&gt;3.1 域名绑定的方法&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;域名解析配置，阿里云的DNS配置点&lt;a href=&#34;https://dns.console.aliyun.com/?spm=a2c63.p38356.879954.3.16456995sPbLcC#/dns/setting&#34;&gt;这里&lt;/a&gt;&lt;br&gt;
操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;进入对应厂家的域名控制台&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置域名的参数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;记录类型：CNAME
主机记录：@
线路类型：默认
记录值：lxowalle.github.io
TTL:24H
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;完成&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置github&lt;/p&gt;
&lt;p&gt;操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;进入xxx.github.io仓库&lt;/li&gt;
&lt;li&gt;点击进入Setting&lt;/li&gt;
&lt;li&gt;点击进入Page&lt;/li&gt;
&lt;li&gt;找到Custom domain项，填入域名并保存(例如填入&amp;quot;lxowalle.cc&amp;quot;)&lt;/li&gt;
&lt;li&gt;完成&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tips:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果执行hexo g -d后发现github page配置的域名消失，尝试在source目录下新建一个CNAME文件，并填入自己的域名，例如&amp;quot;lxowalle.cc&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;32-在博客中显示github代码提交热度&#34;&gt;3.2 在博客中显示github代码提交热度&lt;/h5&gt;
&lt;p&gt;操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装插件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm i hexo-githubcalendar --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改全局配置_config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;githubcalendar:
  enable: true
  enable_page: /  # 表示只在根目录(首页)显示
  user: lxowalle	  # 替换成你 GitHub 的用户名
  layout_id: recent-posts
  githubcalendar_html: &#39;&amp;lt;div class=&amp;quot;recent-post-item&amp;quot; style=&amp;quot;width:100%;height:auto;padding:10px;&amp;quot;&amp;gt;&amp;lt;div id=&amp;quot;github_loading&amp;quot; style=&amp;quot;width:10%;height:100%;margin:0 auto;display: block&amp;quot;&amp;gt;&amp;lt;svg xmlns=&amp;quot;http://www.w3.org/2000/svg&amp;quot; xmlns:xlink=&amp;quot;http://www.w3.org/1999/xlink&amp;quot;  viewBox=&amp;quot;0 0 50 50&amp;quot; style=&amp;quot;enable-background:new 0 0 50 50&amp;quot; xml:space=&amp;quot;preserve&amp;quot;&amp;gt;&amp;lt;path fill=&amp;quot;#d0d0d0&amp;quot; d=&amp;quot;M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z&amp;quot; transform=&amp;quot;rotate(275.098 25 25)&amp;quot;&amp;gt;&amp;lt;animateTransform attributeType=&amp;quot;xml&amp;quot; attributeName=&amp;quot;transform&amp;quot; type=&amp;quot;rotate&amp;quot; from=&amp;quot;0 25 25&amp;quot; to=&amp;quot;360 25 25&amp;quot; dur=&amp;quot;0.6s&amp;quot; repeatCount=&amp;quot;indefinite&amp;quot;&amp;gt;&amp;lt;/animateTransform&amp;gt;&amp;lt;/path&amp;gt;&amp;lt;/svg&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div id=&amp;quot;github_container&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&#39;
  pc_minheight: 280px
  mobile_minheight: 0px
  color: &amp;quot;[&#39;#ebedf0&#39;, &#39;#fdcdec&#39;, &#39;#fc9bd9&#39;, &#39;#fa6ac5&#39;, &#39;#f838b2&#39;, &#39;#f5089f&#39;, &#39;#c4067e&#39;, &#39;#92055e&#39;, &#39;#540336&#39;, &#39;#48022f&#39;, &#39;#30021f&#39;]&amp;quot;
  api: https://python-github-calendar-api.vercel.app/api
  # api: https://python-gitee-calendar-api.vercel.app/api
  calendar_js: https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.16/hexo_githubcalendar.js
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;根据自身需求更换颜色（可选）&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;# 橘黄色调
color: &amp;quot;[&#39;#e4dfd7&#39;, &#39;#f9f4dc&#39;, &#39;#f7e8aa&#39;, &#39;#f7e8aa&#39;, &#39;#f8df72&#39;, &#39;#fcd217&#39;, &#39;#fcc515&#39;, &#39;#f28e16&#39;, &#39;#fb8b05&#39;, &#39;#d85916&#39;, &#39;#f43e06&#39;]&amp;quot;
# 翠绿色调
color: &amp;quot;[&#39;#ebedf0&#39;, &#39;#f0fff4&#39;, &#39;#dcffe4&#39;, &#39;#bef5cb&#39;, &#39;#85e89d&#39;, &#39;#34d058&#39;, &#39;#28a745&#39;, &#39;#22863a&#39;, &#39;#176f2c&#39;, &#39;#165c26&#39;, &#39;#144620&#39;]&amp;quot;
# 天青色调
color: &amp;quot;[&#39;#ebedf0&#39;, &#39;#f1f8ff&#39;, &#39;#dbedff&#39;, &#39;#c8e1ff&#39;, &#39;#79b8ff&#39;, &#39;#2188ff&#39;, &#39;#0366d6&#39;, &#39;#005cc5&#39;, &#39;#044289&#39;, &#39;#032f62&#39;, &#39;#05264c&#39;]&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更新配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo clean &amp;amp;&amp;amp; hexo g -d
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;33-博客首页添加搜索功能&#34;&gt;3.3 博客首页添加搜索功能&lt;/h5&gt;
&lt;p&gt;操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装插件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install pug
npm install hexo-generator-search --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改全局配置_config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;search:
  path: search.xml
  field: post
  content: true
  template: ./search.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改主题配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;local_search:
  enable: true
  labels:
    input_placeholder: Search for Posts
    hits_empty: &amp;quot;We didn&#39;t find any results for the search: ${query}&amp;quot; # if there are no result
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;34-通过picgogitee添加图床给博客用&#34;&gt;3.4 通过Picgo+gitee添加图床给博客用&lt;/h5&gt;
&lt;p&gt;​	Picgo在&lt;a href=&#34;https://github.com/Molunerfinn/PicGo/releases&#34;&gt;这里&lt;/a&gt;下载（支持Linux、Mac和Windows）&lt;/p&gt;
&lt;p&gt;​	步骤很简单，配置方法参考&lt;a href=&#34;https://gitee.com/ningboyun/PicGo_img&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;参考文章:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.imzjw.cn/posts/b74f504f&#34;&gt;关于我 Butterfly 主题的所有美化&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/u012208219/article/details/106883001/?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.no_search_link&amp;amp;spm=1001.2101.3001.4242.0&#34;&gt;Hexo博客之butterfly主题优雅魔改系列&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://butterfly.js.org&#34;&gt;Butterfly&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;hexo创建草稿&#34;&gt;hexo创建草稿&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;hexo new draft &amp;lt;title&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将草稿发布为正式文章,其中 &lt;code&gt;&amp;lt;filename&amp;gt;&lt;/code&gt; 为不包含 md 后缀的文章名称。它的原理只是将文章从 source/_drafts 移动到 source/_posts 而已。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;hexo P &amp;lt;filename&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
">创建hexo博客</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/chang-jian-de-er-wei-ma-deng-lu-guo-cheng/"" data-c="
          &lt;p&gt;日常使用的二维码生成工具&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cli.im/&#34;&gt;草料二维码生成器&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-二维码登录过程&#34;&gt;一、二维码登录过程&lt;/h2&gt;
&lt;h3 id=&#34;11-前期认证&#34;&gt;1.1 前期认证&lt;/h3&gt;
&lt;p&gt;也许平日里没注意到，如果想要通过二维码扫码通过某个软件的认证，前提必须本地客户端先通过认证，例如通过账号密码来认证。下面是一个基于token的认证过程:&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcxLnN5Y2RuLmltb29jLmNvbS81ZTgzMGNlMzAwMDFkNTk1MDY0MzA0NjcucG5n?x-oss-process=image/format,png&#34; alt=&#34;基于token的认证过程&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;解释：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;认证由手机端开始，手机首先发送账号、密码和设备信息&lt;/li&gt;
&lt;li&gt;服务端接收并验证用户名和密码后，会将账户与设备绑定并生成token，这个token会类似键值对的方式与账号和设备关联。&lt;/li&gt;
&lt;li&gt;服务器返回上面生成的token和设备信息。&lt;/li&gt;
&lt;li&gt;手机端收到token后就可以通过token和设备信息访问服务器的接口了，这个token将会在二维码扫码登录时使用到。&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;注意上面的设备信息其中一个作用是为了防止数据包在传输过程被劫持。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;12-二维码扫码登录过程&#34;&gt;1.2 二维码扫码登录过程&lt;/h3&gt;
&lt;p&gt;下面描述了二维码扫码登录的过程：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意下面过程中手机端和服务端通信使用的token就是上面手机端认证时的token。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcxLnN5Y2RuLmltb29jLmNvbS81ZTgyZmFmMDAwMDE2NWI1MDk1NjA5MzYucG5n?x-oss-process=image/format,png&#34; alt=&#34;二维码扫码登录过程&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;解释：&lt;/strong&gt;&lt;br&gt;
二维码扫码登录由3个部分组成，1.已经认证通过的手机端。2.需要认证的PC端。3.负责认证的服务端。&lt;/p&gt;
&lt;p&gt;手机端：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;扫描在PC端生成的二维码后，向服务器发送自身的token来证明自己有权限让二维码的PC端通过&lt;/li&gt;
&lt;li&gt;向服务器发送自身是否允许该PC端通过。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;PC端&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;获取服务器给的二维码ID，然后向手机端展示该ID生成的二维码&lt;/li&gt;
&lt;li&gt;不断地轮询这个二维码是否也被确认，直到超时。&lt;/li&gt;
&lt;li&gt;获取服务端下发的token，并通过这个token与服务器通信&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;服务端&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;为PC端生成二维码&lt;/li&gt;
&lt;li&gt;生成临时token来等待手机端的确认信息&lt;/li&gt;
&lt;li&gt;更改二维码为确认状态，生成PC端的token并发送给PC端&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;参考文章：&lt;br&gt;
&lt;a href=&#34;https://www.cnblogs.com/jamaler/p/12610349.html&#34;&gt;聊一聊二维码扫描登录原理&lt;/a&gt;&lt;/p&gt;
">常见的二维码登录过程</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/quan-zhi-v853s-chang-gui-tian-jia-zi-ding-yi-qu-dong/"" data-c="
          &lt;p&gt;参考资料&lt;a href=&#34;https://cloud.tencent.com/developer/article/2311019&#34;&gt;荔枝派Zero(全志V3S)驱动开发之hello驱动程序&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-字符驱动&#34;&gt;一、字符驱动&lt;/h2&gt;
&lt;p&gt;为了方便测试，现在添加一个字符驱动，并且以模块的形式编译，方便观察加载/卸载的过程。如果想直接编译进内核，则通过menuconfig将USER_TEST选项修改为y(或*)即可&lt;/p&gt;
&lt;h3 id=&#34;11-添加驱动源码&#34;&gt;1.1 添加驱动源码&lt;/h3&gt;
&lt;p&gt;在linux-4.9/drivers下添加驱动代码&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;创建驱动的文件目录&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 目录树
- linux-4.9/drivers
    - test
        - Kconfig       # 编译选项配置
        - Makefile      # 编译配置
        - test.c        # 驱动源码
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;更新编译选项配置&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# Kconfig
config USER_TEST
	tristate &amp;quot;User test&amp;quot;
	default m
	help
	  User test function
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;更新编译配置&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# Makefile
obj-$(CONFIG_USER_TEST)		+= test.o
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;添加驱动源码&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#include &amp;lt;linux/module.h&amp;gt;

#include &amp;lt;linux/fs.h&amp;gt;
#include &amp;lt;linux/errno.h&amp;gt;
#include &amp;lt;linux/miscdevice.h&amp;gt;
#include &amp;lt;linux/kernel.h&amp;gt;
#include &amp;lt;linux/major.h&amp;gt;
#include &amp;lt;linux/mutex.h&amp;gt;
#include &amp;lt;linux/proc_fs.h&amp;gt;
#include &amp;lt;linux/seq_file.h&amp;gt;
#include &amp;lt;linux/stat.h&amp;gt;
#include &amp;lt;linux/init.h&amp;gt;
#include &amp;lt;linux/device.h&amp;gt;
#include &amp;lt;linux/tty.h&amp;gt;
#include &amp;lt;linux/kmod.h&amp;gt;
#include &amp;lt;linux/gfp.h&amp;gt;

/* 1. 确定主设备号*/
static int major = 200;
static char kernel_buf[1024];
static struct class *test_class;

#define MIN(a, b) (a &amp;lt; b ? a : b)

/* 3. 实现对应的open/read/write等函数，填入file_operations结构体  */
static ssize_t test_drv_read (struct file *file, char __user *buf, size_t size, loff_t *offset)
{
    int err;
    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    err = copy_to_user(buf, kernel_buf, MIN(1024, size));
    return MIN(1024, size);
}

static ssize_t test_drv_write (struct file *file, const char __user *buf, size_t size, loff_t *offset)
{
    int err;
    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    err = copy_from_user(kernel_buf, buf, MIN(1024, size));
    return MIN(1024, size);
}

static int test_drv_open (struct inode *node, struct file *file)
{
    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    return 0;
}

static int test_drv_close (struct inode *node, struct file *file)
{
    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    return 0;
}

/* 2. 定义自己的file_operations结构体*/
static struct file_operations test_drv = {
    .owner  = THIS_MODULE,
    .open    = test_drv_open,
    .read    = test_drv_read,
    .write   = test_drv_write,
    .release = test_drv_close,
};

/* 4. 把file_operations结构体告诉内核：注册驱动程序                */
/* 5. 谁来注册驱动程序啊？得有一个入口函数：安装驱动程序时，就会去调用这个入口函数 */
static int __init test_init(void)
{
    int retvalue;

    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    retvalue = register_chrdev(major, &amp;quot;test_drv&amp;quot;, &amp;amp;test_drv);  /* /dev/test_drv */
    if(retvalue &amp;lt; 0){
        printk(&amp;quot;chrdevbase driver register failed\r\n&amp;quot;);
    }
    printk(&amp;quot;chrdevbase init!\r\n&amp;quot;);
    return 0;
}

/* 6. 有入口函数就应该有出口函数：卸载驱动程序时，就会去调用这个出口函数*/
static void __exit test_exit(void)
{
    printk(&amp;quot;%s %s line %d\n&amp;quot;, __FILE__, __FUNCTION__, __LINE__);
    unregister_chrdev(major, &amp;quot;test_drv&amp;quot;);
}

/* 7. 其他完善：提供设备信息，自动创建设备节点   */
module_init(test_init);
module_exit(test_exit);

MODULE_LICENSE(&amp;quot;GPL&amp;quot;);
MODULE_AUTHOR(&amp;quot;test&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-编译驱动&#34;&gt;1.2 编译驱动&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;直接编译&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd sdk_path
source ./build/envsetup.sh
mkernel
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;13-注册驱动&#34;&gt;1.3 注册驱动&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 上传驱动到Linux中
adb push test.ko /root

# 在Linux加载驱动
insmod test.ko

# 查看驱动是否加载成功
cat /proc/devices | grep test   # 能看到有test_drv输出

# 添加驱动设备节点(c表示字符设备，主设备号200，从设备号0.添加后即可找到设备文件/dev/test_drv)
mknod /dev/test_drv c 200 0

# 写数据(将会调用open-&amp;gt;write-&amp;gt;close)
echo 123123 &amp;gt; /dev/test_drv

# 读数据(将会调用open-&amp;gt;read-&amp;gt;close)
cat /dev/test_drv

# 取消驱动
rmmod test.ko
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-块设备驱动&#34;&gt;二、块设备驱动&lt;/h2&gt;
&lt;p&gt;待补充..&lt;/p&gt;
&lt;h2 id=&#34;三-网络设备驱动&#34;&gt;三、网络设备驱动&lt;/h2&gt;
&lt;p&gt;待补充..&lt;/p&gt;
">全志v853s常规-添加自定义驱动</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/quan-zhi-v853s-chang-gui-de-tian-jia-zi-ding-yi-ruan-jian-bao/"" data-c="
          &lt;p&gt;添加自定义包的目的：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;可以添加自定义的库&lt;/li&gt;
&lt;li&gt;可以添加自定义的可执行文件&lt;/li&gt;
&lt;li&gt;可以添加其他自定义的文件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;添加方法见下文：&lt;/p&gt;
&lt;h3 id=&#34;一-下载和安装全志v853x-sdk的开发环境&#34;&gt;一、下载和安装全志v853x SDK的开发环境&lt;/h3&gt;
&lt;p&gt;参考[这里(https://v853.docs.aw-ol.com/soft/soft_start/)&lt;/p&gt;
&lt;h3 id=&#34;二-添加自定义包的文件&#34;&gt;二、添加自定义包的文件&lt;/h3&gt;
&lt;p&gt;全志SDK使用了openwrt的构建机制来添加自定义包，因此可以直接参考openwrt添加包的方法。也可以参考如下方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;找到package目录&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;package目录一般在sdk的根目录下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;- v853s_sdk
    + ...
    + package
    + ...
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;添加自定义包的文件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这里需要注意3个文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;包的目录：可以直接嵌套，下面示例中包的目录是my_package/hello_world&lt;/li&gt;
&lt;li&gt;用于配置软件包的makefile&lt;/li&gt;
&lt;li&gt;用于编译软件包的makefile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;层级结构参考：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;- my_package
    - hello_world
    - src
        main.c           # 包的源代码
        Makefile        # 用于编译包
    Makefile            # 用于配置包
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;main.c文件代码参考：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// hello_world/src/main.c
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;sys/stat.h&amp;gt;
#include &amp;lt;sys/ioctl.h&amp;gt;
#include &amp;lt;fcntl.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdint.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;poll.h&amp;gt;
#include &amp;lt;signal.h&amp;gt;
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;linux/types.h&amp;gt;
#include &amp;lt;pthread.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;

int main(int argc, char **argv)
{
    printf(&amp;quot;Hello Sipeed! Hello World!\r\n&amp;quot;);
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;用于编译软件包的Makefile参考:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-makefile&#34;&gt;# hello_world/src/Makefile
BUILDPATH=.

CFLAGS=-Wall
CFLAGS+=-I./
CFLAGS+=-O0 -g
LOCAL_SRC = main.c

all:
	$(CC) $(CFLAGS) $(EXT_CFLAGS)  $(LOCAL_SRC) $(LDFLAGS)  -lpthread -o hello_world

clean:
	rm -f $(LIB) $(LIBOBJ)

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;用于配置软件包的Makefile参考:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-makefile&#34;&gt;include $(TOPDIR)/rules.mk

PKG_NAME:=hello_world
PKG_RELEASE:=1

PKG_BUILD_DIR := $(COMPILE_DIR)/$(PKG_NAME)

include $(BUILD_DIR)/package.mk

define Package/$(PKG_NAME)
	SECTION:=hello_world
	CATEGORY:=Hello World
	TITLE:=print hello world
endef

define Package/$(PKG_NAME)/description
    Hello Sipeed!
endef

define Build/Prepare
	mkdir -p $(PKG_BUILD_DIR)
	$(CP) ./src/* $(PKG_BUILD_DIR)/
endef

define Build/Configure
endef

define Build/Compile
	$(MAKE) -C $(PKG_BUILD_DIR) \
		CC=&amp;quot;$(TARGET_CC)&amp;quot; \
		CFLAGS=&amp;quot;$(TARGET_CFLAGS) -Wall&amp;quot; \
		LDFLAGS=&amp;quot;$(TARGET_LDFLAGS)&amp;quot;
endef

define Package/$(PKG_NAME)/install
	$(INSTALL_DIR) $(1)/usr/sbin
	$(INSTALL_BIN) $(PKG_BUILD_DIR)/$(PKG_NAME) $(1)/usr/sbin/
endef

$(eval $(call BuildPackage,$(PKG_NAME)))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;至此一个基础的软件包配置好了，配置用的Makefile还拥有其他可配置选项，用到的时候再补充&lt;/p&gt;
&lt;h3 id=&#34;三-配置软件包&#34;&gt;三、配置软件包&lt;/h3&gt;
&lt;p&gt;在sdk根目录下执行make_menuconfig即可找到Hello World选项，勾选选项后可以使能软件包&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;make menuconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;四-编译和打包&#34;&gt;四、编译和打包&lt;/h3&gt;
&lt;p&gt;直接按照sdk常规方法的编译即可&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;make -j8
pack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;确认包是否被编译的方法是直接在输出目录找找有没有编译出hello_world的命令&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ls ./out/v853s-maixcam/compile_dir/target/hello_world/hello_world
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编译并打包后，再烧录镜像到v853s板子中，可以直接执行&lt;code&gt;hello_world&lt;/code&gt;来执行刚才安装的包&lt;/p&gt;
&lt;h3 id=&#34;五-只编译软件包&#34;&gt;五、只编译软件包&lt;/h3&gt;
&lt;p&gt;当只修改了package下的软件包，不想再重新烧写固件时，可以单独编译和安装软件包。有两种方法：&lt;br&gt;
(注意全志的SDK在多核编译时可能会出现dl包未编译，导致报依赖错误的情况，这时候可以选择make -j1编译来解决)&lt;br&gt;
方法1：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 进入软件包目录，例如package/hello_world
cd package/hello_world
# 编译，-B表示需要clean
mm -B
# 上传编译后的软件包
adb push out/v853s-maixcam/packages/base/hello_world_1_sunxi.ipk /root
# 进入Tina Linux安装软件包
opkg install /root/hello_world_1_sunxi.ipk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;方法2：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 假设软件包位于package/hello_world
make package/hello_world/clean  # 执行clean
make package/hello_world/compile  # 执行编译
make package/hello_world/install  # 执行编译并安装
make package/hello_world/{clean,install}    # 执行clean后编译

# 上传编译后的软件包
adb push out/v853s-maixcam/packages/base/hello_world_1_sunxi.ipk /root
# 进入Tina Linux安装软件包
opkg install /root/hello_world_1_sunxi.ipk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;安装hello_world_1_sunxi.ipk，直接执行&lt;code&gt;hello_world&lt;/code&gt;即可运行&lt;/p&gt;
">全志v853s常规-添加自定义软件包</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/quan-zhi-v853s-wai-she-gpio/"" data-c="
          &lt;h3 id=&#34;一-基本特性&#34;&gt;一、基本特性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;总共111个gpio，每个gpio都有一个中断，可配置边沿中断(上升沿、下降沿、高电平、低电平、上升下降沿)&lt;/li&gt;
&lt;li&gt;支持上拉、下拉、无上下拉&lt;/li&gt;
&lt;li&gt;支持4级驱动强度(内部并联电阻实现)，等级越高驱动能力越大&lt;/li&gt;
&lt;li&gt;支持3.3v和1.8v&lt;/li&gt;
&lt;li&gt;输入时经过schmitt触发器，输出经过cmos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GPIO框图：&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1695283118503.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;二-软件结构&#34;&gt;二、软件结构&lt;/h3&gt;
&lt;p&gt;GPIO通过pinctrl框架管理，分为以下4个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pinctrl Interface：提供给上层用户调用的接口，可以给各类外设驱动，也可以提供 GPIO 子系统的接口。&lt;/li&gt;
&lt;li&gt;Pinctrl Framework：Linux 提供的 Pinctrl 驱动框架。
&lt;ul&gt;
&lt;li&gt;Pin State：系统运行在不同的状态，其 Pin 的配置有可能不一样，比如系统正常运行时，设备的 Pin 需要一组配置，但系统进入休眠时，为了节省功耗，设备 Pin 需要另一组配置。Pinctrl Framwork 提供了三种 Pin State可供切换：default, sleep, idle，对应正常模式，休眠模式 和 空闲模式。&lt;/li&gt;
&lt;li&gt;Pin Mux：Pin 的功能不是唯一的，一个 Pin 可能支持很多功能，需要查阅数据手册来确定Mux的值所对应的功能。例如 查阅GPIO MUX得知PE0的Function5是PWM0，因此当想用 PE0 作为 PWM 输出的时候就需要设置 PE0 的 Pin Mux 为 5。默认Function0是单向输入，Function1是单向输出&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1695894541403.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;li&gt;Pin Config：读取设备树里的 Pin 的配置文件，并确定 Pin 的驱动能力、上拉下拉、数据属性。同时也提供上层驱动的接口。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Pinctrl Driver：底层 Pin 控制器的驱动，对于全志平台则是 SUNXI Pinctrl。&lt;/li&gt;
&lt;li&gt;Device Tree：设备 Pin 配置信息，一般保存在设备树里。
&lt;ul&gt;
&lt;li&gt;设备树对GPIO分为了&amp;amp;pio和&amp;amp;r_pio，在PL0及PL0之后的引脚要用&amp;amp;r_pio&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
">全志v853s外设——GPIO</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/gige-vision-20-ji-lu/"" data-c="
          &lt;h2 id=&#34;找到设备&#34;&gt;找到设备&lt;/h2&gt;
&lt;p&gt;None&lt;/p&gt;
&lt;h2 id=&#34;传输过程&#34;&gt;传输过程&lt;/h2&gt;
&lt;p&gt;设备的第一个GVCP端口号必须是：3956&lt;/p&gt;
&lt;p&gt;GVCP协议报文的最他传输单元MTU为576字节，包括IP头、UDP头、GVCP头和数据负载，控制头和数据段部分必须是4字节的倍数&lt;/p&gt;
&lt;h3 id=&#34;通道&#34;&gt;通道&lt;/h3&gt;
&lt;p&gt;GigE Vision需要设计的网络端口有三种，分别对应：1个控制通道，0-512个流通道，0或1个消息通道&lt;/p&gt;
&lt;h4 id=&#34;控制通道&#34;&gt;控制通道&lt;/h4&gt;
&lt;p&gt;设计需求：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;控制通道中，必须优先创建一个控制通道。&lt;/li&gt;
&lt;li&gt;有程序请求寄存器操作后，必须立即返回响应，而不是操作完成时。&lt;/li&gt;
&lt;li&gt;每个程序尝试连接后可以再创建一个控制通道&lt;/li&gt;
&lt;li&gt;设备端必须记录主机端的IP地址、源UDP端口、特权类型（独占访问，控制访问，监控访问）&lt;/li&gt;
&lt;li&gt;独占访问：通过写CCP寄存器可以使能独占访问，此时只能识别其他程序发送的DISCOVERY_CMD、DORCEIP_CMD等少数命令，其他命令一概返回错误。也不允许其他程序访问时创建第二个控制通道&lt;/li&gt;
&lt;li&gt;控制访问：允许多个设备访问&lt;/li&gt;
&lt;li&gt;监控访问：允许多个设备访问，一般用于调试&lt;/li&gt;
&lt;li&gt;程序对CCP寄存器写请求特权来打开通道，通过ACK消息确认错误消息。通过对CCP寄存器写0来关闭通道，并释放主程序的特权&lt;/li&gt;
&lt;li&gt;设备接到主程序的任意有效命令后，必须重置心跳。少数命令除外，如ACTION_CMD&lt;/li&gt;
&lt;li&gt;主程序可以通过读CCP寄存器来重置心跳。主程序也可以通过不能读CCP寄存器或读取非预期数值时来判断通道是否断开。&lt;/li&gt;
&lt;li&gt;心跳默认速率每秒1次，默认心跳超时时间3s。超时后断开通道。&lt;/li&gt;
&lt;li&gt;当程序发出命令后，命令的执行时间超过程序的预期，则设备可以发出PENDING_ACK消息通知程序尝试等待命令执行完成。&lt;/li&gt;
&lt;li&gt;如果可以保证分组按序到达，设备端接收分组时检查分组ID出现缺失后需要立马请求重发分组，以防重传的分组在发送端中丢失。如果不能保存分组按序到达，可以添加超时时间来判断是否丢失数据&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;寄存器设计：&lt;br&gt;
寄存器包括有控制通道特权寄存器、控制切换键寄存器、心跳超时寄存器、待定超时寄存器&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DISCOVERY&lt;/li&gt;
&lt;li&gt;FORCEIP&lt;/li&gt;
&lt;li&gt;READREG&lt;/li&gt;
&lt;li&gt;WRITEREG&lt;/li&gt;
&lt;li&gt;READMEM&lt;/li&gt;
&lt;li&gt;WRITEMEM&lt;/li&gt;
&lt;li&gt;PACKETRESEND&lt;/li&gt;
&lt;li&gt;PENDING&lt;/li&gt;
&lt;li&gt;ACTION&lt;br&gt;
详情见GigE Vision 2.0协议&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;流通道&#34;&gt;流通道&lt;/h4&gt;
&lt;p&gt;设计需求：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;可以支持0~512个流通道，GVSP流的通道必须有序，不允许索引中间有间隔&lt;/li&gt;
&lt;li&gt;发送数据的流通道比接收的流通道索引号更低&lt;/li&gt;
&lt;li&gt;流通到上的相机图像被拆分成合适大小的数据块，并通过id编号&lt;/li&gt;
&lt;li&gt;打开流通道：将主机端口写入SCPx寄存器，目的地址写入SCDAx寄存器可以打开一个流通道，发送端使用UDP端口范围为[49152,65535]。保证SCPx寄存器的host_port字段为非0值，通道被打开时，当前数据块索引block_id/block_id64必须重置为1&lt;/li&gt;
&lt;li&gt;关闭流通道：将SCPx寄存器清0来关闭流通到。相机可通过采集启动、采集停止来停止流的推送&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;寄存器设计：&lt;/p&gt;
&lt;h4 id=&#34;消息通道&#34;&gt;消息通道&lt;/h4&gt;
&lt;p&gt;设计需求：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;设备可以发送异步消息到主程序&lt;/li&gt;
&lt;li&gt;主程序通过想MCDA寄存器写入目标IP，向MCP寄存器写入目标端口，来打开消息通道。&lt;/li&gt;
&lt;li&gt;允许重传。在MCRC寄存器设置重发次数，次数为0表示不重传。&lt;/li&gt;
&lt;li&gt;允许不应答 。通过设置MCTT寄存器的ACKNOWLEGDE实现&lt;br&gt;
寄存器设计：&lt;/li&gt;
&lt;li&gt;EVENT&lt;/li&gt;
&lt;li&gt;EVENTDATA&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;其他&#34;&gt;其他&lt;/h3&gt;
&lt;p&gt;设计需求&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;每个设备必须有XML设备描述文件，支持无压缩、或ZIP压缩&lt;/li&gt;
&lt;li&gt;必须支持READMEM来读取MXL文件的一级URL和二级URL&lt;/li&gt;
&lt;/ol&gt;
">GigE Vision 2.0 记录</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/da-jian-qt5-kai-fa-huan-jing/"" data-c="
          &lt;p&gt;在ubuntu22.04上用qt5开发ui，一般选择兼容和稳定较好的5.15。开发时选择qtcreator和qt design studio配合来加速开发过程。&lt;/p&gt;
&lt;h2 id=&#34;一-搭建环境&#34;&gt;一、搭建环境&lt;/h2&gt;
&lt;h3 id=&#34;11-安装qt5和qtcreator&#34;&gt;1.1 安装qt5和qtcreator&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;安装&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt install qtbase5-dev qtchooser qt5-qmake qtbase5-dev-tools qtcreator qtdeclarative5-dev

# 查看qt版本
qmake -v        # 输出：Using Qt version 5.15.3 in /usr/lib/x86_64-linux-gnu
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;运行qt-creator&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;直接命令行输入qtcreator即可运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;qtcreator
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-安装qt-design-studio&#34;&gt;1.2 安装qt design studio&lt;/h3&gt;
&lt;p&gt;可以直接去官网下载&lt;a href=&#34;https://download.qt.io/official_releases/qtdesignstudio/2.3.1/&#34;&gt;社区版&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;安装过程需要输入qt账号，如果没有可以在&lt;a href=&#34;https://login.qt.io/register&#34;&gt;这里&lt;/a&gt;注册一个账号。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;开始安装&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;chmod +x qt-designstudio-linux-x86_64-2.3.1-community.run
./qt-designstudio-linux-x86_64-2.3.1-community.run
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;运行qt design studio&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;进入安装目录运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd qtdesignstudio-2.3.1-community/bin/
./qtdesignstudio
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-创建工程&#34;&gt;二、创建工程&lt;/h2&gt;
&lt;h3 id=&#34;21-创建qt-creator工程&#34;&gt;2.1 创建qt-creator工程&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;打开qtcreator并点击New&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693201978962.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择Qt Quick Application&lt;br&gt;
只有选择Qt Quick Application工程，才能与Qt design studio联合开发&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202019279.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置工程名称和工程路径&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202222957.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置编译系统，用默认的qmake&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202229367.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置qt版本，选qt5.15&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202265719.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选语言接口，先默认不选&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择开发套件，用默认的&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202276303.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择版本控制系统，选用git&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202325364.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;完成&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;21-用qt-design-studio加载创建的工程&#34;&gt;2.1 用qt design studio加载创建的工程&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;打开qml文件&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202489812.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202515602.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改窗口图&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202505087.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;完成&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;三-运行&#34;&gt;三、运行&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;在qt-creator下编译运行&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202603684.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;观察结果与qt design studio一致&lt;br&gt;
&lt;img src=&#34;https://lxowalle.github.io/post-images/1693202610866.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
">搭建qt5开发环境</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/kai-fa-spyder-ide/"" data-c="
          &lt;p&gt;spyder的环境搭建参考&lt;a href=&#34;https://github.com/spyder-ide/spyder/blob/master/CONTRIBUTING.md&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-安装基本环境&#34;&gt;一、安装基本环境&lt;/h2&gt;
&lt;h3 id=&#34;1-下载spyder-源码&#34;&gt;1. 下载spyder-源码&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/spyder-ide/spyder.git
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-下载canda&#34;&gt;2. 下载canda&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://repo.anaconda.com/archive/?C=M&amp;amp;O=A&#34;&gt;下载链接&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 1. 开始安装
chmod +x Anaconda3-2023.07-2-Linux-x86_64.sh
./Anaconda3-2023.07-2-Linux-x86_64.sh
# 2. 进入许可证界面时，按下q并输入yes
# 3. 安装到默认目录~/anaconda3
# 4. 安装完成后输入yes来初始化
# 5. 更新系统环境
source ~/.bashrc
# 6. 完成，查看版本
conda --version
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-创建环境&#34;&gt;二、创建环境&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd spyder
conda create -n spyder-dev -c conda-forge python=3.9
conda activate spyder-dev
conda env update --file requirements/main.yml

# Linux环境
conda env update --file requirements/linux.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-运行&#34;&gt;三、运行&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd spyder
python bootstrap.py 
&lt;/code&gt;&lt;/pre&gt;
">搭建spyder-ide开发环境</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/yong-rust-bian-cheng-esp32c3-chu-ti-yan/"" data-c="
          &lt;p&gt;参考：&lt;br&gt;
&lt;a href=&#34;https://esp-rs.github.io/book/installation/riscv.html&#34;&gt;The Rust on ESP Book&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-搭建开发环境&#34;&gt;一、搭建开发环境&lt;/h2&gt;
&lt;p&gt;买了ESP32-DevKitM-1开发板，用的是RISCV架构的ESP32C3芯片。ESP32已经支持no-std和std两种rust库。现在准备把两种库都体验一下，先搭建基本的开发环境。&lt;/p&gt;
&lt;p&gt;注意：这里没有考虑Xtensa架构，如果是Xtensa架构的芯片（例如ESP32）则需要参考&lt;a href=&#34;https://esp-rs.github.io/book/installation/riscv-and-xtensa.html&#34;&gt;这里&lt;/a&gt;来搭建开发环境&lt;/p&gt;
&lt;h3 id=&#34;11-安装no_std库的环境&#34;&gt;1.1 安装no_std库的环境&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 安装nightly工具链
rustup toolchain install nightly --component rust-src

# 添加ESP32C3需要的工具链
rustup target add riscv32imc-unknown-none-elf # For ESP32-C2 and ESP32-C3

# 其他环境
cargo install cargo-generate
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-安装std库的环境&#34;&gt;1.2 安装std库的环境&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 安装nightly工具链
rustup toolchain install nightly --component rust-src

# 安装llvm编译器
sudo apt install llvm

# 其他环境
sudo apt install git python3
cargo install ldproxy
cargo install cargo-generate
cargo install espflash
cargo install espmonitor
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-使用no_std库开发&#34;&gt;二、使用no_std库开发&lt;/h2&gt;
&lt;p&gt;乐鑫强烈推荐用模板来创建工程，节省时间并防止可能的错误。&lt;/p&gt;
&lt;h3 id=&#34;21-下载模板&#34;&gt;2.1 下载模板&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载no_sta模板
cd ~/liuxo/esp
git clone https://github.com/esp-rs/esp-template.git

# 创建模板（工程名选择no_std_test，芯片选择esp32c3，高级配置选false）
cargo generate esp-rs/esp-template

# 编译运行
cd no_std_test
cargo build
cargo run
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;遇到串口号不正确的情况，可以直接去config.toml文件中修改下载命令。如下将串口号设置为/dev/ttyCH341USB0，波特率设置为1Mbps&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[target.riscv32imc-unknown-none-elf]
runner = &amp;quot;espflash flash -p /dev/ttyCH341USB0 -b 1000000 --monitor&amp;quot;

# 完成，现在可以在终端看到&amp;quot;hello world&amp;quot;的打印了
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://lxowalle.github.io/post-images/1692015446707.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;三-使用std库开发&#34;&gt;三、使用std库开发&lt;/h2&gt;
&lt;h3 id=&#34;21-下载模板-2&#34;&gt;2.1 下载模板&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 下载sta模板
cd ~/liuxo/esp
git clone https://github.com/esp-rs/esp-idf-template.git

# 创建模板（工程名选择std_test，芯片选择esp32c3，高级配置选false）
cargo generate esp-rs/esp-template

# 编译运行
cd std_test
cargo build
cargo run
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;std库没有跑通，遇到了&lt;code&gt;error: linking with &lt;/code&gt;ldproxy&lt;code&gt; failed: exit status: 1&lt;/code&gt;的错误，从日志看是工具链的原因，不想换工具链所以先不管这个问题了，先用no_std库。&lt;/p&gt;
&lt;p&gt;吐槽一下，只打印hello_world，no_std工程有800+M，std工程有3G，相比别的语言实在是太占磁盘了~&lt;/p&gt;
">用RUST编程ESP32C3初体验</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/linux-lian-jie-bu-shang-wifi-shi-de-jie-jue-fang-fa/"" data-c="
          &lt;p&gt;Linux连接不上wifi时可以尝试用过命令行一步一步的扫描和连接，来排查是哪一步的错误。参考自&lt;a href=&#34;https://blog.csdn.net/Daniel_Leung/article/details/100109150&#34;&gt;linux wifi开机自动连接 wifi连接&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;1-确认驱动是否安装&#34;&gt;1. 确认驱动是否安装&lt;/h2&gt;
&lt;p&gt;通过ifconfig命令找到是否存在网卡，如果没找到，则说明未识别到相关驱动驱动&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ifconfig -a
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-启用无线网卡&#34;&gt;2. 启用无线网卡&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo ip link set 网卡 up
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-查询可以连接的wifi&#34;&gt;3. 查询可以连接的wifi&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo iw 网卡 scan | grep SSID
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-连接wifi&#34;&gt;4. 连接wifi&lt;/h2&gt;
&lt;p&gt;创建一个wifi_connect.conf文件，并手动连接。文件名不重要&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# wifi_connect.conf
ctrl_interface=/var/run/wpa_supplicant
network={
        ssid=&amp;quot;wifi_ssid&amp;quot;
        psk=&amp;quot;wifi_passwd&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;连接wifi&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo wpa_supplicant -B -c wifi_connect.conf -i 网卡
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-通过dhcpc服务获取ip&#34;&gt;5. 通过dhcpc服务获取ip&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo udhcpc -b -i 网卡
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果没有udhcpc命令，可以尝试udhclient命令&lt;/p&gt;
&lt;h2 id=&#34;6-测试网络是否正常&#34;&gt;6. 测试网络是否正常&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ping baidu.com
&lt;/code&gt;&lt;/pre&gt;
">Linux连接不上WIFI时的解决方法</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/ben-ji-bu-shu-chatgpt-fu-wu/"" data-c="
          &lt;p&gt;参考自&lt;a href=&#34;https://zblogs.top/deploy-chatgpt-on-your-server/&#34;&gt;[小白向教程] 在服务器上部署chatgpt&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;一-安装nginx&#34;&gt;一、安装Nginx&lt;/h2&gt;
&lt;p&gt;Nginx是异步框架的网页服务器，也可以用作反向代理、负载平衡器和HTTP缓存。该软件由俄罗斯程式设计师伊戈尔·赛索耶夫（Игорь Сысоев）开发并于2004年首次公开发布。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt install nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-部署chatgpt&#34;&gt;二、部署ChatGPT&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;克隆基于腾讯云轻量级应用服务器的开源项目到服务器内&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/sbaliyun/chatgpt-html.git
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将项目放到Nginx网站文件下&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo mv chatgpt-html/* /var/www/html/
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;获取OpenAI密钥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在&lt;a href=&#34;https://platform.openai.com/overview&#34;&gt;这里&lt;/a&gt;登录后，点击个人头像-&amp;gt;选择&lt;code&gt;View API Keys&lt;/code&gt;-&amp;gt;点击&lt;code&gt;Create new secret key&lt;/code&gt;生成一个密钥，并先保存该密钥，待会会用&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;将OpenAI密钥添加到项目文件的index.html文件中&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo vim /var/www/html/index.html
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;用vim编辑器打开，并输入/Bearer找到&amp;quot;Bearer sk-123456&amp;quot;并替换为Open AI的密钥，然后按下:wq保存并退出&lt;br&gt;
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&lt;/p&gt;
&lt;h2 id=&#34;三-使用本机的域名或ip开始使用chatgpt&#34;&gt;三、使用本机的域名或IP开始使用ChatGPT&lt;/h2&gt;
&lt;p&gt;用ifconfig看看自己的IP地址，然后在浏览器直接输入ip并访问&lt;/p&gt;
&lt;h2 id=&#34;问题&#34;&gt;问题&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;可以登录到网页，但是发问时一直没有回复&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;仍然未解决，看起来是SSL证书或者代理的问题&lt;/p&gt;
">本机部署chatgpt服务</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/ros2-shi-yong-client-ku/"" data-c="
          &lt;p&gt;下面的例子将会使用colcon来构建代码。注意colcon是构建工具，不是构建架构，实际代码在编译的时候仍然是使用cmake、makefile、autotools、ament等构建架构来完成构建。colcon的作用是管理和构建不同构建架构的工程&lt;/p&gt;
&lt;h2 id=&#34;一-创建工作区&#34;&gt;一、创建工作区&lt;/h2&gt;
&lt;h3 id=&#34;11-开始构建海龟模拟器包&#34;&gt;1.1 开始构建海龟模拟器包&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 拉取海龟模拟器代码
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src
git clone https://github.com/ros/ros_tutorials.git -b iron

# 检查依赖
cd ~/ros2_ws
rosdep install -i --from-path src --rosdistro iron -y

# 开始构建
colcon build
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;拉取的ros软件包中如果存在COLCON_IGNORE文件，则表示构建时忽略该包&lt;/p&gt;
&lt;h3 id=&#34;12-创建覆盖层&#34;&gt;1.2 创建覆盖层&lt;/h3&gt;
&lt;p&gt;打开另一个终端来运行编译好的环境&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 导入ros2新环境
cd ~/ros2_ws
source install/local_setup.bash

# 运行海龟模拟器
ros2 run turtlesim turtlesim_node
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果分不清运行的是不是编译的海龟模拟器时，可以手动修改海龟模拟器的标题“TurtleSim”修改为&amp;quot;Hello TurtleSim&amp;quot;，再运行&lt;code&gt;ros2 run turtlesim turtlesim_node&lt;/code&gt;可以看到标题会变成&amp;quot;Hello TurtleSim&amp;quot;&lt;/p&gt;
&lt;h2 id=&#34;二-创建包&#34;&gt;二、创建包&lt;/h2&gt;
&lt;p&gt;ros2的代码基本是以包为单位进行传播，ros2使用ament作为构建系统，使用colcon作为构建工具，当然也可以使用CMake、Python或其他构建系统来创建包。&lt;/p&gt;
&lt;h3 id=&#34;21-包的组成&#34;&gt;2.1 包的组成&lt;/h3&gt;
&lt;p&gt;CMake包的组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CMakeLists.txt：描述如何在包中构建代码的文件&lt;/li&gt;
&lt;li&gt;include/&amp;lt;package_name&amp;gt;：包含包的公共标头的目录&lt;/li&gt;
&lt;li&gt;package.xml：包含有关包的元信息的文件&lt;/li&gt;
&lt;li&gt;src：包含包的源代码的目录&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python包的组成:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;resource/&amp;lt;package_name&amp;gt;：包的标记文件&lt;/li&gt;
&lt;li&gt;setup.cfg：当包有可执行文件时是必需的，因此可以找到它们ros2 run&lt;/li&gt;
&lt;li&gt;setup.py：包含如何安装软件包的说明&lt;/li&gt;
&lt;li&gt;package.xml：包含有关包的元信息的文件&lt;/li&gt;
&lt;li&gt;&amp;lt;package_name&amp;gt;：与您的包同名的目录，ROS 2 工具使用它来查找您的包，包含__init__.py&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;22-创建cmake包&#34;&gt;2.2 创建CMake包&lt;/h3&gt;
&lt;p&gt;构建一个将CMake作为构建系统的包。构建时如果没有添加&lt;code&gt;--license&lt;/code&gt;,&lt;code&gt;--description&lt;/code&gt;命令，则需要手动在package.xml中添加liscense和description，这两个字段在发布包的时候有用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 构建
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_cmake &amp;lt;package_name&amp;gt;

# 编译
cd ~/ros2_ws/
colcon build --packages-select &amp;lt;package_name&amp;gt;

# 运行
source install/local_setup.bash
ros2 run &amp;lt;package_name&amp;gt; &amp;lt;package_node_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;示例：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 示例
ros2 pkg create --build-type ament_cmake --node-name my_cmake_node my_cmake_pkg --license Apache-2.0  --description just_for_test      # 创建包
colcon build --packages-select my_cmake_pkg  # 编译目标包
ros2 run my_cmake_pkg my_cmake_node # 运行包
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;22-创建python包&#34;&gt;2.2 创建Python包&lt;/h3&gt;
&lt;p&gt;构建一个将Python作为构建系统的包。构建时如果没有添加&lt;code&gt;--license&lt;/code&gt;,&lt;code&gt;--description&lt;/code&gt;命令，则需要手动在package.xml中添加liscense和description，这两个字段在发布包的时候有用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 构建
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python &amp;lt;package_name&amp;gt;

# 编译
cd ~/ros2_ws/
colcon build --packages-select &amp;lt;package_name&amp;gt;

# 运行
source install/local_setup.bash
ros2 run &amp;lt;package_name&amp;gt; &amp;lt;package_node_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;示例：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 示例
ros2 pkg create --build-type ament_python --node-name my_python_node my_python_pkg --license Apache-2.0  --description just_for_test      # 创建包
colcon build --packages-select my_python_pkg  # 编译目标包
ros2 run my_python_pkg my_python_node # 运行包
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-编写发布者和订阅者&#34;&gt;三、编写发布者和订阅者&lt;/h2&gt;
&lt;h3 id=&#34;31-用c编写&#34;&gt;3.1 用C++编写&lt;/h3&gt;
&lt;p&gt;创建工程并添加基础代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 先创建一个ROS包
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_cmake cpp_pubsub

# 下载发布者、订阅者的示例代码
cd cpp_pubsub/src
wget -O publisher_member_function.cpp https://raw.githubusercontent.com/ros2/examples/iron/rclcpp/topics/minimal_publisher/member_function.cpp
wget -O subscriber_member_function.cpp https://raw.githubusercontent.com/ros2/examples/iron/rclcpp/topics/minimal_subscriber/member_function.cpp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在package.xml中添加依赖&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# in src/cpp_pubsub/package.xml
# 1/2
&amp;lt;description&amp;gt;Examples of minimal publisher/subscriber using rclcpp&amp;lt;/description&amp;gt;
&amp;lt;maintainer email=&amp;quot;you@email.com&amp;quot;&amp;gt;Your Name&amp;lt;/maintainer&amp;gt;
&amp;lt;license&amp;gt;Apache License 2.0&amp;lt;/license&amp;gt;

# 2/2 在buildtool依赖项后面添加
&amp;lt;depend&amp;gt;rclcpp&amp;lt;/depend&amp;gt;
&amp;lt;depend&amp;gt;std_msgs&amp;lt;/depend&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在CMakeLists.txt中添加依赖&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# in src/cpp_pubsub/CMakeLists.txt

# 添加包
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(std_msgs REQUIRED)

# 添加可执行文件的依赖
# talker的依赖
add_executable(talker src/publisher_member_function.cpp)
ament_target_dependencies(talker rclcpp std_msgs)

# listener的依赖
add_executable(listener src/subscriber_member_function.cpp)
ament_target_dependencies(listener rclcpp std_msgs)

# 添加安装路径
install(TARGETS
  talker
  listener
  DESTINATION lib/${PROJECT_NAME})
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编译运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 准备编译
cd ~/ros2_ws

# 检查依赖
rosdep install -i --from-path src --rosdistro iron -y

# 编译
colcon build --packages-select cpp_pubsub

# 打开一个新终端，并导入环境变量，然后运行talker节点
cd ~/ros2_ws
. install/setup.bash
ros2 run cpp_pubsub talker

# 打开一个新终端，并导入环境变量，然后运行listener节点
cd ~/ros2_ws
. install/setup.bash
ros2 run cpp_pubsub listener
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-python编写&#34;&gt;3.2 Python编写&lt;/h3&gt;
&lt;p&gt;创建工程并添加基础代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 先创建一个ROS包
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python py_pubsub

# 下载发布者、订阅者的示例代码
cd py_pubsub/py_pubsub
wget https://raw.githubusercontent.com/ros2/examples/iron/rclpy/topics/minimal_publisher/examples_rclpy_minimal_publisher/publisher_member_function.py
wget https://raw.githubusercontent.com/ros2/examples/iron/rclpy/topics/minimal_subscriber/examples_rclpy_minimal_subscriber/subscriber_member_function.py
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在package.xml中添加依赖&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# in src/py_pubsub/package.xml
# 1/2
&amp;lt;description&amp;gt;Examples of minimal publisher/subscriber using rclcpp&amp;lt;/description&amp;gt;
&amp;lt;maintainer email=&amp;quot;you@email.com&amp;quot;&amp;gt;Your Name&amp;lt;/maintainer&amp;gt;
&amp;lt;license&amp;gt;Apache License 2.0&amp;lt;/license&amp;gt;

# 2/2 
&amp;lt;depend&amp;gt;rclcpp&amp;lt;/depend&amp;gt;
&amp;lt;depend&amp;gt;std_msgs&amp;lt;/depend&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在setup.py中添加依赖&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# in src/cpp_pubsub/setup.py
setup(
    # ...
    maintainer=&#39;YourName&#39;,
    maintainer_email=&#39;you@email.com&#39;,
    description=&#39;Examples of minimal publisher/subscriber using rclpy&#39;,
    license=&#39;Apache License 2.0&#39;,
    # ...
    entry_points={
            &#39;console_scripts&#39;: [
                    &#39;talker = py_pubsub.publisher_member_function:main&#39;,
                    &#39;listener = py_pubsub.subscriber_member_function:main&#39;,
            ],
    },
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编译运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 准备编译
cd ~/ros2_ws

# 检查依赖
rosdep install -i --from-path src --rosdistro iron -y

# 编译
colcon build --packages-select py_pubsub

# 打开一个新终端，并导入环境变量，然后运行talker节点
cd ~/ros2_ws
. install/setup.bash
ros2 run py_pubsub talker

# 打开一个新终端，并导入环境变量，然后运行listener节点
cd ~/ros2_ws
. install/setup.bash
ros2 run py_pubsub listener
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;问题&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编译python工程时出现错误&lt;code&gt;&amp;quot;/usr/lib/python3/dist-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.&amp;quot;&lt;/code&gt;，怀疑是setuptools版本过于新，可以降低版本后可以解决&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 查看版本（查询到当前版本为59.6.0）
pip show setuptools

# 降级安装58.2.0版
pip install setuptools==58.2.0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;四-编写服务和客户端&#34;&gt;四、编写服务和客户端&lt;/h2&gt;
&lt;p&gt;创建包的过程和编写发布者订阅者的过程一致，只是代码不同，就不赘述了。详情去&lt;a href=&#34;https://docs.ros.org/en/iron/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html&#34;&gt;这里&lt;/a&gt;看官方资料&lt;/p&gt;
&lt;h2 id=&#34;五-自定义msg和srv文件&#34;&gt;五、自定义msg和srv文件&lt;/h2&gt;
&lt;h3 id=&#34;51-创建自定义参数包&#34;&gt;5.1 创建自定义参数包&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;在msg目录下创建Num.msg，在srv目录下创建AddThreeInts.srv&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd ros2_ws/src
ros2 pkg create --build-type ament_cmake tutorial_interfaces

cd tutorial_interfaces
mkdir msg srv

cd tutorial_interfaces/msg
touch Num.msg Sphere.msg

cd tutorial_interfaces/srv
touch AddThreeInts.srv
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;添加参数内容到Num.msg和Sphere.msg&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;将下面内容填写到Num.msg中&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;int64 num
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将下面内容填写到Sphere.msg中&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;geometry_msgs/Point center
float64 radius
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;添加参数内容到AddThreeInts.srv&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;将下面内容填写到AddThreeInts.srv中。该服务请求a、b、c三个参数，并通过sum进行响应。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;int64 a
int64 b
int64 c
---
int64 sum
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;配置CMakeLists.txt&lt;br&gt;
要将您定义的接口转换为特定于语言的代码（例如 C++ 和 Python），以便它们可以在这些语言中使用，请将以下行添加到CMakeLists.txt：&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;find_package(geometry_msgs REQUIRED)
find_package(rosidl_default_generators REQUIRED)

set(msg_files
    &amp;quot;msg/Num.msg&amp;quot;
    &amp;quot;msg/Sphere.msg&amp;quot;
    DEPENDENCIES geometry_msgs
    )

set(srv_files
    &amp;quot;srv/AddThreeInts.srv&amp;quot;)

rosidl_generate_interfaces(${PROJECT_NAME}
    ${msg_files}
    ${srv_files}
)

# 注：如果在包内使用自定义的接口，则需要添加以下依赖
# rosidl_get_typesupport_target(cpp_typesupport_target ${PROJECT_NAME} rosidl_typesupport_cpp)
# target_link_libraries(user_exec_demo &amp;quot;${cpp_typesupport_target}&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;配置package.xml&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;&amp;lt;depend&amp;gt;geometry_msgs&amp;lt;/depend&amp;gt;
&amp;lt;buildtool_depend&amp;gt;rosidl_default_generators&amp;lt;/buildtool_depend&amp;gt;
&amp;lt;exec_depend&amp;gt;rosidl_default_runtime&amp;lt;/exec_depend&amp;gt;
&amp;lt;member_of_group&amp;gt;rosidl_interface_packages&amp;lt;/member_of_group&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;构建msg和srv接口包&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;开始构建&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 构建接口包
cd ros2_ws
colcon build --packages-select tutorial_interfaces
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;构建完成后，打开一个新终端来查看构建的接口是否生效&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 查看新添加的msg接口
ros2 interface show tutorial_interfaces/msg/Num

# 查看新添加的srv接口
ros2 interface show tutorial_interfaces/srv/AddThreeInts
&lt;/code&gt;&lt;/pre&gt;
">[ROS2] Client库使用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/ros2-cli-gong-ju-shi-yong/"" data-c="
          &lt;p&gt;参考&lt;a href=&#34;https://docs.ros.org/en/iron/Installation.html&#34;&gt;ROS2 IRON指南&lt;/a&gt;安装基本的环境。注意riscv架构的平台目前还不支持ROS2(2023-07-25)&lt;/p&gt;
&lt;p&gt;参考&lt;a href=&#34;https://docs.ros.org/en/iron/Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html&#34;&gt;使用turtlesim、ros2、 和rqt&lt;/a&gt;来&lt;/p&gt;
&lt;h2 id=&#34;基础环境&#34;&gt;基础环境&lt;/h2&gt;
&lt;p&gt;安装ros2后不能立马使用，需要将ROS2环境添加到环境变量中才能进一步操作。&lt;/p&gt;
&lt;p&gt;添加步骤：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 添加基础环境
echo &amp;quot;source /opt/ros/iron/setup.bash&amp;quot; &amp;gt;&amp;gt; ~/.bashrc

# 添加域ID，为了系统安全，域ID的值一般选0~101和215~232
echo &amp;quot;export ROS_DOMAIN_ID=&amp;lt;your_domain_id&amp;gt;&amp;quot; &amp;gt;&amp;gt; ~/.bash_profile

# 设置通信范围
echo &amp;quot;export  ROS_AUTOMATIC_DISCOVERY_RANGE=SUBNET&amp;quot; &amp;gt;&amp;gt; ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;使用turtlesim和rqt&#34;&gt;使用turtlesim和rqt&lt;/h2&gt;
&lt;p&gt;turtlesim工具是一个海龟模拟器，一般被用来学习ROS2的通信机制。rqt是一个图形窗口，用来将可视化的展示各节点的服务、主题关系&lt;/p&gt;
&lt;h3 id=&#34;安装turtlesim和rqt&#34;&gt;安装turtlesim和rqt&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt update
sudo apt install ros-iron-turtlesim
sudo apt install ~nros-iron-rqt*
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;使用turtlesim和rqt-2&#34;&gt;使用turtlesim和rqt&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 启动一个节点，用来生成海龟
ros2 run turtlesim turtlesim_node
# 启动一个节点，用来控制海龟
ros2 run turtlesim turtle_teleop_key
# 启动rqt，用来监测和控制海龟
rqt
# 启动rqt_graph，用来图形化显示节点间的关系
rqt_graph
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;更详细的使用方法参考&lt;a href=&#34;https://docs.ros.org/en/iron/Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;节点&#34;&gt;节点&lt;/h2&gt;
&lt;p&gt;ROS2中以节点为基本单位，每个节点之间可以通过topics（主题）、services（服务）、actions（操作）或parameters（参数）来通信。&lt;br&gt;
ROS2通过节点来实现功能单一、模块化。&lt;/p&gt;
&lt;p&gt;通过命令行来操作节点&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 列出节点
ros2 node list

# 查看节点信息
ros2 node info &amp;lt;节点名&amp;gt; # 例如ros2 node info /turtlesim

# 将turtlesim_node的默认节点重映射为my_turtle节点
ros2 run turtlesim turtlesim_node --ros-args --remap __node:=my_turtle
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;主题&#34;&gt;主题&lt;/h2&gt;
&lt;p&gt;主题是ROS2的一种基于发布者-订阅者的通信机制，节点可以将数据发布到任意数量的主题，并且同时订阅任意数量的主题。主题可以多对多。&lt;/p&gt;
&lt;p&gt;通过命令行来操作主题&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 列出主题
ros2 topic list

# 列出主题（参数-t可以列出主题类型）
ros2 topic list -t

# # 列出指定主题的类型
ros2 topic type &amp;lt;主题名&amp;gt;

# 查看主题订阅数量、发布数量
ros2 topic info &amp;lt;主题名&amp;gt;

# 实时查看主题内的消息
ros2 topic echo &amp;lt;主题名&amp;gt; # 例如：ros2 topic echo /turtle1/cmd_vel

# 查看主题内消息的速率
ros2 topic hz &amp;lt;topic_name&amp;gt;

# 向主题发布消息
ros2 topic pub &amp;lt;topic_name&amp;gt; &amp;lt;msg_type&amp;gt; &#39;&amp;lt;args&amp;gt;&#39;

# 示例：只发送一次，向主题/turtle1/cmd_vel发布类型为geometry_msgs/msg/Twist的消息，注意消息用yaml语法输入
ros2 topic pub --once /turtle1/cmd_vel geometry_msgs/msg/Twist &amp;quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}&amp;quot;

# 示例：每1s发送一次，向主题/turtle1/cmd_vel发布类型为geometry_msgs/msg/Twist的消息，注意消息用yaml语法输入
ros2 topic pub --rate 1 /turtle1/cmd_vel geometry_msgs/msg/Twist &amp;quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;服务&#34;&gt;服务&lt;/h2&gt;
&lt;p&gt;服务是ROS2一种基于调用-响应的通信机制。与主题的差异是，主题一般是持续的更新数据，而服务只在客户端调用时才提供数据。&lt;/p&gt;
&lt;p&gt;通过命令行来操作服务&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 列出服务
ros2 service list

# 列出服务（参数-t可以列出服务类型）
ros2 service list -t

# 列出指定服务的类型
ros2 service type &amp;lt;service_name&amp;gt;

# 查找某个类型的所有服务
 ros2 topic find &amp;lt;service_type&amp;gt;

 # 调用服务
 ros2 service call &amp;lt;service_name&amp;gt; &amp;lt;service_type&amp;gt; &amp;lt;arguments&amp;gt;

 # 示例：调用spawn服务新生成一直海龟
 ros2 service call /spawn turtlesim/srv/Spawn &amp;quot;{x: 2, y: 2, theta: 0.2, name: &#39;&#39;}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;动作&#34;&gt;动作&lt;/h2&gt;
&lt;p&gt;动作是ROS2建立在主题和服务的基础上的基于目标-反馈-结果的通信类型。动作与服务类似，但是可以中断上次操作。&lt;/p&gt;
&lt;p&gt;通过命令行来操作动作&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 列出动作
ros2 action list

# 列出动作（参数-t可以列出动作类型）
ros2 actions list

# 列出动作的客户端数量、服务器数量
ros2 action info &amp;lt;action_name&amp;gt;

# 查看动作的接口结构
ros2 action info &amp;lt;action_type&amp;gt;

# 发起动作。&amp;lt;values&amp;gt;需要采用 YAML 格式，添加--feedback后可以获取实时反馈
ros2 action send_goal &amp;lt;action_name&amp;gt; &amp;lt;action_type&amp;gt; &amp;lt;values&amp;gt;


# 示例：查看动作/turtlesim/action/RotateAbsolute的结构
ros2 interface show turtlesim/action/RotateAbsolute

# 示例：向动作/turtle1/rotate_absolute发起旋转1.57？（反正是个动作）
ros2 action send_goal /turtle1/rotate_absolute turtlesim/action/RotateAbsolute &amp;quot;{theta: 1.57}&amp;quot;

# 示例：向动作/turtle1/rotate_absolute发起旋转1.57，并获取实时反馈
ros2 action send_goal /turtle1/rotate_absolute turtlesim/action/RotateAbsolute &amp;quot;{theta: -1.57}&amp;quot; --feedback
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;参数&#34;&gt;参数&lt;/h2&gt;
&lt;p&gt;参数是节点的配置值。您可以将参数视为节点设置。节点可以将参数存储为整数、浮点数、布尔值、字符串和列表。在ROS 2中，每个节点维护自己的参数&lt;/p&gt;
&lt;p&gt;通过命令行来操作参数&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 列出参数
ros2 param list

# 获取指定节点的参数类型和参数值
ros2 param get &amp;lt;node_name&amp;gt; &amp;lt;parameter_name&amp;gt;

# 设置指定节点的参数类型和参数值
ros2 param set &amp;lt;node_name&amp;gt; &amp;lt;parameter_name&amp;gt; &amp;lt;value&amp;gt;

# 导出指定节点的所有参数值
ros2 param dump &amp;lt;node_name&amp;gt;

# 导入参数到指定节点(parameter_file格式和dump出的格式一致)
ros2 param load &amp;lt;node_name&amp;gt; &amp;lt;parameter_file&amp;gt;

# 节点启动时加载参数文件
ros2 run &amp;lt;package_name&amp;gt; &amp;lt;executable_name&amp;gt; --ros-args --params-file &amp;lt;file_name&amp;gt;

# 示例：获取/turtlesim节点的background_g参数的类型和值
ros2 param get /turtlesim background_g

# 示例：设置/turtlesim节点的background_g参数值为20
ros2 param set /turtlesim background_g 20

# 示例：导出节点/turtlesim的参数到turtlesim.yaml文件
ros2 param load /turtlesim turtlesim.yaml

# 示例：将turtlesim.yaml文件参数导入到节点/turtlesim中
ros2 param load /turtlesim turtlesim.yaml

# 示例：启动turtlesim_node节点时，导入turtlesim.yaml文件的参数
ros2 run turtlesim turtlesim_node --ros-args --params-file turtlesim.yaml
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;用来查看日志的rqt_console&#34;&gt;用来查看日志的rqt_console&lt;/h2&gt;
&lt;p&gt;rqt_console是一个 GUI 工具，用于在 ROS 2 中不同等级的日志消息。通常，日志消息会显示在您的终端中。使用rqt_console，您可以随着时间的推移收集这些消息，以更有条理的方式仔细查看它们，过滤它们，保存它们，甚至重新加载保存的文件以在不同时间进行反思。&lt;/p&gt;
&lt;p&gt;rqt_console记录日志的级别：&lt;/p&gt;
&lt;p&gt;每个级别的含义没有确切的标准，但可以肯定地假设：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Fatal消息表明系统将终止以尝试保护自身免受损害。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Error消息表明存在重大问题，这些问题不一定会损坏系统，但会阻止其正常运行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Warn消息表明意外的活动或不理想的结果，可能代表更深层次的问题，但不会彻底损害功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Info消息指示事件和状态更新，作为系统是否按预期运行的视觉验证。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Debug消息详细说明了系统执行的整个逐步过程。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 启动rqt_console
ros2 run rqt_console rqt_console

# 示例：设置节点的记录器日志级别为WRAN
ros2 run turtlesim turtlesim_node --ros-args --log-level WARN
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;记录并回放&#34;&gt;记录并回放&lt;/h2&gt;
&lt;p&gt;ros2 bag是一个命令行工具，用于记录系统中主题发布的数据。它累积在任意数量的主题上传递的数据并将其保存在数据库中。然后，您可以重播数据以重现测试和实验的结果。&lt;/p&gt;
&lt;p&gt;安装ros2 bag&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt-get install ros-iron-ros2bag ros-iron-rosbag2-storage-default-plugins
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;开始记录&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 创建保存记录的目录
mkdir bag_files
cd bag_files

# 记录主题（ctrl+c停止记录）
ros2 bag record &amp;lt;topic_name&amp;gt;

# 查看记录的信息
ros2 bag info &amp;lt;bag_file_name&amp;gt;

# 播放主题
ros2 bag play &amp;lt;bag_file_name&amp;gt;

# 示例：记录/turtle1/cmd_vel主题（ctrl+c停止记录）
ros2 bag record /turtle1/cmd_vel

# 示例：记录多个主题，记录/turtle1/cmd_vel主题和/turtle1/pose主题
ros2 bag record -o subset /turtle1/cmd_vel /turtle1/pose
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;知识点&#34;&gt;知识点&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ROS_DOMAIN_ID变量&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ROS_DOMAIN_ID也可称为域ID，其值的选择与本地计算机环境有关，Linux环境下，使用0-65535作为端口号，并且32768-60999作为临时端口，临时端口在任何时候都可能会被Linux使用，所以用户端口应该尽量避免与临时端口冲突。&lt;br&gt;
ROS_DOMAIN_ID与端口号的关联来自一个公式：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;端口号 = 7400 + 250 * ROS_DOMAIN_ID + 0
ROS_DOMAIN_ID = (端口号 - 7400) / 250
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;为了安全使用，根据上面的计算公式和临时端口的区域可以得出以下限制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linux环境下，域ID只能选择ID 0~101和ID 215~232&lt;/li&gt;
&lt;li&gt;Linux环境下，域ID 101最多只能创建54个进程&lt;/li&gt;
&lt;li&gt;Linux环境下，域ID 232最多只能创建63个进程&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于Windows、MacOS等环境，由于临时端口的分配区域不同，限制条件也有差异，详情见&lt;br&gt;
&lt;a href=&#34;https://docs.ros.org/en/iron/Concepts/Intermediate/About-Domain-ID.html&#34;&gt;The ROS_DOMAIN_ID&lt;/a&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ROS_AUTOMATIC_DISCOVERY_RANGE变量&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ROS_AUTOMATIC_DISCOVERY_RANGE变量可以设置 ROS 节点尝试相互发现的距离。&lt;/p&gt;
&lt;p&gt;有效选项有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SUBNET，默认值，对于基于 DDS 的中间件来说，这意味着它将发现通过多播可到达的任何节点。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;LOCALHOST，节点只会尝试发现同一台机器上的其他节点。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OFF，该节点不会发现任何其他节点，即使在同一台机器上。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SYSTEM_DEFAULT，不更改任何发现设置&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;详情见&lt;a href=&#34;https://docs.ros.org/en/iron/Tutorials/Advanced/Improved-Dynamic-Discovery.html#improveddynamicdiscovery&#34;&gt;Improved Dynamic Discovery&lt;/a&gt;&lt;/p&gt;
">[ROS2] CLI工具使用</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/shi-yong-bouffalo-sdk-kai-fa-bl618/"" data-c="
          &lt;h2 id=&#34;一-下载bouffalo-sdk&#34;&gt;一、下载bouffalo sdk&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/bouffalolab/bouffalo_sdk.git
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-安装工具链&#34;&gt;二、安装工具链&lt;/h2&gt;
&lt;p&gt;windows 下使用&lt;a href=&#34;https://gitee.com/bouffalolab/toolchain_gcc_t-head_windows&#34;&gt;riscv64-unknown-elf-gcc&lt;/a&gt;&lt;br&gt;
Linux 下使用&lt;a href=&#34;https://gitee.com/bouffalolab/toolchain_gcc_t-head_linux&#34;&gt;riscv64-unknown-elf-gcc&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 确认一下交叉编译工具链是否正常
# 1. 如果是默认路径，确认CROSS_COMPILE ?= riscv64-unknown-elf-
riscv64-unknown-elf-gcc -v

# 2. 如果是自定义路径，确认配置CROSS_COMPILE ?= /opt/toolchain_gcc_t-head_linux/bin/riscv64-unknown-elf-（这里填的实际工具链位置）
/opt/toolchain_gcc_t-head_linux/bin/riscv64-unknown-elf-gcc -v

# 执行xxx-gcc -v后打印的末尾字段如下：
Thread model: posix
Supported LTO compression algorithms: zlib
gcc version 10.2.0 (Xuantie-900 elf newlib gcc Toolchain V2.6.1 B-20220906) 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;三-编译&#34;&gt;三、编译&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd examples/helloworld
make CHIP=bl616 BOARD=bl616dk   
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;四-烧录&#34;&gt;四、烧录&lt;/h2&gt;
&lt;p&gt;减轻敲代码的负担，为串口操作添加默认sudo权限&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo usermod -aG dialout xxx # xxx 是你自己的用户名
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;烧录固件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd examples/helloworld
make flash CHIP=chip_name COMX=xxx # chip_name should be bl602/bl702/bl616/bl808/bl606p, COMX in Windows, /dev/ttyxxx in Linux
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;五-遇到了问题&#34;&gt;五、遇到了问题&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;首先检查工具链是否正确，上文介绍了如何确认工具链是否正确&lt;/li&gt;
&lt;li&gt;可能是编译中间文件导致的问题，尝试&lt;code&gt;make clean&lt;/code&gt;后再重新编译&lt;/li&gt;
&lt;/ol&gt;
">使用bouffalo sdk开发bl618</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/kai-shi-shi-yong-licheepi-4a-ji-lu/"" data-c="
          &lt;p&gt;LicheePi 4A 是基于 Lichee Module 4A 核心板的 高性能 RISC-V Linux 开发板，以 TH1520 为主控核心（4xC910@1.85G， RV64GCV，4TOPS@int8 NPU， 50GFLOP GPU），板载最大 16GB 64bit LPDDR4X，128GB eMMC，支持 HDMI+MIPI 双4K 显示输出，支持 4K 摄像头接入，双千兆网口（其中一个支持POE供电）和 4 个 USB3.0 接口，多种音频输入输出（由专用 C906 核心处理）。&lt;br&gt;
LicheePi 4A长这样的：&lt;br&gt;
&lt;img src=&#34;https://wiki.sipeed.com/hardware/zh/lichee/th1520/lpi4a/assets/intro/lpi4a.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;开始供电，根据sipeed文档指示，如果不接显示屏之类的耗电高的外设，可以直接通过USB供电。接显示屏太麻烦了，所以这里直接typec口的USB接上HUB（有外部电源）供电。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;接显示屏太麻烦了，所以直接用串口来操作系统。串口的连接方法参考：&lt;br&gt;
&lt;img src=&#34;https://wiki.sipeed.com/hardware/zh/lichee/th1520/lpi4a/assets/peripheral/ttl_link.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;再插上网线。&lt;br&gt;
插上网线后系统会自动识别设备，并获取ip地址。我手上的系统不带有ifconfig，所以用ip命令来查看ip地址&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ip addr show
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;通过ssh登录。开发过程中，通常在本地用vscode通过ssh连接目标机器开发，所以需要先连通ssh&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 在licheepi 4a中执行
sudo apt update                         # 更新软件源
sudo apt instal openssh-server  # 安装sshd服务

# 本地主机执行
ssh sipeed@192.168.0.245        # 根据实际ip填写
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;OK,可以开始自由开发了&lt;/li&gt;
&lt;/ol&gt;
">开始使用LicheePi 4A记录</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://lxowalle.github.io/cong-0-kai-shi-da-jian-h616-de-kai-fa-huan-jing/"" data-c="
          &lt;h2 id=&#34;零-下载工具链&#34;&gt;零、下载工具链&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads/&#34;&gt;下载交叉工具链aarch64-none-linux-gnu&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 解压到/opt目录下，后边会用到
sudo tar -xf arm-gnu-toolchain-12.2.rel1-x86_64-aarch64-none-linux-gnu.tar.xz -C /opt
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;一-编译调试u-boot&#34;&gt;一、编译调试u-boot&lt;/h2&gt;
&lt;p&gt;这里提供通过sunxi-tools工具来进行USB调试，将u-boot直接烧录到RAM中，方便调试。&lt;/p&gt;
&lt;h3 id=&#34;安装sunxi-tools工具&#34;&gt;安装sunxi-tools工具&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/linux-sunxi/sunxi-tools
cd sunxi-tools
make

# 或者直接从仓库下载
sudo apt install sunxi-tools
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;编译可信启动固件arm-trusted-firmware&#34;&gt;编译可信启动固件arm-trusted-firmware&lt;/h3&gt;
&lt;p&gt;arm_trusted_firmware是用于arm芯片最最最初运行的启动代码，有兴趣可以了解一下ATF的资料。我们这里只编译bl31固件。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 分支：`master` 版本：`e09b8aa5a517bae522feb11913a091067d9ed18e`
git clone https://github.com/ARM-software/arm-trusted-firmware.git
cd arm-trusted-firmware

# 开始编译。这里是芯片是H616，所以填PLAT=sun50i_h616
make CROSS_COMPILE=/opt/arm-gnu-toolchain-12.2.rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-  PLAT=sun50i_h616 DEBUG=1 bl31
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;编译u-boot&#34;&gt;编译u-boot&lt;/h3&gt;
&lt;p&gt;直接上最新的u-boot。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 分支：`master` 版本：`f95232c6f06cc0747801bb6a4372b33825ab0164`
git clone git://git.denx.de/u-boot.git
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;需要修改两处代码来解决可能出现的两种问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;解决&lt;code&gt;Failed to set core voltage! Can&#39;t set CPU frequency&lt;/code&gt;问题，原因是电源驱动不匹配，我测试时板子电源IC是AXP1530，所以可以直接修改&lt;code&gt;drivers/power/axp305.c&lt;/code&gt;文件&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# drivers/power/axp305.c
# 1/3 删除axp_set_dcdc4的代码实现
int axp_set_dcdc4(unsigned int mvolt)
{
	(void)mvolt;
	return 0;
}
# 2/3 添加设置dcdc3电压的函数
#define AXP305_DCDC3_1200MV_OFFSET 71
int axp_set_dcdc3(unsigned int mvolt)
{
	int ret;
	u8 cfg;

	if (mvolt &amp;gt;= 1220)
	{
		cfg = AXP305_DCDC3_1200MV_OFFSET +
			axp305_mvolt_to_cfg(mvolt, 1220, 1840, 20);
	}
	else
		cfg = axp305_mvolt_to_cfg(mvolt, 500, 1200, 10);

	if (mvolt == 0)
		return pmic_bus_clrbits(AXP305_OUTPUT_CTRL1,
								AXP305_OUTPUT_CTRL1_DCDCD_EN);

	ret = pmic_bus_write(AXP305_DCDCD_VOLTAGE, cfg);
	if (ret)
		return ret;
 
	return pmic_bus_setbits(AXP305_OUTPUT_CTRL1,
				0x1f);
}

# 3/3 修改axp_init函数的实现
int axp_init(void)
{
	u8 axp_chip_id;
	int ret;

	ret = pmic_bus_init();
	if (ret)
		return ret;

	ret = pmic_bus_read(AXP305_CHIP_VERSION, &amp;amp;axp_chip_id);
	if (ret)
		return ret;

	if ((axp_chip_id &amp;amp; AXP305_CHIP_VERSION_MASK) != 0x4b) {
		printf(&amp;quot;AXP1530: Unsupported chip ID: 0x%x\n&amp;quot;, axp_chip_id);		
		return -ENODEV;
	}

	if (0 != axp_set_dcdc3(1500)) {
		printf(&amp;quot;AXP1530: Failed to set DCDC3\n&amp;quot;);
		return -ENODEV;
	}

	return ret;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;u-boot的一个bug会导致上传程序时出现&lt;code&gt;usb_bulk_send() ERROR -7: Operation timed out&lt;/code&gt;的问题，需要修改&lt;code&gt;arch/arm/mach-sunxi/dram_sun50i_h616.c&lt;/code&gt;文件&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# arch/arm/mach-sunxi/dram_sun50i_h616.c
# 1/1 在mctl_phy_read_calibration函数开头添加udelay(0)来解决
static bool mctl_phy_read_calibration(struct dram_para *para)
{
	bool result = true;
	u32 val, tmp;
	udelay(0);	// 为了修复usb_bulk_send() ERROR -7: Operation timed out问题而添加，问题根源位置，见https://github.com/linux-sunxi/sunxi-tools/issues/182
	clrsetbits_le32(SUNXI_DRAM_PHY0_BASE + 8, 0x30, 0x20);
    // ...
    // other code
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;开始编译&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 使用orangepi_zero2_defconfig的配置
make CROSS_COMPILE=/opt/arm-gnu-toolchain-12.2.rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu- BL31=../arm-trusted-firmware/build/sun50i_h616/debug/bl31.bin orangepi_zero2_defconfig

# 编译
make CROSS_COMPILE=/opt/arm-gnu-toolchain-12.2.rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu- BL31=../arm-trusted-firmware/build/sun50i_h616/debug/bl31.bin
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;二-测试启动u-boot&#34;&gt;二、 测试启动u-boot&lt;/h2&gt;
&lt;h3 id=&#34;1-让板子进入fel模式&#34;&gt;1. 让板子进入fel模式&lt;/h3&gt;
&lt;p&gt;只要取出sd卡再上电，就可以直接进入fel模式&lt;/p&gt;
&lt;h3 id=&#34;2-通过usb启动板子&#34;&gt;2. 通过USB启动板子&lt;/h3&gt;
&lt;p&gt;现在开始用安装的sunxi-tools来通过USB启动u-boot了&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd u-boot
../sunxi-tools/sunxi-fel uboot u-boot-sunxi-with-spl.bin
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;此时板子就能跑起来~有问题的话先检查一下是否有漏操作的地方，或者查查资料吧&lt;/p&gt;
">基于H616环境调试u-boot</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + '秒之前';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + '分钟之前';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + '小时之前';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + '天之前';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }

  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>


  <script
    src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script>
    var scroll = new SmoothScroll('a[href*="#"]', {
      speed: 200
    });
  </script>



<script src="/media/js/mouse/love.js"></script>




</html>